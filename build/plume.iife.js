var je=Object.defineProperty;var Ie=(m,y,v)=>y in m?je(m,y,{enumerable:!0,configurable:!0,writable:!0,value:v}):m[y]=v;var P=(m,y,v)=>(Ie(m,typeof y!="symbol"?y+"":y,v),v),ne=(m,y,v)=>{if(!y.has(m))throw TypeError("Cannot "+v)};var n=(m,y,v)=>(ne(m,y,"read from private field"),v?v.call(m):y.get(m)),w=(m,y,v)=>{if(y.has(m))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(m):y.set(m,v)},k=(m,y,v,D)=>(ne(m,y,"write to private field"),D?D.call(m,v):y.set(m,v),v);var M=(m,y,v)=>(ne(m,y,"access private method"),v);var PlumeJS=function(m){var O,me,z,U,J,R,L,G,be,j,W,B,K,ye,Q,ve,$,Z;"use strict";const y=new(me=class{constructor(){w(this,O,void 0);k(this,O,new WeakMap)}register(t,e){if(!n(this,O).get(t))n(this,O).set(t,e);else throw console.error(t),"service already exists"}getService(t){const e=n(this,O).get(t);if(e)return e;throw console.error(t),"service is not a registered service."}clear(){k(this,O,new WeakMap)}},O=new WeakMap,me),v=t=>typeof t=="function",D=t=>{const e=t.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(s=>s.trim()):[]},ee=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),oe=(t,e,s,r=!1)=>(t.addEventListener(e,s,r),()=>{t.removeEventListener(e,s,r)}),Se=t=>{const e=()=>new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),s=u=>{const S=u.querySelectorAll("script");for(const T of S)T.remove()},r=(u,S)=>{if(S=S.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(u)&&(S.includes("javascript:")||S.includes("data:"))||u.startsWith("on"))return!0},c=u=>{const S=u.attributes;for(const{name:T,value:X}of S)r(T,X)&&u.removeAttribute(T)},o=u=>{const S=u.children;for(const T of S)c(T),o(T)},d=e();return s(d),o(d),d.innerHTML},we=function(t){t.renderCount===1&&queueMicrotask(()=>{t.update(),t.renderCount=0})},Ce=(t,e)=>{const s=D(e);return class extends e{constructor(...r){return super(...r),r.forEach((c,o)=>{this[s[o]]=c}),new Proxy(this,{get(c,o,d){return Reflect.get(c,o,d)},set(c,o,d,u){return Reflect.set(c,o,d,u),++t.renderCount,we(t),!0},deleteProperty(c,o){Reflect.deleteProperty(c,o)}})}}},ae=(t,e,s)=>{if(e.length>0){const r=[];for(const d of e)d.__metadata__?r.push(s):r.push(y.getService(d));const c=D(t),o=new t(...r);return e.forEach((d,u)=>{o[c[u]]=r[u]}),o}else return new t},F=new class{constructor(){P(this,"globalStyles");P(this,"globalStyleTag");P(this,"style_registry");P(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(t=""){let e=[];const s=new CSSStyleSheet;if(s.insertRule(":host { display: block; }"),e=[this.globalStyles,s],t){const r=new CSSStyleSheet;r.replace(t),e.push(r)}return e}},{html:te,render:ce}=(()=>{const t=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,s="attr",r=/^attr([^ ]+)/,c="insertNode",o=/^insertNode([^ ]+)/;let d=[];const u=l=>{const i={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let f=JSON.stringify(l);const h=a=>i[a]||a;return f=(a=>a.replace(/[&<>\(\)]/g,h))(f),JSON.parse(f)},S=(l,i)=>{const f=l.options,h=Array.isArray(i)?i:[i];let g,a,p=f.length;for(;p--;){a=f[p];const b=a.getAttribute("value")??(a.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(a.selected=h.indexOf(b)>-1)&&(g=!0)}g||(l.selectedIndex=-1)},T=l=>{const i=document.createElement("template");return i.innerHTML=l,i.content},X=(l,i)=>{const f=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,null);let h=f.nextNode();for(;h;){if(h.hasAttributes()){const g=Array.from(h.attributes).filter(a=>r.test(a.nodeName));for(const{nodeName:a,nodeValue:p}of g){const b=r.exec(a)[1];switch(!0){case/^on+/.test(p):{const x=p.slice(2).toLowerCase();h.removeEventListener(x,i[b]),x!=="bindprops"?h.addEventListener(x,i[b]):h.addEventListener(x,I=>{I.detail.setProps(i[b]())});break}case/ref/.test(p):{const x=(I=>{const Y=I;return()=>{Y.isConnected&&i[b](Y)}})(h);d.push(x);break}case/^data-+/.test(p):case/^aria-+/.test(p):{h.setAttribute(p,u(i[b]));break}case/class/.test(p):{i[b]?h.classList.add(...i[b].split(" ")):h.setAttribute("class","");break}case/value/.test(p):{h.nodeName.toLowerCase()==="select"?S(h,i[b]):h.value=u(i[b]);break}case/disabled/.test(p):case/checked/.test(p):{i[b]?h.setAttribute(p,i[b]):h.removeAttribute(p);break}default:h.setAttribute(p,u(i[b]))}h.removeAttribute(a)}}h=f.nextNode()}},C=(l,i)=>{const f=document.createTreeWalker(l,NodeFilter.SHOW_COMMENT,null);let h=f.nextNode(),g;for(;h;){if(g=o.exec(h.data)){const a=Array.isArray(i[g[1]])?i[g[1]]:[i[g[1]]];h.replaceWith(...a),f.currentNode=l}h=f.nextNode()}},A=(l,i)=>{if(!l||!i||l.nodeType!==1||i.nodeType!==1)return;const f=l.attributes,h=i.attributes;for(const{name:g,value:a}of f)/class/.test(g)?Array.from(l.classList).every(p=>{i.classList.contains(p)||i.classList.add(p)}):(!h[g]||h[g]!==a)&&i.setAttribute(g,a);for(const{name:g}of h)/class/.test(g)?Array.from(i.classList).every(a=>{l.classList.contains(a)||i.classList.remove(a)}):f[g]||i.removeAttribute(g)},E=l=>l.nodeType===3?"text":l.nodeType===8?"comment":l.tagName.toLowerCase(),N=l=>l.childNodes&&l.childNodes.length>0?null:l.textContent,_=(l,i)=>{const f=i?Array.from(i.childNodes):[],h=l?Array.from(l.childNodes):[];let g=f.length-h.length;if(g>0)for(;g>0;g--)f[f.length-g].parentNode.removeChild(f[f.length-g]);h.forEach(function(a,p){const b=f[p];if(A(a,b),!b){i&&i.appendChild(a);return}if(E(a)!==E(b)){b.replaceWith(a);return}const x=N(a);if(x&&x!==N(b)){b.textContent=x;return}if(b.childNodes.length>0&&a.childNodes.length<1){b.innerHTML="";return}if(b.childNodes.length<1&&a.childNodes.length>0){const I=document.createDocumentFragment();_(a,I),b.appendChild(I);return}if(a.childNodes.length>0){_(a,b);return}})};return{html:(l,...i)=>{let f="";const{length:h}=l;for(let a=1;a<h;a++){const p=i[a-1];let b=!1;if(f+=l[a-1],t.test(f)&&e.test(f)&&(f=f.replace(t,(x,I,Y)=>`${s}${a-1}=${Y||'"'}${I}${Y?"":'"'}`),b=!0),!b)switch(!0){case Array.isArray(p):case p instanceof DocumentFragment:{f+=`<!--${c}${a-1}-->`;break}case(typeof p=="object"&&p!==null):{"html"in p&&(f+=p.html);break}default:f+=p}}f+=l[h-1];const g=T(f.trim());return X(g,i),C(g,i),g},render:(l,i)=>{l&&!l.children.length?(l.innerHTML="",l.appendChild(i)):_(i,l),d.forEach(f=>{f()}),d=[]}}})();class le{constructor(e,s){w(this,z,void 0);w(this,U,void 0);P(this,"update");P(this,"emitEvent");k(this,U,e),k(this,z,s)}static get __metadata__(){return{name:"Renderer"}}get shadowRoot(){return n(this,z)}get hostElement(){return n(this,U)}}z=new WeakMap,U=new WeakMap;const Re={selector:"",root:!1,styles:"",deps:[],standalone:!1},ue=(t,e)=>{const s=document.createElement("style");return s.innerHTML=t,e&&e.appendChild(s),s},Ae=(t,e)=>{var s,r,c,o,pe,u,ie,T;if(t={...Re,...t},t.styles=t.styles.toString(),t.root&&!F.isRootNodeSet)F.isRootNodeSet=!0,t.styles&&(F.globalStyles.replace(t.styles),F.globalStyleTag=ue(t.styles,document.head));else if(t.root&&F.isRootNodeSet)throw Error("Cannot register duplicate root component in "+t.selector+" component");window.customElements.define(t.selector,(T=class extends HTMLElement{constructor(){super();w(this,o);w(this,u);w(this,s,void 0);w(this,r,void 0);w(this,c,void 0);P(this,"renderCount",0);k(this,r,this.attachShadow({mode:"open"})),ee||(n(this,r).adoptedStyleSheets=F.getComputedCss(t.styles,t.standalone)),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this)}static get observedAttributes(){return[...e.observedAttributes||[]]}update(){const C=n(this,s).render();typeof C=="string"?n(this,r).innerHTML=Se(C):ce(n(this,r),C),ee&&(t.styles&&n(this,r).insertBefore(n(this,c),n(this,r).childNodes[0]),F.globalStyleTag&&!t.standalone&&n(this,r).insertBefore(document.importNode(F.globalStyleTag,!0),n(this,r).childNodes[0]))}setProps(C){var A,E;for(const[N,_]of Object.entries(C))e.observedProperties.find(q=>q===N)&&(n(this,s)[N]=_);(E=(A=n(this,s)).onPropertiesChanged)==null||E.call(A)}getInstance(){return n(this,s)}connectedCallback(){var A,E,N,_;M(this,o,pe).call(this);const C=new le(this,n(this,r));C.update=()=>{this.update()},C.emitEvent=(q,ge)=>{M(this,u,ie).call(this,q,ge)},k(this,s,ae(Ce(this,e),t.deps,C)),(E=(A=n(this,s)).beforeMount)==null||E.call(A),this.renderCount===0&&this.update(),(_=(N=n(this,s)).mount)==null||_.call(N),M(this,u,ie).call(this,"bindprops",{setProps:q=>{this.setProps(q)}},!1)}attributeChangedCallback(C,A,E){var N,_;(_=(N=n(this,s)).onAttributesChanged)==null||_.call(N,C,A,E)}disconnectedCallback(){var C,A;this.renderCount=1,(A=(C=n(this,s)).unmount)==null||A.call(C)}},s=new WeakMap,r=new WeakMap,c=new WeakMap,o=new WeakSet,pe=function(){ee&&t.styles&&k(this,c,ue(t.styles))},u=new WeakSet,ie=function(C,A){const E=new CustomEvent(C,{detail:A});this.dispatchEvent(E)},T))},Te={deps:[]},he=t=>e=>{if(t.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(t.selector)||Ae(t,e)},se=(t={})=>e=>{if(t={...Te,...t},t.deps.some(r=>{var c;return((c=r.__metadata__)==null?void 0:c.name)==="Renderer"}))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const s=ae(e,t.deps);y.register(e,s)},Ee=t=>{let e;switch(t.nodeName&&t.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(t.type)?e=t.checked?t.value!==null&&t.value!=="on"?t.value:!0:!1:e=t.value;break}case"select":{const s=t.type==="select-one",c=[...Array.from(t.options)].filter(o=>o.selected).map(o=>o.value??(o.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));e=s?c[0]:c;break}default:{e=t.value;break}}return e};class Pe{constructor(e,s){w(this,G);w(this,J,void 0);w(this,R,void 0);w(this,L,new Map);k(this,J,e),k(this,R,s)}get errors(){return n(this,L)}get valid(){return M(this,G,be).call(this),!n(this,L).size}get value(){const e={};for(const[s,r]of Object.entries(n(this,R)))e[s]=r.value;return e}get(e){return n(this,R)[e]}reset(e={}){for(const s in n(this,R))n(this,R)[s].value=e[s]||n(this,J)[s];n(this,L).clear()}}J=new WeakMap,R=new WeakMap,L=new WeakMap,G=new WeakSet,be=function(){n(this,L).clear();for(const e in n(this,R)){const s=n(this,R)[e].value,r=n(this,R)[e].validators;n(this,R)[e].errors=null;for(const c of r){const o=c(s);o!==null&&(n(this,L).has(e)?(n(this,L).set(e,{...n(this,L).get(e),...o}),n(this,R)[e].errors={...n(this,R)[e].errors,...o}):(n(this,L).set(e,o),n(this,R)[e].errors=o))}}};const Le=t=>{const e={},s={};for(const[d,u]of Object.entries(t)){const S=Array.isArray(u)?u:[u];e[d]={value:S.shift(),validators:S},s[d]=e[d].value}const r=new Pe(s,e);return[r,d=>u=>{const S=Ee(u.target);r.get(d).value=S},()=>{r.reset()}]},Ne=t=>{let e=t;return[e,r=>{let c;v(r)?c=r(e):c=r,Object.assign(e,c)}]};class _e{static required(e){return e.length?null:{required:!0}}static min(e){return s=>s.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return s=>s.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return s=>new RegExp(e).test(s)?null:{pattern:!0}}}const xe=t=>!!t&&typeof t.subscribe=="function",ke=t=>!!t&&typeof t.then=="function",Me=t=>({subscribe:e=>{e(t)}}),Fe=t=>({subscribe:e=>{Promise.resolve(t).then(s=>{e(s)})}});class He{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const de=t=>xe(t)?t:ke(t)?Fe(Promise.resolve(t)):Me(t),V=class{static checkParams(e,s){let r=0;const c={},o=s.paramCount;for(let d=0;d<e.length;d++){const u=s.params[d];u.indexOf(":")>=0&&(c[u.split(":")[1]]=e[d].split("?")[0],r+=1)}return r===o?c:{}}static getParamCount(e){let s=0;return e.forEach(r=>{r.indexOf(":")>=0&&(s+=1)}),s}static formatRoute(e){const s={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:e.preload,canActivate:()=>!0};if(s.params=e.path.split("/").filter(r=>r.length>0),s.url=e.path,s.template="",s.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");s.template=e.template,s.templatePath=e.templatePath}e.canActivate&&(s.canActivate=e.canActivate),s.paramCount=V.getParamCount(s.params),V.routeList.push(s)}static preloadRoutes(){for(const e of V.routeList)e.templatePath&&e.templatePath()}static preloadSelectedRoutes(){const e=V.routeList.filter(s=>s.preload===!0);for(const s of e)s.templatePath&&s.templatePath()}};let H=V;P(H,"routeList",[]);class re{constructor(){w(this,K);w(this,Q);w(this,$);w(this,j,{path:"",routeParams:new Map,queryParams:new Map,state:{}});w(this,W,new He);w(this,B,void 0)}startHashChange(){k(this,B,oe(window,"hashchange",()=>{M(this,K,ye).call(this)}))}stopHashChange(){n(this,B).call(this)}getTemplate(){return n(this,W).asObservable()}getCurrentRoute(){return n(this,j)}navigateTo(e="",s){e?(window.location.hash.replace(/^#/,"")===e&&M(this,$,Z).call(this,e,s),window.location.hash="#"+e):M(this,$,Z).call(this,e,s)}}j=new WeakMap,W=new WeakMap,B=new WeakMap,K=new WeakSet,ye=function(){const e=window.location.hash.replace(/^#/,"");M(this,$,Z).call(this,e,null)},Q=new WeakSet,ve=function(e,s){if(e){const r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return s.match(r)}else return e===s},$=new WeakSet,Z=function(e,s){const r=e.split("/").filter(d=>d.length>0),c=H.routeList.filter(d=>{if(d.params.length===r.length&&M(this,Q,ve).call(this,d.url,e))return d;if(d.url===e)return d}),o=c.length>0?c[0]:null;o&&(n(this,j).path=e,n(this,j).state={...s||{}},de(o.canActivate()).subscribe(d=>{if(!d)return;const u=H.checkParams(r,o);if(Object.keys(u).length>0||e){n(this,j).routeParams=new Map(Object.entries(u));const S=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];n(this,j).queryParams=new Map(S),o.isRegistered?n(this,W).next(o.template):o.templatePath&&de(o.templatePath()).subscribe(()=>{o.isRegistered=!0,n(this,W).next(o.template)})}else this.navigateTo(o.redirectTo,s)}))},se()(re);const Oe=()=>{class t{constructor(s){P(this,"template","");P(this,"subscriptions");P(this,"update")}beforeMount(){this.subscriptions=this.internalRouterSrvc.getTemplate().subscribe(s=>{this.template=s}),this.internalRouterSrvc.startHashChange()}mount(){let s=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(s)}unmount(){this.subscriptions(),this.internalRouterSrvc.stopHashChange()}render(){if(this.template){const s=[`${this.template}`];return s.raw=[`${this.template}`],te(s)}else return te``}}he({selector:"router-outlet",deps:[re]})(t)};class fe{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,s){this.internalRouter.navigateTo(e,s)}registerRoutes(e,s=!1){if(Array.isArray(e)){for(const r of e)H.formatRoute(r);s?H.preloadRoutes():H.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return se({deps:[re]})(fe),m.Component=he,m.Injectable=se,m.Renderer=le,m.Router=fe,m.Validators=_e,m.fromEvent=oe,m.html=te,m.registerRouterComponent=Oe,m.render=ce,m.useFormFields=Le,m.useState=Ne,Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),m}({});
