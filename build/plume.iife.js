var kt=Object.defineProperty;var Ot=(h,g,S)=>g in h?kt(h,g,{enumerable:!0,configurable:!0,writable:!0,value:S}):h[g]=S;var _=(h,g,S)=>(Ot(h,typeof g!="symbol"?g+"":g,S),S),K=(h,g,S)=>{if(!g.has(h))throw TypeError("Cannot "+S)};var y=(h,g,S)=>(K(h,g,"read from private field"),S?S.call(h):g.get(h)),M=(h,g,S)=>{if(g.has(h))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(h):g.set(h,S)},H=(h,g,S,N)=>(K(h,g,"write to private field"),N?N.call(h,S):g.set(h,S),S);var Q=(h,g,S)=>(K(h,g,"access private method"),S);var PlumeJS=function(h){var O,it;"use strict";const g=s=>typeof s=="function",S=Object.create(null);let N=null;function ct(){return Math.random().toString(36).substring(2)}function lt(s,t){const e=N;let r;N=ct(),S[N]=s;try{t()}finally{r=N,N=e}return r}function ut(s){const t=S[N];let e=s;function r(){return e}return r.set=function(o){g(o)?e=o(e):e=o,queueMicrotask(()=>{t()})},r}function ht(s,t){const e=lt(s,t);return function(){delete S[e]}}const X=new(it=class{constructor(){M(this,O,void 0);H(this,O,new WeakMap)}register(s,t){if(!y(this,O).get(s))y(this,O).set(s,t);else throw console.error(s),"service already exists"}getService(s){const t=y(this,O).get(s);if(t)return t;throw console.error(s),"service is not a registered service."}clear(){H(this,O,new WeakMap)}},O=new WeakMap,it),dt=s=>!!s&&typeof s.subscribe=="function",ft=s=>!!s&&typeof s.then=="function",Z=s=>{const t=s.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return t.length===3?t[1].split(",").map(e=>e.trim()):[]},pt=(()=>{try{return new CSSStyleSheet,!0}catch{return!1}})(),bt=s=>({subscribe:t=>{t(s)}}),gt=s=>({subscribe:t=>{Promise.resolve(s).then(e=>{t(e)})}}),mt=()=>Math.random().toString(36).substring(2);class W{constructor(){_(this,"_callbackCollection",{})}unsubscribe(t){delete this._callbackCollection[t]}asObservable(){return{subscribe:t=>this.subscribe(t)}}subscribe(t){const e=mt();return this._callbackCollection[e]=t,()=>this.unsubscribe(e)}next(t){for(const e in this._callbackCollection)this._callbackCollection[e](t)}}class $ extends W{constructor(e){super();_(this,"_initialValue");this._initialValue=e}subscribe(e){const r=super.subscribe(e);return super.next(this._initialValue),r}next(e){this._initialValue=e,super.next(e)}}class q{constructor(){_(this,"_subcribers",[])}add(t){this._subcribers.push(t)}unsubscribe(){for(const t of this._subcribers)t();this._subcribers=[]}}const J=s=>dt(s)?s:ft(s)?gt(Promise.resolve(s)):bt(s),B=(s,t,e,r=!1)=>(s.addEventListener(t,e,r),()=>{s.removeEventListener(t,e,r)}),_t=s=>{const t=()=>new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),e=p=>{const v=p.querySelectorAll("script");for(const P of v)P.remove()},r=(p,v)=>{if(v=v.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(p)&&(v.includes("javascript:")||v.includes("data:"))||p.startsWith("on"))return!0},o=p=>{const v=p.attributes;for(const{name:P,value:k}of v)r(P,k)&&p.removeAttribute(P)},l=p=>{const v=p.children;for(const P of v)o(P),l(P)},u=t();return e(u),l(u),u.innerHTML},yt=function(s){s.renderCount===1&&queueMicrotask(()=>{s.update(),s.renderCount=0})},vt=(s,t)=>{const e=Z(t),r=()=>({get(o,l){const u=Object.prototype.toString.call(o[l]);return["[object Object]","[object Array]"].indexOf(u)>-1&&!("__metadata__"in o[l])?new Proxy(o[l],r()):o[l]},set(o,l,u){return o[l]=u,++s.renderCount,yt(s),!0}});return class extends t{constructor(...o){return super(...o),o.forEach((l,u)=>{e[u]&&e[u]!=="undefined"&&(this[e[u]]=l)}),new Proxy(this,r())}}},wt=()=>{let s;return[new Promise(e=>{s=e}),s]},tt=(s,t,e)=>{if(t.length>0){const r=[];for(const u of t)u.prototype.__metadata__.name!=="RENDERER"?r.push(X.getService(u)):r.push(e);const o=Z(s),l=new s(...r);return t.forEach((u,p)=>{l[o[p]]=r[p]}),l}else return new s},j=new class{constructor(){_(this,"globalStyles");_(this,"globalStyleTag");_(this,"style_registry");_(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(s=""){let t=[];const e=new CSSStyleSheet;if(e.insertRule(":host { display: block; }"),t=[this.globalStyles,e],s){const r=new CSSStyleSheet;r.replace(s),t.push(r)}return t}},{html:U,render:et}=(()=>{const s=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,t=/<[a-z][^>]+$/i,e="attr",r=/^attr([^ ]+)/,o="insertNode",l=/^insertNode([^ ]+)/;let u=[],p=[];const v=a=>{const n={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let d=JSON.stringify(a);const c=f=>n[f]||f;return d=(f=>f.replace(/[&<>\(\)]/g,c))(d),JSON.parse(d)},P=(a,n)=>{const d=a.options,c=Array.isArray(n)?n:[n];let C,f,i=d.length;for(;i--;){f=d[i];const b=f.getAttribute("value")??(f.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(f.selected=c.indexOf(b)>-1)&&(C=!0)}C||(a.selectedIndex=-1)},k=a=>{const n=document.createElement("template");return n.innerHTML=a,n.content},V=(a,n,d)=>{const c=()=>{setTimeout(()=>{if(a.isConnected){const C=new CustomEvent("bindprops",{detail:{props:n},bubbles:!1});a.dispatchEvent(C)}})};a[d]=JSON.stringify(n),p.push(c)},w=(a,n)=>{const d=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,null);let c=d.nextNode();for(;c;){if(c.hasAttributes()){const C=Array.from(c.attributes).filter(f=>r.test(f.nodeName));for(const{nodeName:f,nodeValue:i}of C){const b=r.exec(f)[1];switch(!0){case/^on+/.test(i):{const m=i.slice(2).toLowerCase();c.removeEventListener(m,n[b]),c.addEventListener(m,n[b]);break}case/ref/.test(i):{const m=function(){this.node.isConnected&&this.fn(this.node)}.bind({node:c,fn:n[b]});u.push(m);break}case/^data-+/.test(i):case/^aria-+/.test(i):{i==="data-input"?V(c,n[b],Symbol("input")):c.setAttribute(i,v(n[b]));break}case/class/.test(i):{n[b]?c.classList.add(...n[b].split(" ")):c.setAttribute("class","");break}case/value/.test(i):{c.nodeName.toLowerCase()==="select"?P(c,n[b]):c.value=v(n[b]);break}case/disabled/.test(i):case/checked/.test(i):{n[b]?c.setAttribute(i,n[b]):c.removeAttribute(i);break}default:c.setAttribute(i,v(n[b]))}c.removeAttribute(f)}}c=d.nextNode()}},T=(a,n)=>{const d=document.createTreeWalker(a,NodeFilter.SHOW_COMMENT,null);let c=d.nextNode(),C;for(;c;){if(C=l.exec(c.data)){const f=Array.isArray(n[C[1]])?n[C[1]]:[n[C[1]]];c.replaceWith(...f),d.currentNode=a}c=d.nextNode()}},R=(a,n)=>{if(!a||!n||a.nodeType!==1||n.nodeType!==1)return;const d=a.attributes,c=n.attributes,C=n.getAttribute("data-preserve-attributes"),f=C&&C==="true";for(const{name:i,value:b}of d)(!c[i]||c[i]!==b)&&n.setAttribute(i,b);if(!f)for(const{name:i}of c)d[i]||n.removeAttribute(i);if(n.tagName.toLowerCase()==="input"&&(n.value=a.value),n.tagName.indexOf("-")>-1&&a.tagName.indexOf("-")>-1){const i=Object.getOwnPropertySymbols(a),b=Object.getOwnPropertySymbols(n),m=i.length?a[i[0]]:"",x=b.length?n[b[0]]:"";m&&x&&m!==x&&V(n,JSON.parse(m),b[0])}},A=a=>a.nodeType===3?"text":a.nodeType===8?"comment":a.tagName.toLowerCase(),L=a=>a.childNodes&&a.childNodes.length>0?null:a.textContent,F=(a,n,d)=>{const c=n?Array.from(n.childNodes):[],C=a?Array.from(a.childNodes):[];let f=c.length-C.length;if(f>0)for(;f>0;f--)c[c.length-f].parentNode.removeChild(c[c.length-f]);C.forEach(function(i,b){const m=c[b];if(R(i,m),d&&m&&m.nodeType===1&&m.tagName.indexOf("-")>-1)return;if(!m){n&&n.appendChild(i);return}if(A(i)!==A(m)){m.replaceWith(i);return}const x=L(i);if(x&&x!==L(m)){m.textContent=x;return}if(m.childNodes.length>0&&i.childNodes.length<1){m.innerHTML="";return}if(m.childNodes.length<1&&i.childNodes.length>0){const D=document.createDocumentFragment();F(i,D,!1),m.appendChild(D);return}if(i.childNodes.length>0){F(i,m,!0);return}})};return{html:(a,...n)=>{let d="";const{length:c}=a;for(let f=1;f<c;f++){const i=n[f-1];let b=!1;if(d+=a[f-1],s.test(d)&&t.test(d)&&(d=d.replace(s,(m,x,D)=>`${e}${f-1}=${D||'"'}${x}${D?"":'"'}`),b=!0),!b)switch(!0){case Array.isArray(i):case i instanceof DocumentFragment:{d+=`<!--${o}${f-1}-->`;break}case(typeof i=="object"&&i!==null):{"html"in i&&(d+=i.html);break}default:d+=i||""}}d+=a[c-1];const C=k(d.trim());return w(C,n),T(C,n),C},render:(a,n)=>{a&&!a.children.length?(a.innerHTML="",a.appendChild(n)):F(n,a,!1),u.forEach(d=>{d()}),u=[],p.forEach(d=>{d()}),p=[]}}})();class z{constructor(t,e){_(this,"_shadowRoot");_(this,"_hostElement");_(this,"update");_(this,"emitEvent");this._hostElement=t,this._shadowRoot=e}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return this._shadowRoot}get hostElement(){return this._hostElement}}const St={selector:"",root:!1,styles:"",deps:[],standalone:!1,encapsulation:"shadowDom"},st=(s,t)=>{const e=document.createElement("style");return e.innerHTML=s,t&&t.appendChild(e),e},Ct=(s,t)=>{var e,r,o,l,u,ot,v,at,k;if(s={...St,...s},s.styles=s.styles.toString(),s.root&&!j.isRootNodeSet)j.isRootNodeSet=!0,s.styles&&(j.globalStyles.replace(s.styles),j.globalStyleTag=st(s.styles,document.head));else if(s.root&&j.isRootNodeSet)throw Error("Cannot register duplicate root component in "+s.selector+" component");window.customElements.define(s.selector,(k=class extends HTMLElement{constructor(){super();M(this,u);M(this,v);M(this,e,void 0);M(this,r,void 0);M(this,o,void 0);_(this,"renderCount",0);M(this,l,new q);if(pt)H(this,r,this.attachShadow({mode:"open"})),y(this,r).adoptedStyleSheets=j.getComputedCss(s.styles,s.standalone);else{H(this,r,this);const w=s.styles.replaceAll(":host",s.selector);H(this,o,st(w,document.head))}Q(this,u,ot).call(this),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this)}static get observedAttributes(){return t.observedAttributes||[]}update(){const w=y(this,e).render();typeof w=="string"?y(this,r).innerHTML=_t(w):et(y(this,r),w)}setProps(w){var T,R;for(const[A,L]of Object.entries(w))t.observedProperties.find(F=>F===A)&&(y(this,e)[A]=L);(R=(T=y(this,e)).onPropertiesChanged)==null||R.call(T)}getInstance(){return y(this,e)}connectedCallback(){var w,T;y(this,l).add(B(this,"bindprops",R=>{const A=R.detail.props;A&&this.setProps(A)})),y(this,l).add(B(this,"refresh_component",()=>{var R,A;(A=(R=y(this,e)).mount)==null||A.call(R)})),y(this,e).beforeMount&&y(this,l).add(ht(this.update,y(this,e).beforeMount.bind(y(this,e)))),this.update(),(T=(w=y(this,e)).mount)==null||T.call(w)}attributeChangedCallback(w,T,R){var A,L;(L=(A=y(this,e)).onAttributesChanged)==null||L.call(A,w,T,R)}disconnectedCallback(){var w,T,R;this.renderCount=1,(T=(w=y(this,e)).unmount)==null||T.call(w),(R=y(this,o))==null||R.remove(),y(this,l).unsubscribe()}},e=new WeakMap,r=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakSet,ot=function(){const w=new z(this,y(this,r));w.update=()=>{this.update()},w.emitEvent=(T,R)=>{Q(this,v,at).call(this,T,R)},H(this,e,tt(vt(this,t),s.deps,w))},v=new WeakSet,at=function(w,T){const R=new CustomEvent(w,{detail:T});this.dispatchEvent(R)},k))},Rt={deps:[]},rt=s=>t=>{if(s.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(s.selector)||Ct(s,t)},Y=(s={})=>t=>{if(s={...Rt,...s},t.prototype.__metadata__={name:"SERVICE"},s.deps.some(r=>r.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const e=tt(t,s.deps);X.register(t,e)},Et=s=>{let t;switch(s.nodeName&&s.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(s.type)?t=s.checked?s.value!==null&&s.value!=="on"?s.value:!0:!1:t=s.value;break}case"select":{const e=s.type==="select-one",o=[...Array.from(s.options)].filter(l=>l.selected).map(l=>l.value??(l.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));t=e?o[0]:o;break}default:{t=s.value;break}}return t};class Tt{constructor(t){_(this,"_initialValues");_(this,"_controls",Object.create(null));_(this,"_errors",new Map);this._initialValues=t;for(const[e,r]of Object.entries(t)){const o=[...Array.isArray(r)?r:[r]];this._controls[e]={value:o[0],validators:o.length>1?o[1]:[]}}this.changeHandler=this.changeHandler.bind(this),this.getControl=this.getControl.bind(this),this.reset=this.reset.bind(this)}get errors(){return this._checkValidity(),this._errors}get valid(){return this._checkValidity(),!this._errors.size}get value(){const t={};for(const[e,r]of Object.entries(this._controls))t[e]=r.value;return t}getControl(t){return this._controls[t]}changeHandler(t){return e=>{const r=Et(e.target);this.getControl(t).value=r,this._isTouched=!0}}reset(){for(const[t,e]of Object.entries(this._initialValues)){const r=[...Array.isArray(e)?e:[e]];this._controls[t].value=JSON.parse(JSON.stringify(r))[0]}this._errors.clear(),this._isTouched=!1}_checkValidity(){this._errors.clear(),this._isTouched=!0;for(const t in this._controls){const e=this._controls[t].value,r=this._controls[t].validators;this._controls[t].errors=null;for(const o of r){const l=o(e);l!==null&&(this._errors.has(t)?(this._errors.set(t,{...this._errors.get(t),...l}),this._controls[t].errors={...this._controls[t].errors,...l}):(this._errors.set(t,l),this._controls[t].errors=l))}}}}class At{static required(t){return t.length?null:{required:!0}}static min(t){return e=>e.length>=t?null:{minLength:{requiredLength:t}}}static max(t){return e=>e.length<=t?null:{maxLength:{requiredLength:t}}}static pattern(t){return e=>new RegExp(t).test(e)?null:{pattern:!0}}}const I=class{static checkParams(t,e){let r=0;const o={},l=e.paramCount;for(let u=0;u<t.length;u++){const p=e.params[u];p.indexOf(":")>=0&&(o[p.split(":")[1]]=t[u].split("?")[0],r+=1)}return r===l?o:{}}static getParamCount(t){let e=0;return t.forEach(r=>{r.indexOf(":")>=0&&(e+=1)}),e}static formatRoute(t){const e={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:t.preload,canActivate:()=>!0};if(e.params=t.path.split("/").filter(r=>r.length>0),e.url=t.path,e.template="",e.redirectTo=t.redirectTo,t.template){if(!t.templatePath)throw Error("templatePath is required in route if template is mentioned.");e.template=t.template,e.templatePath=t.templatePath}t.canActivate&&(e.canActivate=t.canActivate),e.paramCount=I.getParamCount(e.params),I.routeList.push(e)}static preloadRoutes(){for(const t of I.routeList)t.templatePath&&t.templatePath()}static preloadSelectedRoutes(){const t=I.routeList.filter(e=>e.preload===!0);for(const e of t)e.templatePath&&e.templatePath()}};let E=I;_(E,"routeList",[]),_(E,"isHistoryBasedRouting",!0);function Pt(s,t){return s?new RegExp(s.replace(/:[^\s/]+/g,"(.+)")).test(t):!1}class G{constructor(){_(this,"_currentRoute",new $({path:"",routeParams:new Map,queryParams:new Map,state:{}}));_(this,"_template",new $(""));_(this,"_navigationEndEvent",new W);_(this,"_routeStateMap",new Map)}listenRouteChanges(){const t=E.isHistoryBasedRouting?"popstate":"hashchange";return E.isHistoryBasedRouting&&(window.history.replaceState({},null,""),function(e,r){var o=e.pushState;e.pushState=function(...l){o.apply(e,l),r()}}(window.history,this._registerOnHashChange.bind(this))),B(window,t,()=>{this._registerOnHashChange()})}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute.asObservable()}navigateTo(t="/",e){let r=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");r=r||"/",this._routeStateMap.clear(),this._routeStateMap.set(t,e),r===t?this._navigateTo(t,e):E.isHistoryBasedRouting?window.history.pushState(e,"",t):window.location.hash="#"+t}onNavigationEnd(){return this._navigationEndEvent.asObservable()}_registerOnHashChange(){const t=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,""),e=this._routeStateMap.get(t);this._navigateTo(t,e)}_navigateTo(t,e){const r={},o=t.split("/").filter(p=>p.length>0),l=E.routeList.filter(p=>{if(p.params.length===o.length&&Pt(p.url,t))return p;if(p.url===t)return p}),u=l.length>0?l[0]:null;u&&(r.path=t,r.state={...e||{}},J(u.canActivate()).subscribe(p=>{if(!p)return;const v=E.checkParams(o,u);if(Object.keys(v).length>0||t){r.routeParams=new Map(Object.entries(v));let P=[];E.isHistoryBasedRouting?P=new URLSearchParams(window.location.search).entries():P=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[],r.queryParams=new Map(P);const k=V=>{V.isRegistered=!0,this._currentRoute.next(r),this._template.next(V.template),this._navigationEndEvent.next()};u.isRegistered?k(u):u.templatePath?J(u.templatePath()).subscribe(()=>{k(u)}):u.redirectTo&&this.navigateTo(u.redirectTo,e)}else this.navigateTo(u.redirectTo,e)}))}}Y()(G);const Nt=()=>{class s{constructor(e,r){_(this,"_template","");_(this,"_subscriptions",new q)}beforeMount(){this._subscriptions.add(this.internalRouterSrvc.getTemplate().subscribe(e=>{this._template!==e&&(this._template=e)})),this._subscriptions.add(this.internalRouterSrvc.listenRouteChanges())}mount(){const e=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(e||"/")}unmount(){this._subscriptions.unsubscribe()}render(){if(this._template){const e=[`${this._template}`];return e.raw=[`${this._template}`],U(e)}else return U``}}rt({selector:"router-outlet",deps:[G,z]})(s)};class nt{constructor(t){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(t,e){this.internalRouter.navigateTo(t,e)}onNavigationEnd(){return this.internalRouter.onNavigationEnd()}registerRoutes(t,e=!1,r=!1){if(r&&(E.isHistoryBasedRouting=!r),Array.isArray(t)){for(const o of t)E.formatRoute(o);e?E.preloadRoutes():E.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return Y({deps:[G]})(nt),h.BehaviourSubjectObs=$,h.Component=rt,h.FormBuilder=Tt,h.Injectable=Y,h.Renderer=z,h.Router=nt,h.SubjectObs=W,h.Subscriptions=q,h.Validators=At,h.fromEvent=B,h.html=U,h.promisify=wt,h.registerRouterComponent=Nt,h.render=et,h.signal=ut,h.wrapIntoObservable=J,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),h}({});
