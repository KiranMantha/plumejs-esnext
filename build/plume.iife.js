var Ct=Object.defineProperty;var Rt=(h,m,C)=>m in h?Ct(h,m,{enumerable:!0,configurable:!0,writable:!0,value:C}):h[m]=C;var _=(h,m,C)=>(Rt(h,typeof m!="symbol"?m+"":m,C),C),K=(h,m,C)=>{if(!m.has(h))throw TypeError("Cannot "+C)};var S=(h,m,C)=>(K(h,m,"read from private field"),C?C.call(h):m.get(h)),M=(h,m,C)=>{if(m.has(h))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(h):m.set(h,C)},H=(h,m,C,B)=>(K(h,m,"write to private field"),B?B.call(h,C):m.set(h,C),C);var Q=(h,m,C)=>(K(h,m,"access private method"),C);var PlumeJS=function(h){var x,nt;"use strict";const m=new(nt=class{constructor(){M(this,x,void 0);H(this,x,new WeakMap)}register(s,t){if(!S(this,x).get(s))S(this,x).set(s,t);else throw console.error(s),"service already exists"}getService(s){const t=S(this,x).get(s);if(t)return t;throw console.error(s),"service is not a registered service."}clear(){H(this,x,new WeakMap)}},x=new WeakMap,nt),C=s=>!!s&&typeof s.subscribe=="function",B=s=>!!s&&typeof s.then=="function",X=s=>{const t=s.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return t.length===3?t[1].split(",").map(e=>e.trim()):[]},at=(()=>{try{return new CSSStyleSheet,!0}catch{return!1}})(),ct=s=>({subscribe:t=>{t(s)}}),lt=s=>({subscribe:t=>{Promise.resolve(s).then(e=>{t(e)})}});let ut=()=>Math.random().toString(36).substring(2);class W{constructor(){_(this,"_callbackCollection",{})}asObservable(){return{subscribe:t=>this.subscribe(t)}}subscribe(t){const e=ut();return this._callbackCollection[e]=t,()=>this.unsubscribe(e)}unsubscribe(t){delete this._callbackCollection[t]}next(t){for(const e in this._callbackCollection)this._callbackCollection[e](t)}}class $ extends W{constructor(e){super();_(this,"_initialValue");this._initialValue=e}subscribe(e){const r=super.subscribe(e);return super.next(this._initialValue),r}next(e){this._initialValue=e,super.next(e)}}class q{constructor(){_(this,"_subcribers",[])}add(t){this._subcribers.push(t)}unsubscribe(){for(const t of this._subcribers)t();this._subcribers=[]}}const J=s=>C(s)?s:B(s)?lt(Promise.resolve(s)):ct(s),F=(s,t,e,r=!1)=>(s.addEventListener(t,e,r),()=>{s.removeEventListener(t,e,r)}),ht=s=>{const t=()=>new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),e=p=>{const y=p.querySelectorAll("script");for(const A of y)A.remove()},r=(p,y)=>{if(y=y.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(p)&&(y.includes("javascript:")||y.includes("data:"))||p.startsWith("on"))return!0},c=p=>{const y=p.attributes;for(const{name:A,value:k}of y)r(A,k)&&p.removeAttribute(A)},l=p=>{const y=p.children;for(const A of y)c(A),l(A)},u=t();return e(u),l(u),u.innerHTML},dt=function(s){s.renderCount===1&&queueMicrotask(()=>{s.update(),s.renderCount=0})},ft=(s,t)=>{const e=X(t),r=()=>({get(c,l){const u=Object.prototype.toString.call(c[l]);return["[object Object]","[object Array]"].indexOf(u)>-1&&!("__metadata__"in c[l])?new Proxy(c[l],r()):c[l]},set(c,l,u){return c[l]=u,++s.renderCount,dt(s),!0}});return class extends t{constructor(...c){return super(...c),c.forEach((l,u)=>{e[u]&&e[u]!=="undefined"&&(this[e[u]]=l)}),new Proxy(this,r())}}},pt=()=>{let s;return[new Promise(e=>{s=e}),s]},Z=(s,t,e)=>{if(t.length>0){const r=[];for(const u of t)u.prototype.__metadata__.name!=="RENDERER"?r.push(m.getService(u)):r.push(e);const c=X(s),l=new s(...r);return t.forEach((u,p)=>{l[c[p]]=r[p]}),l}else return new s},j=new class{constructor(){_(this,"globalStyles");_(this,"globalStyleTag");_(this,"style_registry");_(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(s=""){let t=[];const e=new CSSStyleSheet;if(e.insertRule(":host { display: block; }"),t=[this.globalStyles,e],s){const r=new CSSStyleSheet;r.replace(s),t.push(r)}return t}},{html:U,render:tt}=(()=>{const s=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,t=/<[a-z][^>]+$/i,e="attr",r=/^attr([^ ]+)/,c="insertNode",l=/^insertNode([^ ]+)/;let u=[],p=[];const y=o=>{const n={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let d=JSON.stringify(o);const a=f=>n[f]||f;return d=(f=>f.replace(/[&<>\(\)]/g,a))(d),JSON.parse(d)},A=(o,n)=>{const d=o.options,a=Array.isArray(n)?n:[n];let w,f,i=d.length;for(;i--;){f=d[i];const b=f.getAttribute("value")??(f.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(f.selected=a.indexOf(b)>-1)&&(w=!0)}w||(o.selectedIndex=-1)},k=o=>{const n=document.createElement("template");return n.innerHTML=o,n.content},V=(o,n,d)=>{const a=()=>{setTimeout(()=>{if(o.isConnected){const w=new CustomEvent("bindprops",{detail:{props:n},bubbles:!1});o.dispatchEvent(w)}})};o[d]=JSON.stringify(n),p.push(a)},v=(o,n)=>{const d=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,null);let a=d.nextNode();for(;a;){if(a.hasAttributes()){const w=Array.from(a.attributes).filter(f=>r.test(f.nodeName));for(const{nodeName:f,nodeValue:i}of w){const b=r.exec(f)[1];switch(!0){case/^on+/.test(i):{const g=i.slice(2).toLowerCase();a.removeEventListener(g,n[b]),a.addEventListener(g,n[b]);break}case/ref/.test(i):{const g=function(){this.node.isConnected&&this.fn(this.node)}.bind({node:a,fn:n[b]});u.push(g);break}case/^data-+/.test(i):case/^aria-+/.test(i):{i==="data-input"?V(a,n[b],Symbol("input")):a.setAttribute(i,y(n[b]));break}case/class/.test(i):{n[b]?a.classList.add(...n[b].split(" ")):a.setAttribute("class","");break}case/value/.test(i):{a.nodeName.toLowerCase()==="select"?A(a,n[b]):a.value=y(n[b]);break}case/disabled/.test(i):case/checked/.test(i):{n[b]?a.setAttribute(i,n[b]):a.removeAttribute(i);break}default:a.setAttribute(i,y(n[b]))}a.removeAttribute(f)}}a=d.nextNode()}},E=(o,n)=>{const d=document.createTreeWalker(o,NodeFilter.SHOW_COMMENT,null);let a=d.nextNode(),w;for(;a;){if(w=l.exec(a.data)){const f=Array.isArray(n[w[1]])?n[w[1]]:[n[w[1]]];a.replaceWith(...f),d.currentNode=o}a=d.nextNode()}},T=(o,n)=>{if(!o||!n||o.nodeType!==1||n.nodeType!==1)return;const d=o.attributes,a=n.attributes,w=n.getAttribute("data-preserve-attributes"),f=w&&w==="true";for(const{name:i,value:b}of d)(!a[i]||a[i]!==b)&&n.setAttribute(i,b);if(!f)for(const{name:i}of a)d[i]||n.removeAttribute(i);if(n.tagName.toLowerCase()==="input"&&(n.value=o.value),n.tagName.indexOf("-")>-1&&o.tagName.indexOf("-")>-1){const i=Object.getOwnPropertySymbols(o),b=Object.getOwnPropertySymbols(n),g=i.length?o[i[0]]:"",L=b.length?n[b[0]]:"";g&&L&&g!==L&&V(n,JSON.parse(g),b[0])}},N=o=>o.nodeType===3?"text":o.nodeType===8?"comment":o.tagName.toLowerCase(),P=o=>o.childNodes&&o.childNodes.length>0?null:o.textContent,O=(o,n,d)=>{const a=n?Array.from(n.childNodes):[],w=o?Array.from(o.childNodes):[];let f=a.length-w.length;if(f>0)for(;f>0;f--)a[a.length-f].parentNode.removeChild(a[a.length-f]);w.forEach(function(i,b){const g=a[b];if(T(i,g),d&&g&&g.nodeType===1&&g.tagName.indexOf("-")>-1)return;if(!g){n&&n.appendChild(i);return}if(N(i)!==N(g)){g.replaceWith(i);return}const L=P(i);if(L&&L!==P(g)){g.textContent=L;return}if(g.childNodes.length>0&&i.childNodes.length<1){g.innerHTML="";return}if(g.childNodes.length<1&&i.childNodes.length>0){const D=document.createDocumentFragment();O(i,D,!1),g.appendChild(D);return}if(i.childNodes.length>0){O(i,g,!0);return}})};return{html:(o,...n)=>{let d="";const{length:a}=o;for(let f=1;f<a;f++){const i=n[f-1];let b=!1;if(d+=o[f-1],s.test(d)&&t.test(d)&&(d=d.replace(s,(g,L,D)=>`${e}${f-1}=${D||'"'}${L}${D?"":'"'}`),b=!0),!b)switch(!0){case Array.isArray(i):case i instanceof DocumentFragment:{d+=`<!--${c}${f-1}-->`;break}case(typeof i=="object"&&i!==null):{"html"in i&&(d+=i.html);break}default:d+=i||""}}d+=o[a-1];const w=k(d.trim());return v(w,n),E(w,n),w},render:(o,n)=>{o&&!o.children.length?(o.innerHTML="",o.appendChild(n)):O(n,o,!1),u.forEach(d=>{d()}),u=[],p.forEach(d=>{d()}),p=[]}}})();class z{constructor(t,e){_(this,"_shadowRoot");_(this,"_hostElement");_(this,"update");_(this,"emitEvent");this._hostElement=t,this._shadowRoot=e}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return this._shadowRoot}get hostElement(){return this._hostElement}}const bt={selector:"",root:!1,styles:"",deps:[],standalone:!1,encapsulation:"shadowDom"},et=(s,t)=>{const e=document.createElement("style");return e.innerHTML=s,t&&t.appendChild(e),e},mt=(s,t)=>{var e,r,c,l,u,it,y,ot,k;if(s={...bt,...s},s.styles=s.styles.toString(),s.root&&!j.isRootNodeSet)j.isRootNodeSet=!0,s.styles&&(j.globalStyles.replace(s.styles),j.globalStyleTag=et(s.styles,document.head));else if(s.root&&j.isRootNodeSet)throw Error("Cannot register duplicate root component in "+s.selector+" component");window.customElements.define(s.selector,(k=class extends HTMLElement{constructor(){super();M(this,u);M(this,y);M(this,e,void 0);M(this,r,void 0);M(this,c,void 0);_(this,"renderCount",0);M(this,l,new q);if(at)H(this,r,this.attachShadow({mode:"open"})),S(this,r).adoptedStyleSheets=j.getComputedCss(s.styles,s.standalone);else{H(this,r,this);const v=s.styles.replaceAll(":host",s.selector);H(this,c,et(v,document.head))}Q(this,u,it).call(this),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this)}static get observedAttributes(){return t.observedAttributes||[]}update(){const v=S(this,e).render();typeof v=="string"?S(this,r).innerHTML=ht(v):tt(S(this,r),v)}setProps(v){var E,T;for(const[N,P]of Object.entries(v))t.observedProperties.find(O=>O===N)&&(S(this,e)[N]=P);(T=(E=S(this,e)).onPropertiesChanged)==null||T.call(E)}getInstance(){return S(this,e)}connectedCallback(){var v,E,T,N;S(this,l).add(F(this,"bindprops",P=>{const O=P.detail.props;O&&this.setProps(O)})),S(this,l).add(F(this,"refresh_component",()=>{var P,O;(O=(P=S(this,e)).mount)==null||O.call(P)})),(E=(v=S(this,e)).beforeMount)==null||E.call(v),this.update(),(N=(T=S(this,e)).mount)==null||N.call(T)}attributeChangedCallback(v,E,T){var N,P;(P=(N=S(this,e)).onAttributesChanged)==null||P.call(N,v,E,T)}disconnectedCallback(){var v,E,T;this.renderCount=1,(E=(v=S(this,e)).unmount)==null||E.call(v),(T=S(this,c))==null||T.remove(),S(this,l).unsubscribe()}},e=new WeakMap,r=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakSet,it=function(){const v=new z(this,S(this,r));v.update=()=>{this.update()},v.emitEvent=(E,T)=>{Q(this,y,ot).call(this,E,T)},H(this,e,Z(ft(this,t),s.deps,v))},y=new WeakSet,ot=function(v,E){const T=new CustomEvent(v,{detail:E});this.dispatchEvent(T)},k))},gt={deps:[]},st=s=>t=>{if(s.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(s.selector)||mt(s,t)},Y=(s={})=>t=>{if(s={...gt,...s},t.prototype.__metadata__={name:"SERVICE"},s.deps.some(r=>r.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const e=Z(t,s.deps);m.register(t,e)},_t=s=>{let t;switch(s.nodeName&&s.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(s.type)?t=s.checked?s.value!==null&&s.value!=="on"?s.value:!0:!1:t=s.value;break}case"select":{const e=s.type==="select-one",c=[...Array.from(s.options)].filter(l=>l.selected).map(l=>l.value??(l.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));t=e?c[0]:c;break}default:{t=s.value;break}}return t};class yt{constructor(t){_(this,"_initialValues");_(this,"_controls",Object.create(null));_(this,"_errors",new Map);this._initialValues=t;for(const[e,r]of Object.entries(t)){const c=[...Array.isArray(r)?r:[r]];this._controls[e]={value:c[0],validators:c.length>1?c[1]:[]}}this.changeHandler=this.changeHandler.bind(this),this.getControl=this.getControl.bind(this),this.reset=this.reset.bind(this)}get errors(){return this._checkValidity(),this._errors}get valid(){return this._checkValidity(),!this._errors.size}get value(){const t={};for(const[e,r]of Object.entries(this._controls))t[e]=r.value;return t}getControl(t){return this._controls[t]}changeHandler(t){return e=>{const r=_t(e.target);this.getControl(t).value=r,this._isTouched=!0}}reset(){for(const[t,e]of Object.entries(this._initialValues)){const r=[...Array.isArray(e)?e:[e]];this._controls[t].value=JSON.parse(JSON.stringify(r))[0]}this._errors.clear(),this._isTouched=!1}_checkValidity(){this._errors.clear(),this._isTouched=!0;for(const t in this._controls){const e=this._controls[t].value,r=this._controls[t].validators;this._controls[t].errors=null;for(const c of r){const l=c(e);l!==null&&(this._errors.has(t)?(this._errors.set(t,{...this._errors.get(t),...l}),this._controls[t].errors={...this._controls[t].errors,...l}):(this._errors.set(t,l),this._controls[t].errors=l))}}}}class vt{static required(t){return t.length?null:{required:!0}}static min(t){return e=>e.length>=t?null:{minLength:{requiredLength:t}}}static max(t){return e=>e.length<=t?null:{maxLength:{requiredLength:t}}}static pattern(t){return e=>new RegExp(t).test(e)?null:{pattern:!0}}}const I=class{static checkParams(t,e){let r=0;const c={},l=e.paramCount;for(let u=0;u<t.length;u++){const p=e.params[u];p.indexOf(":")>=0&&(c[p.split(":")[1]]=t[u].split("?")[0],r+=1)}return r===l?c:{}}static getParamCount(t){let e=0;return t.forEach(r=>{r.indexOf(":")>=0&&(e+=1)}),e}static formatRoute(t){const e={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:t.preload,canActivate:()=>!0};if(e.params=t.path.split("/").filter(r=>r.length>0),e.url=t.path,e.template="",e.redirectTo=t.redirectTo,t.template){if(!t.templatePath)throw Error("templatePath is required in route if template is mentioned.");e.template=t.template,e.templatePath=t.templatePath}t.canActivate&&(e.canActivate=t.canActivate),e.paramCount=I.getParamCount(e.params),I.routeList.push(e)}static preloadRoutes(){for(const t of I.routeList)t.templatePath&&t.templatePath()}static preloadSelectedRoutes(){const t=I.routeList.filter(e=>e.preload===!0);for(const e of t)e.templatePath&&e.templatePath()}};let R=I;_(R,"routeList",[]),_(R,"isHistoryBasedRouting",!0);function wt(s,t){return s?new RegExp(s.replace(/:[^\s/]+/g,"(.+)")).test(t):!1}class G{constructor(){_(this,"_currentRoute",new $({path:"",routeParams:new Map,queryParams:new Map,state:{}}));_(this,"_template",new $(""));_(this,"_navigationEndEvent",new W);_(this,"_routeStateMap",new Map)}listenRouteChanges(){const t=R.isHistoryBasedRouting?"popstate":"hashchange";return R.isHistoryBasedRouting&&(window.history.replaceState({},null,""),function(e,r){var c=e.pushState;e.pushState=function(...l){c.apply(e,l),r()}}(window.history,this._registerOnHashChange.bind(this))),F(window,t,()=>{this._registerOnHashChange()})}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute.asObservable()}navigateTo(t="/",e){let r=R.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");r=r||"/",this._routeStateMap.clear(),this._routeStateMap.set(t,e),r===t?this._navigateTo(t,e):R.isHistoryBasedRouting?window.history.pushState(e,"",t):window.location.hash="#"+t}onNavigationEnd(){return this._navigationEndEvent.asObservable()}_registerOnHashChange(){const t=R.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,""),e=this._routeStateMap.get(t);this._navigateTo(t,e)}_navigateTo(t,e){const r={},c=t.split("/").filter(p=>p.length>0),l=R.routeList.filter(p=>{if(p.params.length===c.length&&wt(p.url,t))return p;if(p.url===t)return p}),u=l.length>0?l[0]:null;u&&(r.path=t,r.state={...e||{}},J(u.canActivate()).subscribe(p=>{if(!p)return;const y=R.checkParams(c,u);if(Object.keys(y).length>0||t){r.routeParams=new Map(Object.entries(y));let A=[];R.isHistoryBasedRouting?A=new URLSearchParams(window.location.search).entries():A=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[],r.queryParams=new Map(A);const k=V=>{V.isRegistered=!0,this._currentRoute.next(r),this._template.next(V.template),this._navigationEndEvent.next()};u.isRegistered?k(u):u.templatePath?J(u.templatePath()).subscribe(()=>{k(u)}):u.redirectTo&&this.navigateTo(u.redirectTo,e)}else this.navigateTo(u.redirectTo,e)}))}}Y()(G);const St=()=>{class s{constructor(e,r){_(this,"_template","");_(this,"_subscriptions",new q)}beforeMount(){this._subscriptions.add(this.internalRouterSrvc.getTemplate().subscribe(e=>{this._template!==e&&(this._template=e)})),this._subscriptions.add(this.internalRouterSrvc.listenRouteChanges())}mount(){const e=R.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(e||"/")}unmount(){this._subscriptions.unsubscribe()}render(){if(this._template){const e=[`${this._template}`];return e.raw=[`${this._template}`],U(e)}else return U``}}st({selector:"router-outlet",deps:[G,z]})(s)};class rt{constructor(t){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(t,e){this.internalRouter.navigateTo(t,e)}onNavigationEnd(){return this.internalRouter.onNavigationEnd()}registerRoutes(t,e=!1,r=!1){if(r&&(R.isHistoryBasedRouting=!r),Array.isArray(t)){for(const c of t)R.formatRoute(c);e?R.preloadRoutes():R.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return Y({deps:[G]})(rt),h.BehaviourSubjectObs=$,h.Component=st,h.FormBuilder=yt,h.Injectable=Y,h.Renderer=z,h.Router=rt,h.SubjectObs=W,h.Subscriptions=q,h.Validators=vt,h.fromEvent=F,h.html=U,h.promisify=pt,h.registerRouterComponent=St,h.render=tt,h.wrapIntoObservable=J,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),h}({});
