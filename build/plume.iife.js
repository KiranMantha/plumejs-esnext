var Ne=Object.defineProperty;var Le=(u,y,S)=>y in u?Ne(u,y,{enumerable:!0,configurable:!0,writable:!0,value:S}):u[y]=S;var P=(u,y,S)=>(Le(u,typeof y!="symbol"?y+"":y,S),S),te=(u,y,S)=>{if(!y.has(u))throw TypeError("Cannot "+S)};var n=(u,y,S)=>(te(u,y,"read from private field"),S?S.call(u):y.get(u)),w=(u,y,S)=>{if(y.has(u))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(u):y.set(u,S)},E=(u,y,S,q)=>(te(u,y,"write to private field"),q?q.call(u,S):y.set(u,S),S);var H=(u,y,S)=>(te(u,y,"access private method"),S);var PlumeJS=function(u){var k,ce,O,C,T,D,he,x,I,W,z,de,J,fe,j,G;"use strict";const y=new(ce=class{constructor(){w(this,k,void 0);E(this,k,new WeakMap)}register(t,e){if(!n(this,k).get(t))n(this,k).set(t,e);else throw console.error(t),"service already exists"}getService(t){const e=n(this,k).get(t);if(e)return e;throw console.error(t),"service is not a registered service."}clear(){E(this,k,new WeakMap)}},k=new WeakMap,ce),S=t=>typeof t=="function",q=t=>{const e=t.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(s=>s.trim()):[]},K=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),se=(t,e,s,r=!1)=>(t.addEventListener(e,s,r),()=>{t.removeEventListener(e,s,r)}),re=(t,e,s)=>{if(e.length>0){const r=[];for(const p of e)p.__metadata__?r.push(s):r.push(y.getService(p));const h=q(t),f=new t(...r);return e.forEach((p,d)=>{f[h[d]]=r[d]}),f}else return new t},_=new class{constructor(){P(this,"globalStyles");P(this,"globalStyleTag");P(this,"style_registry");P(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(t=""){let e=[];const s=new CSSStyleSheet;if(s.insertRule(":host { display: block; }"),e=[this.globalStyles,s],t){const r=new CSSStyleSheet;r.replace(t),e.push(r)}return e}},{html:Q,render:ne}=(()=>{const t=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,s="attr",r=/^attr([^ ]+)/,h="insertNode",f=/^insertNode([^ ]+)/;let p=[];const d=o=>{const i={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let c=JSON.stringify(o);const l=a=>i[a]||a;return c=(a=>a.replace(/[&<>\(\)]/g,l))(c),JSON.parse(c)},v=(o,i)=>{const c=o.options,l=Array.isArray(i)?i:[i];let m,a,g=c.length;for(;g--;){a=c[g];const b=a.getAttribute("value")??(a.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(a.selected=l.indexOf(b)>-1)&&(m=!0)}m||(o.selectedIndex=-1)},A=o=>{const i=document.createElement("template");return i.innerHTML=o,i.content},N=(o,i)=>{const c=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,null);let l=c.nextNode();for(;l;){if(l.hasAttributes()){const m=Array.from(l.attributes).filter(a=>r.test(a.nodeName));for(const{nodeName:a,nodeValue:g}of m){const b=r.exec(a)[1];switch(!0){case/^on+/.test(g):{const R=g.slice(2).toLowerCase();l.removeEventListener(R,i[b]),R!=="bindprops"?l.addEventListener(R,i[b]):l.addEventListener(R,F=>{F.detail.setProps(i[b]())});break}case/ref/.test(g):{const R=(F=>{const U=F;return()=>{U.isConnected&&i[b](U)}})(l);p.push(R);break}case/^data-+/.test(g):case/^aria-+/.test(g):{l.setAttribute(g,d(i[b]));break}case/class/.test(g):{i[b]?l.classList.add(...i[b].split(" ")):l.setAttribute("class","");break}case/value/.test(g):{l.nodeName.toLowerCase()==="select"?v(l,i[b]):l.value=d(i[b]);break}case/disabled/.test(g):case/checked/.test(g):{i[b]?l.setAttribute(g,i[b]):l.removeAttribute(g);break}default:l.setAttribute(g,d(i[b]))}l.removeAttribute(a)}}l=c.nextNode()}},L=(o,i)=>{const c=document.createTreeWalker(o,NodeFilter.SHOW_COMMENT,null);let l=c.nextNode(),m;for(;l;){if(m=f.exec(l.data)){const a=Array.isArray(i[m[1]])?i[m[1]]:[i[m[1]]];l.replaceWith(...a),c.currentNode=o}l=c.nextNode()}},$=(o,i)=>{if(!o||!i||o.nodeType!==1||i.nodeType!==1)return;const c=o.attributes,l=i.attributes;for(const{name:m,value:a}of c)/class/.test(m)?Array.from(o.classList).every(g=>{i.classList.contains(g)||i.classList.add(g)}):(!l[m]||l[m]!==a)&&i.setAttribute(m,a);for(const{name:m}of l)/class/.test(m)?Array.from(i.classList).every(a=>{o.classList.contains(a)||i.classList.remove(a)}):c[m]||i.removeAttribute(m)},B=o=>o.nodeType===3?"text":o.nodeType===8?"comment":o.tagName.toLowerCase(),ue=o=>o.childNodes&&o.childNodes.length>0?null:o.textContent,ee=(o,i)=>{const c=i?Array.from(i.childNodes):[],l=o?Array.from(o.childNodes):[];let m=c.length-l.length;if(m>0)for(;m>0;m--)c[c.length-m].parentNode.removeChild(c[c.length-m]);l.forEach(function(a,g){const b=c[g];if($(a,b),!b){i&&i.appendChild(a);return}if(B(a)!==B(b)){b.replaceWith(a);return}const R=ue(a);if(R&&R!==ue(b)){b.textContent=R;return}if(b.childNodes.length>0&&a.childNodes.length<1){b.innerHTML="";return}if(b.childNodes.length<1&&a.childNodes.length>0){const F=document.createDocumentFragment();ee(a,F),b.appendChild(F);return}if(a.childNodes.length>0){ee(a,b);return}})};return{html:(o,...i)=>{let c="";const{length:l}=o;for(let a=1;a<l;a++){const g=i[a-1];let b=!1;if(c+=o[a-1],t.test(c)&&e.test(c)&&(c=c.replace(t,(R,F,U)=>`${s}${a-1}=${U||'"'}${F}${U?"":'"'}`),b=!0),!b)switch(!0){case Array.isArray(g):case g instanceof DocumentFragment:{c+=`<!--${h}${a-1}-->`;break}case(typeof g=="object"&&g!==null):{"html"in g&&(c+=g.html);break}default:c+=g}}c+=o[l-1];const m=A(c.trim());return N(m,i),L(m,i),m},render:(o,i)=>{o&&!o.children.length?(o.innerHTML="",o.appendChild(i)):ee(i,o),p.forEach(c=>{c()}),p=[]}}})();class X{constructor(){P(this,"shadowRoot");P(this,"update");P(this,"emitEvent")}static get __metadata__(){return{name:"Renderer"}}}const me={selector:"",root:!1,styles:"",deps:[],standalone:!1},ie=(t,e)=>{const s=document.createElement("style");return s.innerHTML=t,e&&e.appendChild(s),s},ge=(t,e)=>{var s,r,h,f;if(!window.customElements.get(t.selector)){if(t={...me,...t},t.styles=t.styles.toString(),t.root&&!_.isRootNodeSet)_.isRootNodeSet=!0,t.styles&&(_.globalStyles.replace(t.styles),_.globalStyleTag=ie(t.styles,document.head));else if(t.root&&_.isRootNodeSet)throw Error("Cannot register duplicate root component in "+t.selector+" component");window.customElements.define(t.selector,(f=class extends HTMLElement{constructor(){super();w(this,s,void 0);w(this,r,void 0);w(this,h,void 0);E(this,r,this.attachShadow({mode:"open"})),K||(n(this,r).adoptedStyleSheets=_.getComputedCss(t.styles,t.standalone)),this.getInstance=this.getInstance.bind(this)}static get observedAttributes(){return e.observedAttributes||[]}emulateComponent(){K&&t.styles&&E(this,h,ie(t.styles))}update(){ne(n(this,r),(()=>n(this,s).render())()),K&&(t.styles&&n(this,r).insertBefore(n(this,h),n(this,r).childNodes[0]),_.globalStyleTag&&!t.standalone&&n(this,r).insertBefore(document.importNode(_.globalStyleTag,!0),n(this,r).childNodes[0]))}emitEvent(d,v){const A=new CustomEvent(d,{detail:v});this.dispatchEvent(A)}setProps(d){var v,A;for(const[N,L]of Object.entries(d))n(this,s)[N]=L;(A=(v=n(this,s)).onPropsChanged)==null||A.call(v),this.update()}getInstance(){return n(this,s)}connectedCallback(){var v,A,N,L;this.emulateComponent();const d=new X;d.shadowRoot=n(this,r),d.update=()=>{this.update()},d.emitEvent=($,B)=>{this.emitEvent($,B)},E(this,s,re(e,t.deps,d)),(A=(v=n(this,s)).beforeMount)==null||A.call(v),this.update(),(L=(N=n(this,s)).mount)==null||L.call(N),this.emitEvent("bindprops",{setProps:$=>{this.setProps($)}},!1)}attributeChangedCallback(d,v,A){var N,L;(L=(N=n(this,s)).onNativeAttributeChanges)==null||L.call(N,d,v,A)}disconnectedCallback(){var d,v;(v=(d=n(this,s)).unmount)==null||v.call(d)}},s=new WeakMap,r=new WeakMap,h=new WeakMap,f))}},be={deps:[]},ae=t=>e=>{ge(t,e)},Y=(t={})=>e=>{t={...be,...t};const s=re(e,t.deps);y.register(e,s)},pe=t=>{let e;switch(t.nodeName&&t.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(t.type)?e=t.checked?t.value!==null&&t.value!=="on"?t.value:!0:!1:e=t.value;break}case"select":{const s=t.type==="select-one",h=[...Array.from(t.options)].filter(f=>f.selected).map(f=>f.value??(f.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));e=s?h[0]:h;break}default:{e=t.value;break}}return e};class ye{constructor(e,s){w(this,D);w(this,O,void 0);w(this,C,void 0);w(this,T,new Map);E(this,O,e),E(this,C,s)}get errors(){return n(this,T)}get valid(){return H(this,D,he).call(this),!n(this,T).size}get value(){const e={};for(const[s,r]of Object.entries(n(this,C)))e[s]=r.value;return e}get(e){return n(this,C)[e]}reset(e={}){for(const s in n(this,C))n(this,C)[s].value=e[s]||n(this,O)[s];n(this,T).clear()}}O=new WeakMap,C=new WeakMap,T=new WeakMap,D=new WeakSet,he=function(){n(this,T).clear();for(const e in n(this,C)){const s=n(this,C)[e].value,r=n(this,C)[e].validators;n(this,C)[e].errors=null;for(const h of r){const f=h(s);f!==null&&(n(this,T).has(e)?(n(this,T).set(e,{...n(this,T).get(e),...f}),n(this,C)[e].errors={...n(this,C)[e].errors,...f}):(n(this,T).set(e,f),n(this,C)[e].errors=f))}}};const ve=t=>{const e={},s={};for(const[p,d]of Object.entries(t)){const v=Array.isArray(d)?d:[d];e[p]={value:v.shift(),validators:v},s[p]=e[p].value}const r=new ye(s,e);return[r,p=>d=>{const v=pe(d.target);r.get(p).value=v},()=>{r.reset()}]},Se=t=>{let e=t;return[e,r=>{let h;S(r)?h=r(e):h=r,Object.assign(e,h)}]};class we{static required(e){return e.length?null:{required:!0}}static min(e){return s=>s.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return s=>s.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return s=>new RegExp(e).test(s)?null:{pattern:!0}}}const Ce=t=>!!t&&typeof t.subscribe=="function",Te=t=>!!t&&typeof t.then=="function",Ae=t=>({subscribe:e=>{e(t)}}),Re=t=>({subscribe:e=>{Promise.resolve(t).then(s=>{e(s)})}});class Ee{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const oe=t=>Ce(t)?t:Te(t)?Re(Promise.resolve(t)):Ae(t),V=class{static checkParams(e,s){let r=0,h={},f=s.ParamCount;for(let d=0;d<e.length;d++){var p=s.Params[d];p.indexOf(":")>=0&&(h[p.split(":")[1]]=e[d].split("?")[0],r+=1)}return r===f?h:{}}static getParamCount(e){let s=0;return e.forEach(r=>{r.indexOf(":")>=0&&(s+=1)}),s}static formatRoute(e){let s={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(s.Params=e.path.split("/").filter(r=>r.length>0),s.Url=e.path,s.Template="",s.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");s.Template=e.template,s.TemplatePath=e.templatePath}e.canActivate&&(s.canActivate=e.canActivate),s.ParamCount=V.getParamCount(s.Params),V.routeList.push(s)}static preloadRoutes(){for(const e of V.routeList)e.TemplatePath&&e.TemplatePath()}};let M=V;P(M,"routeList",[]);class Z{constructor(){w(this,z);w(this,J);w(this,j);w(this,x,{path:"",routeParams:new Map,queryParams:new Map,state:{}});w(this,I,new Ee);w(this,W,void 0)}startHashChange(){E(this,W,se(window,"hashchange",()=>{H(this,z,de).call(this)}))}stopHashChange(){n(this,W).call(this)}getTemplate(){return n(this,I).asObservable()}getCurrentRoute(){return n(this,x)}navigateTo(e="",s){e?(window.location.hash.replace(/^#/,"")===e&&H(this,j,G).call(this,e,s),window.location.hash="#"+e):H(this,j,G).call(this,e,s)}}x=new WeakMap,I=new WeakMap,W=new WeakMap,z=new WeakSet,de=function(){const e=window.location.hash.replace(/^#/,"");H(this,j,G).call(this,e,null)},J=new WeakSet,fe=function(e,s){if(e){let r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return s.match(r)}else return e===s},j=new WeakSet,G=function(e,s){let r=e.split("/").filter(p=>p.length>0),h=M.routeList.filter(p=>{if(p.Params.length===r.length&&H(this,J,fe).call(this,p.Url,e))return p;if(p.Url===e)return p}),f=h.length>0?h[0]:null;f&&(n(this,x).path=e,n(this,x).state={...s||{}},oe(f.canActivate()).subscribe(p=>{if(!p)return;let d=M.checkParams(r,f);if(Object.keys(d).length>0||e){n(this,x).routeParams=new Map(Object.entries(d));const v=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];n(this,x).queryParams=new Map(v),f.IsRegistered?n(this,I).next(f.Template):f.TemplatePath&&oe(f.TemplatePath()).subscribe(()=>{f.IsRegistered=!0,n(this,I).next(f.Template)})}else this.navigateTo(f.redirectTo)}))},Y()(Z);const Pe=()=>{var e,s;class t{constructor(h,f){w(this,e,"");w(this,s,void 0);P(this,"update")}beforeMount(){E(this,s,this.internalRouterSrvc.getTemplate().subscribe(h=>{E(this,e,h),this.renderer.update()})),this.internalRouterSrvc.startHashChange()}mount(){let h=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(h)}unmount(){n(this,s).call(this),this.internalRouterSrvc.stopHashChange()}render(){if(n(this,e)){const h=[`${n(this,e)}`];return h.raw=[`${n(this,e)}`],Q(h)}else return Q``}}e=new WeakMap,s=new WeakMap,ae({selector:"router-outlet",deps:[Z,X]})(t)};class le{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,s){this.internalRouter.navigateTo(e,s)}registerRoutes(e,s=!1){if(Array.isArray(e)){for(let r of e)M.formatRoute(r);s&&M.preloadRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return Y({deps:[Z]})(le),u.Component=ae,u.Injectable=Y,u.Renderer=X,u.Router=le,u.Validators=we,u.fromNativeEvent=se,u.html=Q,u.registerRouterComponent=Pe,u.render=ne,u.useFormFields=ve,u.useState=Se,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),u}({});
