var Re=Object.defineProperty;var Ee=(u,g,S)=>g in u?Re(u,g,{enumerable:!0,configurable:!0,writable:!0,value:S}):u[g]=S;var y=(u,g,S)=>(Ee(u,typeof g!="symbol"?g+"":g,S),S),G=(u,g,S)=>{if(!g.has(u))throw TypeError("Cannot "+S)};var v=(u,g,S)=>(G(u,g,"read from private field"),S?S.call(u):g.get(u)),M=(u,g,S)=>{if(g.has(u))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(u):g.set(u,S)},H=(u,g,S,V)=>(G(u,g,"write to private field"),V?V.call(u,S):g.set(u,S),S);var K=(u,g,S)=>(G(u,g,"access private method"),S);var PlumeJS=function(u){var k,ne;"use strict";const g=new(ne=class{constructor(){M(this,k,void 0);H(this,k,new WeakMap)}register(s,e){if(!v(this,k).get(s))v(this,k).set(s,e);else throw console.error(s),"service already exists"}getService(s){const e=v(this,k).get(s);if(e)return e;throw console.error(s),"service is not a registered service."}clear(){H(this,k,new WeakMap)}},k=new WeakMap,ne),S=s=>!!s&&typeof s.subscribe=="function",V=s=>!!s&&typeof s.then=="function",Q=s=>{const e=s.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(t=>t.trim()):[]},ae=(()=>{try{return new CSSStyleSheet,!0}catch{return!1}})(),ce=s=>({subscribe:e=>{e(s)}}),le=s=>({subscribe:e=>{Promise.resolve(s).then(t=>{e(t)})}});class W{constructor(){y(this,"_callbacks",[])}asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this._callbacks.push(e),this.unsubscribe}unsubscribe(){this._callbacks=[]}next(e){for(const t of this._callbacks)t(e)}}class X extends W{constructor(t){super();y(this,"_initialValue");this._initialValue=t}subscribe(t){const r=super.subscribe(t);return this.next(this._initialValue),r}}class B{constructor(){y(this,"_subcribers",[])}add(e){this._subcribers.push(e)}unsubscribe(){for(const e of this._subcribers)e();this._subcribers=[]}}const $=s=>S(s)?s:V(s)?le(Promise.resolve(s)):ce(s),D=(s,e,t,r=!1)=>(s.addEventListener(e,t,r),()=>{s.removeEventListener(e,t,r)}),ue=s=>{const e=()=>new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),t=p=>{const m=p.querySelectorAll("script");for(const T of m)T.remove()},r=(p,m)=>{if(m=m.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(p)&&(m.includes("javascript:")||m.includes("data:"))||p.startsWith("on"))return!0},h=p=>{const m=p.attributes;for(const{name:T,value:x}of m)r(T,x)&&p.removeAttribute(T)},n=p=>{const m=p.children;for(const T of m)h(T),n(T)},a=e();return t(a),n(a),a.innerHTML},he=function(s){s.renderCount===1&&queueMicrotask(()=>{s.update(),s.renderCount=0})},de=(s,e)=>{const t=Q(e),r=()=>({get(h,n){const a=Object.prototype.toString.call(h[n]);return["[object Object]","[object Array]"].indexOf(a)>-1&&!("__metadata__"in h[n])?new Proxy(h[n],r()):h[n]},set(h,n,a){return h[n]=a,++s.renderCount,he(s),!0}});return class extends e{constructor(...h){return super(...h),h.forEach((n,a)=>{t[a]&&t[a]!=="undefined"&&(this[t[a]]=n)}),new Proxy(this,r())}}},fe=()=>{let s;return[new Promise(t=>{s=t}),s]},Z=(s,e,t)=>{if(e.length>0){const r=[];for(const a of e)a.prototype.__metadata__.name!=="RENDERER"?r.push(g.getService(a)):r.push(t);const h=Q(s),n=new s(...r);return e.forEach((a,p)=>{n[h[p]]=r[p]}),n}else return new s},j=new class{constructor(){y(this,"globalStyles");y(this,"globalStyleTag");y(this,"style_registry");y(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(s=""){let e=[];const t=new CSSStyleSheet;if(t.insertRule(":host { display: block; }"),e=[this.globalStyles,t],s){const r=new CSSStyleSheet;r.replace(s),e.push(r)}return e}},{html:q,render:ee}=(()=>{const s=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,t="attr",r=/^attr([^ ]+)/,h="insertNode",n=/^insertNode([^ ]+)/;let a=[],p=[];const m=l=>{const o={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let d=JSON.stringify(l);const c=f=>o[f]||f;return d=(f=>f.replace(/[&<>\(\)]/g,c))(d),JSON.parse(d)},T=(l,o)=>{const d=l.options,c=Array.isArray(o)?o:[o];let R,f,i=d.length;for(;i--;){f=d[i];const b=f.getAttribute("value")??(f.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(f.selected=c.indexOf(b)>-1)&&(R=!0)}R||(l.selectedIndex=-1)},x=l=>{const o=document.createElement("template");return o.innerHTML=l,o.content},Y=(l,o)=>{const d=function(){if(this.node.isConnected){const c=new CustomEvent("bindprops",{detail:{props:this.input},bubbles:!1});this.node.dispatchEvent(c)}}.bind({node:l,input:o});p.push(d)},w=(l,o)=>{const d=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,null);let c=d.nextNode();for(;c;){if(c.hasAttributes()){const R=Array.from(c.attributes).filter(f=>r.test(f.nodeName));for(const{nodeName:f,nodeValue:i}of R){const b=r.exec(f)[1];switch(!0){case/^on+/.test(i):{const _=i.slice(2).toLowerCase();c.removeEventListener(_,o[b]),c.addEventListener(_,o[b]);break}case/ref/.test(i):{const _=function(){this.node.isConnected&&this.fn(this.node)}.bind({node:c,fn:o[b]});a.push(_);break}case/^data-+/.test(i):case/^aria-+/.test(i):{i==="data-input"?(Y(c,o[b]),c[Symbol("input")]=JSON.stringify(o[b])):c.setAttribute(i,m(o[b]));break}case/class/.test(i):{o[b]?c.classList.add(...o[b].split(" ")):c.setAttribute("class","");break}case/value/.test(i):{c.nodeName.toLowerCase()==="select"?T(c,o[b]):c.value=m(o[b]);break}case/disabled/.test(i):case/checked/.test(i):{o[b]?c.setAttribute(i,o[b]):c.removeAttribute(i);break}default:c.setAttribute(i,m(o[b]))}c.removeAttribute(f)}}c=d.nextNode()}},C=(l,o)=>{const d=document.createTreeWalker(l,NodeFilter.SHOW_COMMENT,null);let c=d.nextNode(),R;for(;c;){if(R=n.exec(c.data)){const f=Array.isArray(o[R[1]])?o[R[1]]:[o[R[1]]];c.replaceWith(...f),d.currentNode=l}c=d.nextNode()}},A=(l,o)=>{if(!l||!o||l.nodeType!==1||o.nodeType!==1)return;const d=l.attributes,c=o.attributes,R=o.getAttribute("data-preserve-attributes"),f=R&&R==="true";for(const{name:i,value:b}of d)(!c[i]||c[i]!==b)&&o.setAttribute(i,b);if(!f)for(const{name:i}of c)d[i]||o.removeAttribute(i);if(o.tagName.indexOf("-")>-1&&l.tagName.indexOf("-")>-1){const i=Object.getOwnPropertySymbols(l),b=Object.getOwnPropertySymbols(o),_=i.length?l[i[0]]:"",L=b.length?o[b[0]]:"";_&&L&&_!==L&&Y(o,JSON.parse(_))}},N=l=>l.nodeType===3?"text":l.nodeType===8?"comment":l.tagName.toLowerCase(),P=l=>l.childNodes&&l.childNodes.length>0?null:l.textContent,O=(l,o,d)=>{const c=o?Array.from(o.childNodes):[],R=l?Array.from(l.childNodes):[];let f=c.length-R.length;if(f>0)for(;f>0;f--)c[c.length-f].parentNode.removeChild(c[c.length-f]);R.forEach(function(i,b){const _=c[b];if(A(i,_),d&&_&&_.nodeType===1&&_.tagName.indexOf("-")>-1)return;if(!_){o&&o.appendChild(i);return}if(N(i)!==N(_)){_.replaceWith(i);return}const L=P(i);if(L&&L!==P(_)){_.textContent=L;return}if(_.childNodes.length>0&&i.childNodes.length<1){_.innerHTML="";return}if(_.childNodes.length<1&&i.childNodes.length>0){const I=document.createDocumentFragment();O(i,I,!1),_.appendChild(I);return}if(i.childNodes.length>0){O(i,_,!0);return}})};return{html:(l,...o)=>{let d="";const{length:c}=l;for(let f=1;f<c;f++){const i=o[f-1];let b=!1;if(d+=l[f-1],s.test(d)&&e.test(d)&&(d=d.replace(s,(_,L,I)=>`${t}${f-1}=${I||'"'}${L}${I?"":'"'}`),b=!0),!b)switch(!0){case Array.isArray(i):case i instanceof DocumentFragment:{d+=`<!--${h}${f-1}-->`;break}case(typeof i=="object"&&i!==null):{"html"in i&&(d+=i.html);break}default:d+=i}}d+=l[c-1];const R=x(d.trim());return w(R,o),C(R,o),R},render:(l,o)=>{l&&!l.children.length?(l.innerHTML="",l.appendChild(o)):O(o,l,!1),a.forEach(d=>{d()}),a=[],p.forEach(d=>{d()}),p=[]}}})();class J{constructor(e,t){y(this,"_shadowRoot");y(this,"_hostElement");y(this,"update");y(this,"emitEvent");this._hostElement=e,this._shadowRoot=t}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return this._shadowRoot}get hostElement(){return this._hostElement}}const pe={selector:"",root:!1,styles:"",deps:[],standalone:!1,encapsulation:"shadowDom"},te=(s,e)=>{const t=document.createElement("style");return t.innerHTML=s,e&&e.appendChild(t),t},me=(s,e)=>{var t,r,h,n,a,oe,m,ie,x;if(s={...pe,...s},s.styles=s.styles.toString(),s.root&&!j.isRootNodeSet)j.isRootNodeSet=!0,s.styles&&(j.globalStyles.replace(s.styles),j.globalStyleTag=te(s.styles,document.head));else if(s.root&&j.isRootNodeSet)throw Error("Cannot register duplicate root component in "+s.selector+" component");window.customElements.define(s.selector,(x=class extends HTMLElement{constructor(){super();M(this,a);M(this,m);M(this,t,void 0);M(this,r,void 0);M(this,h,void 0);y(this,"renderCount",0);M(this,n,new B);if(ae)H(this,r,this.attachShadow({mode:"open"})),v(this,r).adoptedStyleSheets=j.getComputedCss(s.styles,s.standalone);else{H(this,r,this);const w=s.styles.replaceAll(":host",s.selector);H(this,h,te(w,document.head))}K(this,a,oe).call(this),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this)}static get observedAttributes(){return e.observedAttributes||[]}update(){const w=v(this,t).render();typeof w=="string"?v(this,r).innerHTML=ue(w):ee(v(this,r),w)}setProps(w){var C,A;for(const[N,P]of Object.entries(w))e.observedProperties.find(O=>O===N)&&(v(this,t)[N]=P);(A=(C=v(this,t)).onPropertiesChanged)==null||A.call(C)}getInstance(){return v(this,t)}connectedCallback(){var w,C,A,N;v(this,n).add(D(this,"bindprops",P=>{const O=P.detail.props;O&&this.setProps(O)})),v(this,n).add(D(this,"refresh_component",()=>{var P,O;(O=(P=v(this,t)).mount)==null||O.call(P)})),(C=(w=v(this,t)).beforeMount)==null||C.call(w),this.update(),(N=(A=v(this,t)).mount)==null||N.call(A)}attributeChangedCallback(w,C,A){var N,P;(P=(N=v(this,t)).onAttributesChanged)==null||P.call(N,w,C,A)}disconnectedCallback(){var w,C,A;this.renderCount=1,(C=(w=v(this,t)).unmount)==null||C.call(w),(A=v(this,h))==null||A.remove(),v(this,n).unsubscribe()}},t=new WeakMap,r=new WeakMap,h=new WeakMap,n=new WeakMap,a=new WeakSet,oe=function(){const w=new J(this,v(this,r));w.update=()=>{this.update()},w.emitEvent=(C,A)=>{K(this,m,ie).call(this,C,A)},H(this,t,Z(de(this,e),s.deps,w))},m=new WeakSet,ie=function(w,C){const A=new CustomEvent(w,{detail:C});this.dispatchEvent(A)},x))},be={deps:[]},se=s=>e=>{if(s.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(s.selector)||me(s,e)},U=(s={})=>e=>{if(s={...be,...s},e.prototype.__metadata__={name:"SERVICE"},s.deps.some(r=>r.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const t=Z(e,s.deps);g.register(e,t)},ge=s=>{let e;switch(s.nodeName&&s.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(s.type)?e=s.checked?s.value!==null&&s.value!=="on"?s.value:!0:!1:e=s.value;break}case"select":{const t=s.type==="select-one",h=[...Array.from(s.options)].filter(n=>n.selected).map(n=>n.value??(n.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));e=t?h[0]:h;break}default:{e=s.value;break}}return e};class _e{constructor(e,t){y(this,"_initialValues");y(this,"_controls");y(this,"_errors",new Map);this._initialValues=e,this._controls=t}get errors(){return this._errors}get valid(){return this._checkValidity(),!this._errors.size}get value(){const e={};for(const[t,r]of Object.entries(this._controls))e[t]=r.value;return e}get(e){return this._controls[e]}reset(e={}){for(const t in this._controls)this._controls[t].value=e[t]||this._initialValues[t];return this._errors.clear(),this}_checkValidity(){this._errors.clear();for(const e in this._controls){const t=this._controls[e].value,r=this._controls[e].validators;this._controls[e].errors=null;for(const h of r){const n=h(t);n!==null&&(this._errors.has(e)?(this._errors.set(e,{...this._errors.get(e),...n}),this._controls[e].errors={...this._controls[e].errors,...n}):(this._errors.set(e,n),this._controls[e].errors=n))}}}}const ye=s=>{const e={},t={};for(const[a,p]of Object.entries(s)){const m=Array.isArray(p)?p:[p];e[a]={value:m.shift(),validators:m},t[a]=e[a].value}const r=new _e(t,e);return[r,a=>p=>{const m=ge(p.target);r.get(a).value=m},()=>r.reset()]};class we{static required(e){return e.length?null:{required:!0}}static min(e){return t=>t.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return t=>t.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return t=>new RegExp(e).test(t)?null:{pattern:!0}}}const F=class{static checkParams(e,t){let r=0;const h={},n=t.paramCount;for(let a=0;a<e.length;a++){const p=t.params[a];p.indexOf(":")>=0&&(h[p.split(":")[1]]=e[a].split("?")[0],r+=1)}return r===n?h:{}}static getParamCount(e){let t=0;return e.forEach(r=>{r.indexOf(":")>=0&&(t+=1)}),t}static formatRoute(e){const t={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:e.preload,canActivate:()=>!0};if(t.params=e.path.split("/").filter(r=>r.length>0),t.url=e.path,t.template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.template=e.template,t.templatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.paramCount=F.getParamCount(t.params),F.routeList.push(t)}static preloadRoutes(){for(const e of F.routeList)e.templatePath&&e.templatePath()}static preloadSelectedRoutes(){const e=F.routeList.filter(t=>t.preload===!0);for(const t of e)t.templatePath&&t.templatePath()}};let E=F;y(E,"routeList",[]),y(E,"isHistoryBasedRouting",!0);function ve(s,e){return s?new RegExp(s.replace(/:[^\s/]+/g,"(.+)")).test(e):!1}class z{constructor(){y(this,"_currentRoute",{path:"",routeParams:new Map,queryParams:new Map,state:{}});y(this,"_template",new X(""));y(this,"_navigationEndEvent",new W);y(this,"_routeStateMap",new Map)}listenRouteChanges(){const e=E.isHistoryBasedRouting?"popstate":"hashchange";return E.isHistoryBasedRouting&&(window.history.replaceState({},null,""),function(t,r){var h=t.pushState;t.pushState=function(...n){h.apply(t,n),r()}}(window.history,this._registerOnHashChange.bind(this))),D(window,e,()=>{this._registerOnHashChange()})}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute}navigateTo(e="/",t){let r=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");r=r||"/",this._routeStateMap.clear(),this._routeStateMap.set(e,t),r===e?this._navigateTo(e,t):E.isHistoryBasedRouting?window.history.pushState(t,"",e):window.location.hash="#"+e}onNavigationEnd(){return this._navigationEndEvent.asObservable()}_registerOnHashChange(){const e=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,""),t=this._routeStateMap.get(e);this._navigateTo(e,t)}_navigateTo(e,t){const r=e.split("/").filter(a=>a.length>0),h=E.routeList.filter(a=>{if(a.params.length===r.length&&ve(a.url,e))return a;if(a.url===e)return a}),n=h.length>0?h[0]:null;n&&(this._currentRoute.path=e,this._currentRoute.state={...t||{}},$(n.canActivate()).subscribe(a=>{if(!a)return;const p=E.checkParams(r,n);if(Object.keys(p).length>0||e){this._currentRoute.routeParams=new Map(Object.entries(p));let m=[];E.isHistoryBasedRouting?m=new URLSearchParams(window.location.search).entries():m=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[],this._currentRoute.queryParams=new Map(m);const T=x=>{x.isRegistered=!0,this._template.next(x.template),this._navigationEndEvent.next()};n.isRegistered?T(n):n.templatePath?$(n.templatePath()).subscribe(()=>{T(n)}):n.redirectTo&&this.navigateTo(n.redirectTo,t)}else this.navigateTo(n.redirectTo,t)}))}}U()(z);const Se=()=>{class s{constructor(t,r){y(this,"_template","");y(this,"_subscriptions",new B)}beforeMount(){this._subscriptions.add(this.internalRouterSrvc.getTemplate().subscribe(t=>{this._template!==t?this._template=t:this.refreshRouterOutletComponent()})),this._subscriptions.add(this.internalRouterSrvc.listenRouteChanges())}mount(){const t=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(t||"/")}unmount(){this._subscriptions.unsubscribe()}refreshRouterOutletComponent(){if(this.renderer.shadowRoot.children.length){const t=new CustomEvent("refresh_component",{detail:{},bubbles:!1,cancelable:!1,composed:!1});this.renderer.shadowRoot.children[0].dispatchEvent(t)}}render(){if(this._template){const t=[`${this._template}`];return t.raw=[`${this._template}`],q(t)}else return q``}}se({selector:"router-outlet",deps:[z,J]})(s)};class re{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}onNavigationEnd(){return this.internalRouter.onNavigationEnd()}registerRoutes(e,t=!1,r=!1){if(r&&(E.isHistoryBasedRouting=!r),Array.isArray(e)){for(const h of e)E.formatRoute(h);t?E.preloadRoutes():E.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return U({deps:[z]})(re),u.BehaviourSubjectObs=X,u.Component=se,u.Injectable=U,u.Renderer=J,u.Router=re,u.SubjectObs=W,u.Subscriptions=B,u.Validators=we,u.fromEvent=D,u.html=q,u.promisify=fe,u.registerRouterComponent=Se,u.render=ee,u.useFormFields=ye,u.wrapIntoObservable=$,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),u}({});
