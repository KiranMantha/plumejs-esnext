var Ce=Object.defineProperty;var Ee=(c,b,S)=>b in c?Ce(c,b,{enumerable:!0,configurable:!0,writable:!0,value:S}):c[b]=S;var w=(c,b,S)=>(Ee(c,typeof b!="symbol"?b+"":b,S),S),z=(c,b,S)=>{if(!b.has(c))throw TypeError("Cannot "+S)};var v=(c,b,S)=>(z(c,b,"read from private field"),S?S.call(c):b.get(c)),H=(c,b,S)=>{if(b.has(c))throw TypeError("Cannot add the same private member more than once");b instanceof WeakSet?b.add(c):b.set(c,S)},M=(c,b,S,j)=>(z(c,b,"write to private field"),j?j.call(c,S):b.set(c,S),S);var D=(c,b,S)=>(z(c,b,"access private method"),S);var PlumeJS=function(c){var L,te;"use strict";const b=new(te=class{constructor(){H(this,L,void 0);M(this,L,new WeakMap)}register(r,e){if(!v(this,L).get(r))v(this,L).set(r,e);else throw console.error(r),"service already exists"}getService(r){const e=v(this,L).get(r);if(e)return e;throw console.error(r),"service is not a registered service."}clear(){M(this,L,new WeakMap)}},L=new WeakMap,te),S=r=>typeof r=="function",j=r=>{const e=r.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(t=>t.trim()):[]},ne=(()=>{try{return new CSSStyleSheet,!0}catch{return!1}})(),$=(r,e,t,s=!1)=>(r.addEventListener(e,t,s),()=>{r.removeEventListener(e,t,s)}),oe=r=>{const e=()=>new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),t=p=>{const g=p.querySelectorAll("script");for(const N of g)N.remove()},s=(p,g)=>{if(g=g.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(p)&&(g.includes("javascript:")||g.includes("data:"))||p.startsWith("on"))return!0},a=p=>{const g=p.attributes;for(const{name:N,value:F}of g)s(N,F)&&p.removeAttribute(N)},n=p=>{const g=p.children;for(const N of g)a(N),n(N)},o=e();return t(o),n(o),o.innerHTML},ie=function(r){r.renderCount===1&&queueMicrotask(()=>{r.update(),r.renderCount=0})},ae=(r,e)=>{const t=j(e),s=()=>({get(a,n){const o=Object.prototype.toString.call(a[n]);return["[object Object]","[object Array]"].indexOf(o)>-1&&!("__metadata__"in a[n])?new Proxy(a[n],s()):a[n]},set(a,n,o){return a[n]=o,++r.renderCount,ie(r),!0}});return class extends e{constructor(...a){return super(...a),a.forEach((n,o)=>{this[t[o]]=n}),new Proxy(this,s())}}},ce=()=>{let r;return[new Promise(t=>{r=t}),r]},Y=(r,e,t)=>{if(e.length>0){const s=[];for(const o of e)o.prototype.__metadata__.name!=="RENDERER"?s.push(b.getService(o)):s.push(t);const a=j(r),n=new r(...s);return e.forEach((o,p)=>{n[a[p]]=s[p]}),n}else return new r},k=new class{constructor(){w(this,"globalStyles");w(this,"globalStyleTag");w(this,"style_registry");w(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(r=""){let e=[];const t=new CSSStyleSheet;if(t.insertRule(":host { display: block; }"),e=[this.globalStyles,t],r){const s=new CSSStyleSheet;s.replace(r),e.push(s)}return e}},{html:W,render:G}=(()=>{const r=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,t="attr",s=/^attr([^ ]+)/,a="insertNode",n=/^insertNode([^ ]+)/;let o=[];const p=u=>{const i={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let h=JSON.stringify(u);const l=d=>i[d]||d;return h=(d=>d.replace(/[&<>\(\)]/g,l))(h),JSON.parse(h)},g=(u,i)=>{const h=u.options,l=Array.isArray(i)?i:[i];let y,d,f=h.length;for(;f--;){d=h[f];const m=d.getAttribute("value")??(d.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(d.selected=l.indexOf(m)>-1)&&(y=!0)}y||(u.selectedIndex=-1)},N=u=>{const i=document.createElement("template");return i.innerHTML=u,i.content},F=(u,i)=>{const h=document.createTreeWalker(u,NodeFilter.SHOW_ELEMENT,null);let l=h.nextNode();for(;l;){if(l.hasAttributes()){const y=Array.from(l.attributes).filter(d=>s.test(d.nodeName));for(const{nodeName:d,nodeValue:f}of y){const m=s.exec(d)[1];switch(!0){case/^on+/.test(f):{const P=f.slice(2).toLowerCase();l.removeEventListener(P,i[m]),P!=="bindprops"?l.addEventListener(P,i[m]):l.addEventListener(P,x=>{x.detail.setProps(i[m]())});break}case/ref/.test(f):{const P=(x=>{const I=x;return()=>{I.isConnected&&i[m](I)}})(l);o.push(P);break}case/^data-+/.test(f):case/^aria-+/.test(f):{l.setAttribute(f,p(i[m]));break}case/class/.test(f):{i[m]?l.classList.add(...i[m].split(" ")):l.setAttribute("class","");break}case/value/.test(f):{l.nodeName.toLowerCase()==="select"?g(l,i[m]):l.value=p(i[m]);break}case/disabled/.test(f):case/checked/.test(f):{i[m]?l.setAttribute(f,i[m]):l.removeAttribute(f);break}default:l.setAttribute(f,p(i[m]))}l.removeAttribute(d)}}l=h.nextNode()}},re=(u,i)=>{const h=document.createTreeWalker(u,NodeFilter.SHOW_COMMENT,null);let l=h.nextNode(),y;for(;l;){if(y=n.exec(l.data)){const d=Array.isArray(i[y[1]])?i[y[1]]:[i[y[1]]];l.replaceWith(...d),h.currentNode=u}l=h.nextNode()}},_=(u,i)=>{if(!u||!i||u.nodeType!==1||i.nodeType!==1)return;const h=u.attributes,l=i.attributes,y=i.getAttribute("data-preserve-attributes"),d=y&&y==="true";for(const{name:f,value:m}of h)(!l[f]||l[f]!==m)&&i.setAttribute(f,m);if(!d)for(const{name:f}of l)h[f]||i.removeAttribute(f)},C=u=>u.nodeType===3?"text":u.nodeType===8?"comment":u.tagName.toLowerCase(),E=u=>u.childNodes&&u.childNodes.length>0?null:u.textContent,A=(u,i)=>{const h=i?Array.from(i.childNodes):[],l=u?Array.from(u.childNodes):[];let y=h.length-l.length;if(y>0)for(;y>0;y--)h[h.length-y].parentNode.removeChild(h[h.length-y]);l.forEach(function(d,f){const m=h[f];if(_(d,m),!m){i&&i.appendChild(d);return}if(C(d)!==C(m)){m.replaceWith(d);return}const P=E(d);if(P&&P!==E(m)){m.textContent=P;return}if(m.childNodes.length>0&&d.childNodes.length<1){m.innerHTML="";return}if(m.childNodes.length<1&&d.childNodes.length>0){const x=document.createDocumentFragment();A(d,x),m.appendChild(x);return}if(d.childNodes.length>0){A(d,m);return}})};return{html:(u,...i)=>{let h="";const{length:l}=u;for(let d=1;d<l;d++){const f=i[d-1];let m=!1;if(h+=u[d-1],r.test(h)&&e.test(h)&&(h=h.replace(r,(P,x,I)=>`${t}${d-1}=${I||'"'}${x}${I?"":'"'}`),m=!0),!m)switch(!0){case Array.isArray(f):case f instanceof DocumentFragment:{h+=`<!--${a}${d-1}-->`;break}case(typeof f=="object"&&f!==null):{"html"in f&&(h+=f.html);break}default:h+=f}}h+=u[l-1];const y=N(h.trim());return F(y,i),re(y,i),y},render:(u,i)=>{u&&!u.children.length?(u.innerHTML="",u.appendChild(i)):A(i,u),o.forEach(h=>{h()}),o=[]}}})();class q{constructor(e,t){w(this,"_shadowRoot");w(this,"_hostElement");w(this,"update");w(this,"emitEvent");this._hostElement=e,this._shadowRoot=t}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return this._shadowRoot}get hostElement(){return this._hostElement}}const le={selector:"",root:!1,styles:"",deps:[],standalone:!1,encapsulation:"shadowDom"},K=(r,e)=>{const t=document.createElement("style");return t.innerHTML=r,e&&e.appendChild(t),t},ue=(r,e)=>{var t,s,a,n,o,se,g,J,F;if(r={...le,...r},r.styles=r.styles.toString(),r.root&&!k.isRootNodeSet)k.isRootNodeSet=!0,r.styles&&(k.globalStyles.replace(r.styles),k.globalStyleTag=K(r.styles,document.head));else if(r.root&&k.isRootNodeSet)throw Error("Cannot register duplicate root component in "+r.selector+" component");window.customElements.define(r.selector,(F=class extends HTMLElement{constructor(){super();H(this,o);H(this,g);H(this,t,void 0);H(this,s,void 0);H(this,a,void 0);w(this,"renderCount",0);H(this,n,void 0);if(ne)M(this,s,this.attachShadow({mode:"open"})),v(this,s).adoptedStyleSheets=k.getComputedCss(r.styles,r.standalone);else{M(this,s,this);const _=r.styles.replaceAll(":host",r.selector);M(this,a,K(_,document.head))}D(this,o,se).call(this),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this)}static get observedAttributes(){return e.observedAttributes||[]}update(){const _=v(this,t).render();typeof _=="string"?v(this,s).innerHTML=oe(_):G(v(this,s),_)}setProps(_){var C,E;for(const[A,T]of Object.entries(_))e.observedProperties.find(V=>V===A)&&(v(this,t)[A]=T);(E=(C=v(this,t)).onPropertiesChanged)==null||E.call(C)}getInstance(){return v(this,t)}connectedCallback(){var _,C,E,A;(C=(_=v(this,t)).beforeMount)==null||C.call(_),this.update(),(A=(E=v(this,t)).mount)==null||A.call(E),D(this,g,J).call(this,"bindprops",{setProps:T=>{this.setProps(T)}},!1),M(this,n,$(this,"refresh_component",()=>{var T,V;(V=(T=v(this,t)).mount)==null||V.call(T)}))}attributeChangedCallback(_,C,E){var A,T;(T=(A=v(this,t)).onAttributesChanged)==null||T.call(A,_,C,E)}disconnectedCallback(){var _,C,E;this.renderCount=1,(C=(_=v(this,t)).unmount)==null||C.call(_),(E=v(this,a))==null||E.remove(),v(this,n).call(this)}},t=new WeakMap,s=new WeakMap,a=new WeakMap,n=new WeakMap,o=new WeakSet,se=function(){const _=new q(this,v(this,s));_.update=()=>{this.update()},_.emitEvent=(C,E)=>{D(this,g,J).call(this,C,E)},M(this,t,Y(ae(this,e),r.deps,_))},g=new WeakSet,J=function(_,C){const E=new CustomEvent(_,{detail:C});this.dispatchEvent(E)},F))},he={deps:[]},Q=r=>e=>{if(r.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(r.selector)||ue(r,e)},B=(r={})=>e=>{if(r={...he,...r},e.prototype.__metadata__={name:"SERVICE"},r.deps.some(s=>s.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const t=Y(e,r.deps);b.register(e,t)},de=r=>{let e;switch(r.nodeName&&r.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(r.type)?e=r.checked?r.value!==null&&r.value!=="on"?r.value:!0:!1:e=r.value;break}case"select":{const t=r.type==="select-one",a=[...Array.from(r.options)].filter(n=>n.selected).map(n=>n.value??(n.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));e=t?a[0]:a;break}default:{e=r.value;break}}return e};class fe{constructor(e,t){w(this,"_initialValues");w(this,"_controls");w(this,"_errors",new Map);this._initialValues=e,this._controls=t}get errors(){return this._errors}get valid(){return this._checkValidity(),!this._errors.size}get value(){const e={};for(const[t,s]of Object.entries(this._controls))e[t]=s.value;return e}get(e){return this._controls[e]}reset(e={}){for(const t in this._controls)this._controls[t].value=e[t]||this._initialValues[t];return this._errors.clear(),this}_checkValidity(){this._errors.clear();for(const e in this._controls){const t=this._controls[e].value,s=this._controls[e].validators;this._controls[e].errors=null;for(const a of s){const n=a(t);n!==null&&(this._errors.has(e)?(this._errors.set(e,{...this._errors.get(e),...n}),this._controls[e].errors={...this._controls[e].errors,...n}):(this._errors.set(e,n),this._controls[e].errors=n))}}}}const me=r=>{const e={},t={};for(const[o,p]of Object.entries(r)){const g=Array.isArray(p)?p:[p];e[o]={value:g.shift(),validators:g},t[o]=e[o].value}const s=new fe(t,e);return[s,o=>p=>{const g=de(p.target);s.get(o).value=g},()=>s.reset()]},X=r=>{let e=r;return[e,s=>{let a;S(s)?a=s(e):a=s,Object.assign(e,a)}]},pe=()=>{const r=window.location.search,e=Object.fromEntries(new URLSearchParams(r).entries()),[t,s]=X(e);return[t,n=>{const o=Object.fromEntries(n.entries());delete o["[object Object]"],s(o),window.history.pushState(null,"",`${location.pathname}?${new URLSearchParams(o).toString()}`)}]};class ge{static required(e){return e.length?null:{required:!0}}static min(e){return t=>t.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return t=>t.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return t=>new RegExp(e).test(t)?null:{pattern:!0}}}const be=r=>!!r&&typeof r.subscribe=="function",_e=r=>!!r&&typeof r.then=="function",ye=r=>({subscribe:e=>{e(r)}}),we=r=>({subscribe:e=>{Promise.resolve(r).then(t=>{e(t)})}});class Se{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const Z=r=>be(r)?r:_e(r)?we(Promise.resolve(r)):ye(r),O=class{static checkParams(e,t){let s=0;const a={},n=t.paramCount;for(let o=0;o<e.length;o++){const p=t.params[o];p.indexOf(":")>=0&&(a[p.split(":")[1]]=e[o].split("?")[0],s+=1)}return s===n?a:{}}static getParamCount(e){let t=0;return e.forEach(s=>{s.indexOf(":")>=0&&(t+=1)}),t}static formatRoute(e){const t={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:e.preload,canActivate:()=>!0};if(t.params=e.path.split("/").filter(s=>s.length>0),t.url=e.path,t.template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.template=e.template,t.templatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.paramCount=O.getParamCount(t.params),O.routeList.push(t)}static preloadRoutes(){for(const e of O.routeList)e.templatePath&&e.templatePath()}static preloadSelectedRoutes(){const e=O.routeList.filter(t=>t.preload===!0);for(const t of e)t.templatePath&&t.templatePath()}};let R=O;w(R,"routeList",[]),w(R,"isHistoryBasedRouting",!0);function ve(r,e){return r?new RegExp(r.replace(/:[^\s/]+/g,"(.+)")).test(e):!1}class U{constructor(){w(this,"_currentRoute",{path:"",routeParams:new Map,queryParams:new Map,state:{}});w(this,"_template",new Se);w(this,"_unSubscribeHashEvent");w(this,"_routeStateMap",new Map)}startHashChange(){const e=R.isHistoryBasedRouting?"popstate":"hashchange";if(R.isHistoryBasedRouting){window.history.replaceState({},null,"");const t=this;(function(s){var a=s.pushState;s.pushState=function(){a.apply(s,arguments),t._registerOnHashChange()}})(window.history)}this._unSubscribeHashEvent=$(window,e,()=>{this._registerOnHashChange()})}stopHashChange(){this._unSubscribeHashEvent()}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute}navigateTo(e="/",t){let s=R.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");s=s||"/",this._routeStateMap.clear(),this._routeStateMap.set(e,t),s===e?this._navigateTo(e,t):R.isHistoryBasedRouting?window.history.pushState(t,"",e):window.location.hash="#"+e}_registerOnHashChange(){const e=R.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,""),t=this._routeStateMap.get(e);this._navigateTo(e,t)}_navigateTo(e,t){const s=e.split("/").filter(o=>o.length>0),a=R.routeList.filter(o=>{if(o.params.length===s.length&&ve(o.url,e))return o;if(o.url===e)return o}),n=a.length>0?a[0]:null;n&&(this._currentRoute.path=e,this._currentRoute.state={...t||{}},Z(n.canActivate()).subscribe(o=>{if(!o)return;const p=R.checkParams(s,n);if(Object.keys(p).length>0||e){this._currentRoute.routeParams=new Map(Object.entries(p));let g=[];R.isHistoryBasedRouting?g=new URLSearchParams(window.location.search).entries():g=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[],this._currentRoute.queryParams=new Map(g),n.isRegistered?this._template.next(n.template):n.templatePath?Z(n.templatePath()).subscribe(()=>{n.isRegistered=!0,this._template.next(n.template)}):n.redirectTo&&this.navigateTo(n.redirectTo,t)}else this.navigateTo(n.redirectTo,t)}))}}B()(U);const Re=()=>{class r{constructor(t,s){w(this,"_template","");w(this,"_subscriptions")}beforeMount(){this._subscriptions=this.internalRouterSrvc.getTemplate().subscribe(t=>{this._template!==t?this._template=t:this.refreshRouterOutletComponent()}),this.internalRouterSrvc.startHashChange()}mount(){const t=R.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(t||"/")}unmount(){this._subscriptions(),this.internalRouterSrvc.stopHashChange()}refreshRouterOutletComponent(){const t=new CustomEvent("refresh_component",{detail:{},bubbles:!1,cancelable:!1,composed:!1});this.renderer.shadowRoot.children[0].dispatchEvent(t)}render(){if(this._template){const t=[`${this._template}`];return t.raw=[`${this._template}`],W(t)}else return W``}}Q({selector:"router-outlet",deps:[U,q]})(r)};class ee{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}registerRoutes(e,t=!1,s=!1){if(s&&(R.isHistoryBasedRouting=!s),Array.isArray(e)){for(const a of e)R.formatRoute(a);t?R.preloadRoutes():R.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return B({deps:[U]})(ee),c.Component=Q,c.Injectable=B,c.Renderer=q,c.Router=ee,c.Validators=ge,c.fromEvent=$,c.html=W,c.promisify=ce,c.registerRouterComponent=Re,c.render=G,c.useFormFields=me,c.useSearchParams=pe,c.useState=X,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c}({});
