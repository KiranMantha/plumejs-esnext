var Nt=Object.defineProperty;var kt=(h,m,S)=>m in h?Nt(h,m,{enumerable:!0,configurable:!0,writable:!0,value:S}):h[m]=S;var y=(h,m,S)=>(kt(h,typeof m!="symbol"?m+"":m,S),S),K=(h,m,S)=>{if(!m.has(h))throw TypeError("Cannot "+S)};var v=(h,m,S)=>(K(h,m,"read from private field"),S?S.call(h):m.get(h)),M=(h,m,S)=>{if(m.has(h))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(h):m.set(h,S)},H=(h,m,S,N)=>(K(h,m,"write to private field"),N?N.call(h,S):m.set(h,S),S);var Q=(h,m,S)=>(K(h,m,"access private method"),S);var PlumeJS=function(h){var O,it;"use strict";const m=s=>typeof s=="function",S=Object.create(null);let N=null;const ct=(s=>{function t(){return Math.random().toString(36).substring(2)}function e(i,o){const d=N;let b;N=t(),S[N]=i;try{o()}finally{b=N,N=d}return b}function r(i){const o=S[N];let d=i;function b(){return d}return b.set=function(T){m(T)?d=T(d):d=T,queueMicrotask(()=>{o()})},b}function l(i,o){const d=e(i,o);return function(){delete S[d]}}return s.augmentor=l,s.signal=r,s})({}),{augmentor:lt,signal:ut}=ct,X=new(it=class{constructor(){M(this,O,void 0);H(this,O,new WeakMap)}register(s,t){if(!v(this,O).get(s))v(this,O).set(s,t);else throw console.error(s),"service already exists"}getService(s){const t=v(this,O).get(s);if(t)return t;throw console.error(s),"service is not a registered service."}clear(){H(this,O,new WeakMap)}},O=new WeakMap,it),ht=s=>!!s&&typeof s.subscribe=="function",dt=s=>!!s&&typeof s.then=="function",Z=s=>{const t=s.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return t.length===3?t[1].split(",").map(e=>e.trim()):[]},ft=(()=>{try{return new CSSStyleSheet,!0}catch{return!1}})(),pt=s=>({subscribe:t=>{t(s)}}),bt=s=>({subscribe:t=>{Promise.resolve(s).then(e=>{t(e)})}}),gt=()=>Math.random().toString(36).substring(2);class W{constructor(){y(this,"_callbackCollection",{})}unsubscribe(t){delete this._callbackCollection[t]}asObservable(){return{subscribe:t=>this.subscribe(t)}}subscribe(t){const e=gt();return this._callbackCollection[e]=t,()=>this.unsubscribe(e)}next(t){for(const e in this._callbackCollection)this._callbackCollection[e](t)}}class q extends W{constructor(e){super();y(this,"_initialValue");this._initialValue=e}subscribe(e){const r=super.subscribe(e);return super.next(this._initialValue),r}next(e){this._initialValue=e,super.next(e)}}class ${constructor(){y(this,"_subcribers",[])}add(t){this._subcribers.push(t)}unsubscribe(){for(const t of this._subcribers)t();this._subcribers=[]}}const J=s=>ht(s)?s:dt(s)?bt(Promise.resolve(s)):pt(s),B=(s,t,e,r=!1)=>(s.addEventListener(t,e,r),()=>{s.removeEventListener(t,e,r)}),mt=s=>{const t=()=>new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),e=d=>{const b=d.querySelectorAll("script");for(const T of b)T.remove()},r=(d,b)=>{if(b=b.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(d)&&(b.includes("javascript:")||b.includes("data:"))||d.startsWith("on"))return!0},l=d=>{const b=d.attributes;for(const{name:T,value:k}of b)r(T,k)&&d.removeAttribute(T)},i=d=>{const b=d.children;for(const T of b)l(T),i(T)},o=t();return e(o),i(o),o.innerHTML},_t=function(s){s.renderCount===1&&queueMicrotask(()=>{s.update(),s.renderCount=0})},yt=(s,t)=>{const e=Z(t),r=()=>({get(l,i){const o=Object.prototype.toString.call(l[i]);return["[object Object]","[object Array]"].indexOf(o)>-1&&!("__metadata__"in l[i])?new Proxy(l[i],r()):l[i]},set(l,i,o){return l[i]=o,++s.renderCount,_t(s),!0}});return class extends t{constructor(...l){return super(...l),l.forEach((i,o)=>{e[o]&&e[o]!=="undefined"&&(this[e[o]]=i)}),new Proxy(this,r())}}},vt=()=>{let s;return[new Promise(e=>{s=e}),s]},tt=(s,t,e)=>{if(t.length>0){const r=[];for(const o of t)o.prototype.__metadata__.name!=="RENDERER"?r.push(X.getService(o)):r.push(e);const l=Z(s),i=new s(...r);return t.forEach((o,d)=>{i[l[d]]=r[d]}),i}else return new s},j=new class{constructor(){y(this,"globalStyles");y(this,"globalStyleTag");y(this,"style_registry");y(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(s=""){let t=[];const e=new CSSStyleSheet;if(e.insertRule(":host { display: block; }"),t=[this.globalStyles,e],s){const r=new CSSStyleSheet;r.replace(s),t.push(r)}return t}},{html:U,render:et}=(()=>{const s=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,t=/<[a-z][^>]+$/i,e="attr",r=/^attr([^ ]+)/,l="insertNode",i=/^insertNode([^ ]+)/;let o=[],d=[];const b=c=>{const n={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let f=JSON.stringify(c);const u=p=>n[p]||p;return f=(p=>p.replace(/[&<>\(\)]/g,u))(f),JSON.parse(f)},T=(c,n)=>{const f=c.options,u=Array.isArray(n)?n:[n];let C,p,a=f.length;for(;a--;){p=f[a];const g=p.getAttribute("value")??(p.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(p.selected=u.indexOf(g)>-1)&&(C=!0)}C||(c.selectedIndex=-1)},k=c=>{const n=document.createElement("template");return n.innerHTML=c,n.content},V=(c,n,f)=>{const u=()=>{setTimeout(()=>{if(c.isConnected){const C=new CustomEvent("bindprops",{detail:{props:n},bubbles:!1});c.dispatchEvent(C)}})};c[f]=JSON.stringify(n),d.push(u)},w=(c,n)=>{const f=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,null);let u=f.nextNode();for(;u;){if(u.hasAttributes()){const C=Array.from(u.attributes).filter(p=>r.test(p.nodeName));for(const{nodeName:p,nodeValue:a}of C){const g=r.exec(p)[1];switch(!0){case/^on+/.test(a):{const _=a.slice(2).toLowerCase();u.removeEventListener(_,n[g]),u.addEventListener(_,n[g]);break}case/ref/.test(a):{const _=function(){this.node.isConnected&&this.fn(this.node)}.bind({node:u,fn:n[g]});o.push(_);break}case/^data-+/.test(a):case/^aria-+/.test(a):{a==="data-input"?V(u,n[g],Symbol("input")):u.setAttribute(a,b(n[g]));break}case/class/.test(a):{n[g]?u.classList.add(...n[g].split(" ")):u.setAttribute("class","");break}case/value/.test(a):{u.nodeName.toLowerCase()==="select"?T(u,n[g]):u.value=b(n[g]);break}case/disabled/.test(a):case/checked/.test(a):{n[g]?u.setAttribute(a,n[g]):u.removeAttribute(a);break}default:u.setAttribute(a,b(n[g]))}u.removeAttribute(p)}}u=f.nextNode()}},A=(c,n)=>{const f=document.createTreeWalker(c,NodeFilter.SHOW_COMMENT,null);let u=f.nextNode(),C;for(;u;){if(C=i.exec(u.data)){const p=Array.isArray(n[C[1]])?n[C[1]]:[n[C[1]]];u.replaceWith(...p),f.currentNode=c}u=f.nextNode()}},R=(c,n)=>{if(!c||!n||c.nodeType!==1||n.nodeType!==1)return;const f=c.attributes,u=n.attributes,C=n.getAttribute("data-preserve-attributes"),p=C&&C==="true";for(const{name:a,value:g}of f)(!u[a]||u[a]!==g)&&n.setAttribute(a,g);if(!p)for(const{name:a}of u)f[a]||n.removeAttribute(a);if(n.tagName.toLowerCase()==="input"&&(n.value=c.value),n.tagName.indexOf("-")>-1&&c.tagName.indexOf("-")>-1){const a=Object.getOwnPropertySymbols(c),g=Object.getOwnPropertySymbols(n),_=a.length?c[a[0]]:"",x=g.length?n[g[0]]:"";_&&x&&_!==x&&V(n,JSON.parse(_),g[0])}},P=c=>c.nodeType===3?"text":c.nodeType===8?"comment":c.tagName.toLowerCase(),L=c=>c.childNodes&&c.childNodes.length>0?null:c.textContent,F=(c,n,f)=>{const u=n?Array.from(n.childNodes):[],C=c?Array.from(c.childNodes):[];let p=u.length-C.length;if(p>0)for(;p>0;p--)u[u.length-p].parentNode.removeChild(u[u.length-p]);C.forEach(function(a,g){const _=u[g];if(R(a,_),f&&_&&_.nodeType===1&&_.tagName.indexOf("-")>-1)return;if(!_){n&&n.appendChild(a);return}if(P(a)!==P(_)){_.replaceWith(a);return}const x=L(a);if(x&&x!==L(_)){_.textContent=x;return}if(_.childNodes.length>0&&a.childNodes.length<1){_.innerHTML="";return}if(_.childNodes.length<1&&a.childNodes.length>0){const D=document.createDocumentFragment();F(a,D,!1),_.appendChild(D);return}if(a.childNodes.length>0){F(a,_,!0);return}})};return{html:(c,...n)=>{let f="";const{length:u}=c;for(let p=1;p<u;p++){const a=n[p-1];let g=!1;if(f+=c[p-1],s.test(f)&&t.test(f)&&(f=f.replace(s,(_,x,D)=>`${e}${p-1}=${D||'"'}${x}${D?"":'"'}`),g=!0),!g)switch(!0){case Array.isArray(a):case a instanceof DocumentFragment:{f+=`<!--${l}${p-1}-->`;break}case(typeof a=="object"&&a!==null):{"html"in a&&(f+=a.html);break}default:f+=a||""}}f+=c[u-1];const C=k(f.trim());return w(C,n),A(C,n),C},render:(c,n)=>{c&&!c.children.length?(c.innerHTML="",c.appendChild(n)):F(n,c,!1),o.forEach(f=>{f()}),o=[],d.forEach(f=>{f()}),d=[]}}})();class z{constructor(t,e){y(this,"_shadowRoot");y(this,"_hostElement");y(this,"update");y(this,"emitEvent");this._hostElement=t,this._shadowRoot=e}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return this._shadowRoot}get hostElement(){return this._hostElement}}const wt={selector:"",root:!1,styles:"",deps:[],standalone:!1,encapsulation:"shadowDom"},st=(s,t)=>{const e=document.createElement("style");return e.innerHTML=s,t&&t.appendChild(e),e},St=(s,t)=>{var e,r,l,i,o,ot,b,at,k;if(s={...wt,...s},s.styles=s.styles.toString(),s.root&&!j.isRootNodeSet)j.isRootNodeSet=!0,s.styles&&(j.globalStyles.replace(s.styles),j.globalStyleTag=st(s.styles,document.head));else if(s.root&&j.isRootNodeSet)throw Error("Cannot register duplicate root component in "+s.selector+" component");window.customElements.define(s.selector,(k=class extends HTMLElement{constructor(){super();M(this,o);M(this,b);M(this,e,void 0);M(this,r,void 0);M(this,l,void 0);y(this,"renderCount",0);M(this,i,new $);if(ft)H(this,r,this.attachShadow({mode:"open"})),v(this,r).adoptedStyleSheets=j.getComputedCss(s.styles,s.standalone);else{H(this,r,this);const w=s.styles.replaceAll(":host",s.selector);H(this,l,st(w,document.head))}Q(this,o,ot).call(this),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this)}static get observedAttributes(){return t.observedAttributes||[]}update(){const w=v(this,e).render();typeof w=="string"?v(this,r).innerHTML=mt(w):et(v(this,r),w)}setProps(w){var A,R;for(const[P,L]of Object.entries(w))t.observedProperties.find(F=>F===P)&&(v(this,e)[P]=L);(R=(A=v(this,e)).onPropertiesChanged)==null||R.call(A)}getInstance(){return v(this,e)}connectedCallback(){var w,A;v(this,i).add(B(this,"bindprops",R=>{const P=R.detail.props;P&&this.setProps(P)})),v(this,i).add(B(this,"refresh_component",()=>{var R,P;(P=(R=v(this,e)).mount)==null||P.call(R)})),v(this,e).beforeMount&&v(this,i).add(lt(this.update,v(this,e).beforeMount.bind(v(this,e)))),this.update(),(A=(w=v(this,e)).mount)==null||A.call(w)}attributeChangedCallback(w,A,R){var P,L;(L=(P=v(this,e)).onAttributesChanged)==null||L.call(P,w,A,R)}disconnectedCallback(){var w,A,R;this.renderCount=1,(A=(w=v(this,e)).unmount)==null||A.call(w),(R=v(this,l))==null||R.remove(),v(this,i).unsubscribe()}},e=new WeakMap,r=new WeakMap,l=new WeakMap,i=new WeakMap,o=new WeakSet,ot=function(){const w=new z(this,v(this,r));w.update=()=>{this.update()},w.emitEvent=(A,R)=>{Q(this,b,at).call(this,A,R)},H(this,e,tt(yt(this,t),s.deps,w))},b=new WeakSet,at=function(w,A){const R=new CustomEvent(w,{detail:A});this.dispatchEvent(R)},k))},Ct={deps:[]},rt=s=>t=>{if(s.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(s.selector)||St(s,t)},Y=(s={})=>t=>{if(s={...Ct,...s},t.prototype.__metadata__={name:"SERVICE"},s.deps.some(r=>r.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const e=tt(t,s.deps);X.register(t,e)},Rt=s=>{let t;switch(s.nodeName&&s.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(s.type)?t=s.checked?s.value!==null&&s.value!=="on"?s.value:!0:!1:t=s.value;break}case"select":{const e=s.type==="select-one",l=[...Array.from(s.options)].filter(i=>i.selected).map(i=>i.value??(i.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));t=e?l[0]:l;break}default:{t=s.value;break}}return t};class Et{constructor(t){y(this,"_initialValues");y(this,"_controls",Object.create(null));y(this,"_errors",new Map);this._initialValues=t;for(const[e,r]of Object.entries(t)){const l=[...Array.isArray(r)?r:[r]];this._controls[e]={value:l[0],validators:l.length>1?l[1]:[]}}this.changeHandler=this.changeHandler.bind(this),this.getControl=this.getControl.bind(this),this.reset=this.reset.bind(this)}get errors(){return this._checkValidity(),this._errors}get valid(){return this._checkValidity(),!this._errors.size}get value(){const t={};for(const[e,r]of Object.entries(this._controls))t[e]=r.value;return t}getControl(t){return this._controls[t]}changeHandler(t){return e=>{const r=Rt(e.target);this.getControl(t).value=r,this._isTouched=!0}}reset(){for(const[t,e]of Object.entries(this._initialValues)){const r=[...Array.isArray(e)?e:[e]];this._controls[t].value=JSON.parse(JSON.stringify(r))[0]}this._errors.clear(),this._isTouched=!1}_checkValidity(){this._errors.clear(),this._isTouched=!0;for(const t in this._controls){const e=this._controls[t].value,r=this._controls[t].validators;this._controls[t].errors=null;for(const l of r){const i=l(e);i!==null&&(this._errors.has(t)?(this._errors.set(t,{...this._errors.get(t),...i}),this._controls[t].errors={...this._controls[t].errors,...i}):(this._errors.set(t,i),this._controls[t].errors=i))}}}}class Tt{static required(t){return t.length?null:{required:!0}}static min(t){return e=>e.length>=t?null:{minLength:{requiredLength:t}}}static max(t){return e=>e.length<=t?null:{maxLength:{requiredLength:t}}}static pattern(t){return e=>new RegExp(t).test(e)?null:{pattern:!0}}}const I=class{static checkParams(t,e){let r=0;const l={},i=e.paramCount;for(let o=0;o<t.length;o++){const d=e.params[o];d.indexOf(":")>=0&&(l[d.split(":")[1]]=t[o].split("?")[0],r+=1)}return r===i?l:{}}static getParamCount(t){let e=0;return t.forEach(r=>{r.indexOf(":")>=0&&(e+=1)}),e}static formatRoute(t){const e={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:t.preload,canActivate:()=>!0};if(e.params=t.path.split("/").filter(r=>r.length>0),e.url=t.path,e.template="",e.redirectTo=t.redirectTo,t.template){if(!t.templatePath)throw Error("templatePath is required in route if template is mentioned.");e.template=t.template,e.templatePath=t.templatePath}t.canActivate&&(e.canActivate=t.canActivate),e.paramCount=I.getParamCount(e.params),I.routeList.push(e)}static preloadRoutes(){for(const t of I.routeList)t.templatePath&&t.templatePath()}static preloadSelectedRoutes(){const t=I.routeList.filter(e=>e.preload===!0);for(const e of t)e.templatePath&&e.templatePath()}};let E=I;y(E,"routeList",[]),y(E,"isHistoryBasedRouting",!0);function At(s,t){return s?new RegExp(s.replace(/:[^\s/]+/g,"(.+)")).test(t):!1}class G{constructor(){y(this,"_currentRoute",new q({path:"",routeParams:new Map,queryParams:new Map,state:{}}));y(this,"_template",new q(""));y(this,"_navigationEndEvent",new W);y(this,"_routeStateMap",new Map)}listenRouteChanges(){const t=E.isHistoryBasedRouting?"popstate":"hashchange";return E.isHistoryBasedRouting&&(window.history.replaceState({},null,""),function(e,r){var l=e.pushState;e.pushState=function(...i){l.apply(e,i),r()}}(window.history,this._registerOnHashChange.bind(this))),B(window,t,()=>{this._registerOnHashChange()})}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute.asObservable()}navigateTo(t="/",e){let r=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");r=r||"/",this._routeStateMap.clear(),this._routeStateMap.set(t,e),r===t?this._navigateTo(t,e):E.isHistoryBasedRouting?window.history.pushState(e,"",t):window.location.hash="#"+t}onNavigationEnd(){return this._navigationEndEvent.asObservable()}_registerOnHashChange(){const t=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,""),e=this._routeStateMap.get(t);this._navigateTo(t,e)}_navigateTo(t,e){const r={},l=t.split("/").filter(d=>d.length>0),i=E.routeList.filter(d=>{if(d.params.length===l.length&&At(d.url,t))return d;if(d.url===t)return d}),o=i.length>0?i[0]:null;o&&(r.path=t,r.state={...e||{}},J(o.canActivate()).subscribe(d=>{if(!d)return;const b=E.checkParams(l,o);if(Object.keys(b).length>0||t){r.routeParams=new Map(Object.entries(b));let T=[];E.isHistoryBasedRouting?T=new URLSearchParams(window.location.search).entries():T=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[],r.queryParams=new Map(T);const k=V=>{V.isRegistered=!0,this._currentRoute.next(r),this._template.next(V.template),this._navigationEndEvent.next()};o.isRegistered?k(o):o.templatePath?J(o.templatePath()).subscribe(()=>{k(o)}):o.redirectTo&&this.navigateTo(o.redirectTo,e)}else this.navigateTo(o.redirectTo,e)}))}}Y()(G);const Pt=()=>{class s{constructor(e,r){y(this,"_template","");y(this,"_subscriptions",new $)}beforeMount(){this._subscriptions.add(this.internalRouterSrvc.getTemplate().subscribe(e=>{this._template!==e&&(this._template=e)})),this._subscriptions.add(this.internalRouterSrvc.listenRouteChanges())}mount(){const e=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(e||"/")}unmount(){this._subscriptions.unsubscribe()}render(){if(this._template){const e=[`${this._template}`];return e.raw=[`${this._template}`],U(e)}else return U``}}rt({selector:"router-outlet",deps:[G,z]})(s)};class nt{constructor(t){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(t,e){this.internalRouter.navigateTo(t,e)}onNavigationEnd(){return this.internalRouter.onNavigationEnd()}registerRoutes(t,e=!1,r=!1){if(r&&(E.isHistoryBasedRouting=!r),Array.isArray(t)){for(const l of t)E.formatRoute(l);e?E.preloadRoutes():E.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return Y({deps:[G]})(nt),h.BehaviourSubjectObs=q,h.Component=rt,h.FormBuilder=Et,h.Injectable=Y,h.Renderer=z,h.Router=nt,h.SubjectObs=W,h.Subscriptions=$,h.Validators=Tt,h.fromEvent=B,h.html=U,h.promisify=vt,h.registerRouterComponent=Pt,h.render=et,h.signal=ut,h.wrapIntoObservable=J,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),h}({});
