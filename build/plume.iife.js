var ve=Object.defineProperty;var we=(u,b,y)=>b in u?ve(u,b,{enumerable:!0,configurable:!0,writable:!0,value:y}):u[b]=y;var v=(u,b,y)=>(we(u,typeof b!="symbol"?b+"":b,y),y),q=(u,b,y)=>{if(!b.has(u))throw TypeError("Cannot "+y)};var C=(u,b,y)=>(q(u,b,"read from private field"),y?y.call(u):b.get(u)),M=(u,b,y)=>{if(b.has(u))throw TypeError("Cannot add the same private member more than once");b instanceof WeakSet?b.add(u):b.set(u,y)},k=(u,b,y,O)=>(q(u,b,"write to private field"),O?O.call(u,y):b.set(u,y),y);var V=(u,b,y)=>(q(u,b,"access private method"),y);var PlumeJS=function(u){var x,Z;"use strict";const b=new(Z=class{constructor(){M(this,x,void 0);k(this,x,new WeakMap)}register(r,e){if(!C(this,x).get(r))C(this,x).set(r,e);else throw console.error(r),"service already exists"}getService(r){const e=C(this,x).get(r);if(e)return e;throw console.error(r),"service is not a registered service."}clear(){k(this,x,new WeakMap)}},x=new WeakMap,Z),y=r=>typeof r=="function",O=r=>{const e=r.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(t=>t.trim()):[]},re=(()=>{try{return new CSSStyleSheet,!0}catch{return!1}})(),U=(r,e,t,s=!1)=>(r.addEventListener(e,t,s),()=>{r.removeEventListener(e,t,s)}),se=r=>{const e=()=>new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),t=f=>{const S=f.querySelectorAll("script");for(const E of S)E.remove()},s=(f,S)=>{if(S=S.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(f)&&(S.includes("javascript:")||S.includes("data:"))||f.startsWith("on"))return!0},a=f=>{const S=f.attributes;for(const{name:E,value:I}of S)s(E,I)&&f.removeAttribute(E)},n=f=>{const S=f.children;for(const E of S)a(E),n(E)},i=e();return t(i),n(i),i.innerHTML},ne=function(r){r.renderCount===1&&queueMicrotask(()=>{r.update(),r.renderCount=0})},oe=(r,e)=>{const t=O(e),s=()=>({get(a,n){const i=Object.prototype.toString.call(a[n]);return["[object Object]","[object Array]"].indexOf(i)>-1&&!("__metadata__"in a[n])?new Proxy(a[n],s()):a[n]},set(a,n,i){return a[n]=i,++r.renderCount,ne(r),!0}});return class extends e{constructor(...a){return super(...a),a.forEach((n,i)=>{this[t[i]]=n}),new Proxy(this,s())}}},ie=()=>{let r;return[new Promise(t=>{r=t}),r]},J=(r,e,t)=>{if(e.length>0){const s=[];for(const i of e)i.prototype.__metadata__.name!=="RENDERER"?s.push(b.getService(i)):s.push(t);const a=O(r),n=new r(...s);return e.forEach((i,f)=>{n[a[f]]=s[f]}),n}else return new r},H=new class{constructor(){v(this,"globalStyles");v(this,"globalStyleTag");v(this,"style_registry");v(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(r=""){let e=[];const t=new CSSStyleSheet;if(t.insertRule(":host { display: block; }"),e=[this.globalStyles,t],r){const s=new CSSStyleSheet;s.replace(r),e.push(s)}return e}},{html:D,render:Y}=(()=>{const r=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,t="attr",s=/^attr([^ ]+)/,a="insertNode",n=/^insertNode([^ ]+)/;let i=[];const f=h=>{const o={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let d=JSON.stringify(h);const c=l=>o[l]||l;return d=(l=>l.replace(/[&<>\(\)]/g,c))(d),JSON.parse(d)},S=(h,o)=>{const d=h.options,c=Array.isArray(o)?o:[o];let p,l,g=d.length;for(;g--;){l=d[g];const m=l.getAttribute("value")??(l.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(l.selected=c.indexOf(m)>-1)&&(p=!0)}p||(h.selectedIndex=-1)},E=h=>{const o=document.createElement("template");return o.innerHTML=h,o.content},I=(h,o)=>{const d=document.createTreeWalker(h,NodeFilter.SHOW_ELEMENT,null);let c=d.nextNode();for(;c;){if(c.hasAttributes()){const p=Array.from(c.attributes).filter(l=>s.test(l.nodeName));for(const{nodeName:l,nodeValue:g}of p){const m=s.exec(l)[1];switch(!0){case/^on+/.test(g):{const A=g.slice(2).toLowerCase();c.removeEventListener(A,o[m]),A!=="bindprops"?c.addEventListener(A,o[m]):c.addEventListener(A,L=>{L.detail.setProps(o[m]())});break}case/ref/.test(g):{const A=(L=>{const j=L;return()=>{j.isConnected&&o[m](j)}})(c);i.push(A);break}case/^data-+/.test(g):case/^aria-+/.test(g):{c.setAttribute(g,f(o[m]));break}case/class/.test(g):{o[m]?c.classList.add(...o[m].split(" ")):c.setAttribute("class","");break}case/value/.test(g):{c.nodeName.toLowerCase()==="select"?S(c,o[m]):c.value=f(o[m]);break}case/disabled/.test(g):case/checked/.test(g):{o[m]?c.setAttribute(g,o[m]):c.removeAttribute(g);break}default:c.setAttribute(g,f(o[m]))}c.removeAttribute(l)}}c=d.nextNode()}},_=(h,o)=>{const d=document.createTreeWalker(h,NodeFilter.SHOW_COMMENT,null);let c=d.nextNode(),p;for(;c;){if(p=n.exec(c.data)){const l=Array.isArray(o[p[1]])?o[p[1]]:[o[p[1]]];c.replaceWith(...l),d.currentNode=h}c=d.nextNode()}},w=(h,o)=>{if(!h||!o||h.nodeType!==1||o.nodeType!==1)return;const d=h.attributes,c=o.attributes;for(const{name:p,value:l}of d)(!c[p]||c[p]!==l)&&o.setAttribute(p,l);for(const{name:p}of c)d[p]||o.removeAttribute(p)},R=h=>h.nodeType===3?"text":h.nodeType===8?"comment":h.tagName.toLowerCase(),T=h=>h.childNodes&&h.childNodes.length>0?null:h.textContent,P=(h,o)=>{const d=o?Array.from(o.childNodes):[],c=h?Array.from(h.childNodes):[];let p=d.length-c.length;if(p>0)for(;p>0;p--)d[d.length-p].parentNode.removeChild(d[d.length-p]);c.forEach(function(l,g){const m=d[g];if(w(l,m),!m){o&&o.appendChild(l);return}if(R(l)!==R(m)){m.replaceWith(l);return}const A=T(l);if(A&&A!==T(m)){m.textContent=A;return}if(m.childNodes.length>0&&l.childNodes.length<1){m.innerHTML="";return}if(m.childNodes.length<1&&l.childNodes.length>0){const L=document.createDocumentFragment();P(l,L),m.appendChild(L);return}if(l.childNodes.length>0){P(l,m);return}})};return{html:(h,...o)=>{let d="";const{length:c}=h;for(let l=1;l<c;l++){const g=o[l-1];let m=!1;if(d+=h[l-1],r.test(d)&&e.test(d)&&(d=d.replace(r,(A,L,j)=>`${t}${l-1}=${j||'"'}${L}${j?"":'"'}`),m=!0),!m)switch(!0){case Array.isArray(g):case g instanceof DocumentFragment:{d+=`<!--${a}${l-1}-->`;break}case(typeof g=="object"&&g!==null):{"html"in g&&(d+=g.html);break}default:d+=g}}d+=h[c-1];const p=E(d.trim());return I(p,o),_(p,o),p},render:(h,o)=>{h&&!h.children.length?(h.innerHTML="",h.appendChild(o)):P(o,h),i.forEach(d=>{d()}),i=[]}}})();class B{constructor(e,t){v(this,"_shadowRoot");v(this,"_hostElement");v(this,"update");v(this,"emitEvent");this._hostElement=e,this._shadowRoot=t}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return this._shadowRoot}get hostElement(){return this._hostElement}}const ae={selector:"",root:!1,styles:"",deps:[],standalone:!1},G=(r,e)=>{const t=document.createElement("style");return t.innerHTML=r,e&&e.appendChild(t),t},ce=(r,e)=>{var t,s,a,n,te,f,z,E;if(r={...ae,...r},r.styles=r.styles.toString(),r.root&&!H.isRootNodeSet)H.isRootNodeSet=!0,r.styles&&(H.globalStyles.replace(r.styles),H.globalStyleTag=G(r.styles,document.head));else if(r.root&&H.isRootNodeSet)throw Error("Cannot register duplicate root component in "+r.selector+" component");window.customElements.define(r.selector,(E=class extends HTMLElement{constructor(){super();M(this,n);M(this,f);M(this,t,void 0);M(this,s,void 0);M(this,a,void 0);v(this,"renderCount",0);re?(k(this,s,this.attachShadow({mode:"open"})),C(this,s).adoptedStyleSheets=H.getComputedCss(r.styles,r.standalone)):(k(this,s,this),k(this,a,G(r.styles||"",document.head))),V(this,n,te).call(this),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this)}static get observedAttributes(){return e.observedAttributes||[]}update(){const _=C(this,t).render();typeof _=="string"?C(this,s).innerHTML=se(_):Y(C(this,s),_)}setProps(_){var w,R;for(const[T,P]of Object.entries(_))e.observedProperties.find(ee=>ee===T)&&(C(this,t)[T]=P);(R=(w=C(this,t)).onPropertiesChanged)==null||R.call(w)}getInstance(){return C(this,t)}connectedCallback(){var _,w,R,T;(w=(_=C(this,t)).beforeMount)==null||w.call(_),this.update(),(T=(R=C(this,t)).mount)==null||T.call(R),V(this,f,z).call(this,"bindprops",{setProps:P=>{this.setProps(P)}},!1)}attributeChangedCallback(_,w,R){var T,P;(P=(T=C(this,t)).onAttributesChanged)==null||P.call(T,_,w,R)}disconnectedCallback(){var _,w;this.renderCount=1,(w=(_=C(this,t)).unmount)==null||w.call(_)}},t=new WeakMap,s=new WeakMap,a=new WeakMap,n=new WeakSet,te=function(){const _=new B(this,C(this,s));_.update=()=>{this.update()},_.emitEvent=(w,R)=>{V(this,f,z).call(this,w,R)},k(this,t,J(oe(this,e),r.deps,_))},f=new WeakSet,z=function(_,w){const R=new CustomEvent(_,{detail:w});this.dispatchEvent(R)},E))},le={deps:[]},K=r=>e=>{if(r.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(r.selector)||ce(r,e)},W=(r={})=>e=>{if(r={...le,...r},e.prototype.__metadata__={name:"SERVICE"},r.deps.some(s=>s.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const t=J(e,r.deps);b.register(e,t)},ue=r=>{let e;switch(r.nodeName&&r.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(r.type)?e=r.checked?r.value!==null&&r.value!=="on"?r.value:!0:!1:e=r.value;break}case"select":{const t=r.type==="select-one",a=[...Array.from(r.options)].filter(n=>n.selected).map(n=>n.value??(n.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));e=t?a[0]:a;break}default:{e=r.value;break}}return e};class he{constructor(e,t){v(this,"_initialValues");v(this,"_controls");v(this,"_errors",new Map);this._initialValues=e,this._controls=t}get errors(){return this._errors}get valid(){return this._checkValidity(),!this._errors.size}get value(){const e={};for(const[t,s]of Object.entries(this._controls))e[t]=s.value;return e}get(e){return this._controls[e]}reset(e={}){for(const t in this._controls)this._controls[t].value=e[t]||this._initialValues[t];return this._errors.clear(),this}_checkValidity(){this._errors.clear();for(const e in this._controls){const t=this._controls[e].value,s=this._controls[e].validators;this._controls[e].errors=null;for(const a of s){const n=a(t);n!==null&&(this._errors.has(e)?(this._errors.set(e,{...this._errors.get(e),...n}),this._controls[e].errors={...this._controls[e].errors,...n}):(this._errors.set(e,n),this._controls[e].errors=n))}}}}const de=r=>{const e={},t={};for(const[i,f]of Object.entries(r)){const S=Array.isArray(f)?f:[f];e[i]={value:S.shift(),validators:S},t[i]=e[i].value}const s=new he(t,e);return[s,i=>f=>{const S=ue(f.target);s.get(i).value=S},()=>s.reset()]},fe=r=>{let e=r;return[e,s=>{let a;y(s)?a=s(e):a=s,Object.assign(e,a)}]};class me{static required(e){return e.length?null:{required:!0}}static min(e){return t=>t.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return t=>t.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return t=>new RegExp(e).test(t)?null:{pattern:!0}}}const pe=r=>!!r&&typeof r.subscribe=="function",ge=r=>!!r&&typeof r.then=="function",be=r=>({subscribe:e=>{e(r)}}),_e=r=>({subscribe:e=>{Promise.resolve(r).then(t=>{e(t)})}});class ye{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const Q=r=>pe(r)?r:ge(r)?_e(Promise.resolve(r)):be(r),F=class{static checkParams(e,t){let s=0;const a={},n=t.paramCount;for(let i=0;i<e.length;i++){const f=t.params[i];f.indexOf(":")>=0&&(a[f.split(":")[1]]=e[i].split("?")[0],s+=1)}return s===n?a:{}}static getParamCount(e){let t=0;return e.forEach(s=>{s.indexOf(":")>=0&&(t+=1)}),t}static formatRoute(e){const t={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:e.preload,canActivate:()=>!0};if(t.params=e.path.split("/").filter(s=>s.length>0),t.url=e.path,t.template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.template=e.template,t.templatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.paramCount=F.getParamCount(t.params),F.routeList.push(t)}static preloadRoutes(){for(const e of F.routeList)e.templatePath&&e.templatePath()}static preloadSelectedRoutes(){const e=F.routeList.filter(t=>t.preload===!0);for(const t of e)t.templatePath&&t.templatePath()}};let N=F;v(N,"routeList",[]);class ${constructor(){v(this,"_currentRoute",{path:"",routeParams:new Map,queryParams:new Map,state:{}});v(this,"_template",new ye);v(this,"_unSubscribeHashEvent");v(this,"_routeStateMap",new Map)}startHashChange(){this._unSubscribeHashEvent=U(window,"hashchange",()=>{this._registerOnHashChange()})}stopHashChange(){this._unSubscribeHashEvent()}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute}navigateTo(e="",t){this._routeStateMap.clear(),e?(window.location.hash.replace(/^#/,"")===e&&this._navigateTo(e,t),this._routeStateMap.set(e,t),window.location.hash="#"+e):this._navigateTo(e,t)}_registerOnHashChange(){const e=window.location.hash.replace(/^#/,""),t=this._routeStateMap.get(e);this._navigateTo(e,t)}_routeMatcher(e,t){if(e){const s=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return t.match(s)}else return e===t}_navigateTo(e,t){const s=e.split("/").filter(i=>i.length>0),a=N.routeList.filter(i=>{if(i.params.length===s.length&&this._routeMatcher(i.url,e))return i;if(i.url===e)return i}),n=a.length>0?a[0]:null;n&&(this._currentRoute.path=e,this._currentRoute.state={...t||{}},Q(n.canActivate()).subscribe(i=>{if(!i)return;const f=N.checkParams(s,n);if(Object.keys(f).length>0||e){this._currentRoute.routeParams=new Map(Object.entries(f));const S=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];this._currentRoute.queryParams=new Map(S),n.isRegistered?this._template.next(n.template):n.templatePath&&Q(n.templatePath()).subscribe(()=>{n.isRegistered=!0,this._template.next(n.template)})}else this.navigateTo(n.redirectTo,t)}))}}W()($);const Se=()=>{class r{constructor(t){v(this,"_template","");v(this,"_subscriptions")}beforeMount(){this._subscriptions=this.internalRouterSrvc.getTemplate().subscribe(t=>{this._template=t}),this.internalRouterSrvc.startHashChange()}mount(){let t=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(t)}unmount(){this._subscriptions(),this.internalRouterSrvc.stopHashChange()}render(){if(this._template){const t=[`${this._template}`];return t.raw=[`${this._template}`],D(t)}else return D``}}K({selector:"router-outlet",deps:[$]})(r)};class X{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}registerRoutes(e,t=!1){if(Array.isArray(e)){for(const s of e)N.formatRoute(s);t?N.preloadRoutes():N.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return W({deps:[$]})(X),u.Component=K,u.Injectable=W,u.Renderer=B,u.Router=X,u.Validators=me,u.fromEvent=U,u.html=D,u.promisify=ie,u.registerRouterComponent=Se,u.render=Y,u.useFormFields=de,u.useState=fe,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),u}({});
