var Ae=Object.defineProperty;var Pe=(l,b,v)=>b in l?Ae(l,b,{enumerable:!0,configurable:!0,writable:!0,value:v}):l[b]=v;var g=(l,b,v)=>(Pe(l,typeof b!="symbol"?b+"":b,v),v),G=(l,b,v)=>{if(!b.has(l))throw TypeError("Cannot "+v)};var R=(l,b,v)=>(G(l,b,"read from private field"),v?v.call(l):b.get(l)),M=(l,b,v)=>{if(b.has(l))throw TypeError("Cannot add the same private member more than once");b instanceof WeakSet?b.add(l):b.set(l,v)},H=(l,b,v,I)=>(G(l,b,"write to private field"),I?I.call(l,v):b.set(l,v),v);var D=(l,b,v)=>(G(l,b,"access private method"),v);var PlumeJS=function(l){var O,oe;"use strict";const b=new(oe=class{constructor(){M(this,O,void 0);H(this,O,new WeakMap)}register(r,e){if(!R(this,O).get(r))R(this,O).set(r,e);else throw console.error(r),"service already exists"}getService(r){const e=R(this,O).get(r);if(e)return e;throw console.error(r),"service is not a registered service."}clear(){H(this,O,new WeakMap)}},O=new WeakMap,oe),v=r=>typeof r=="function",I=r=>!!r&&typeof r.subscribe=="function",ce=r=>!!r&&typeof r.then=="function",Q=r=>{const e=r.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(t=>t.trim()):[]},le=(()=>{try{return new CSSStyleSheet,!0}catch{return!1}})(),ue=r=>({subscribe:e=>{e(r)}}),he=r=>({subscribe:e=>{Promise.resolve(r).then(t=>{e(t)})}});class ${constructor(){g(this,"_callbacks",[])}asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this._callbacks.push(e),this.unsubscribe}unsubscribe(){this._callbacks=[]}next(e){for(const t of this._callbacks)t(e)}}class X extends ${constructor(t){super();g(this,"_initialValue");this._initialValue=t}subscribe(t){const s=super.subscribe(t);return this.next(this._initialValue),s}}class W{constructor(){g(this,"_subcribers",[])}add(e){this._subcribers.push(e)}unsubscribe(){for(const e of this._subcribers)e();this._subcribers=[]}}const B=r=>I(r)?r:ce(r)?he(Promise.resolve(r)):ue(r),q=(r,e,t,s=!1)=>(r.addEventListener(e,t,s),()=>{r.removeEventListener(e,t,s)}),de=r=>{const e=()=>new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),t=m=>{const p=m.querySelectorAll("script");for(const P of p)P.remove()},s=(m,p)=>{if(p=p.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(m)&&(p.includes("javascript:")||p.includes("data:"))||m.startsWith("on"))return!0},a=m=>{const p=m.attributes;for(const{name:P,value:L}of p)s(P,L)&&m.removeAttribute(P)},n=m=>{const p=m.children;for(const P of p)a(P),n(P)},o=e();return t(o),n(o),o.innerHTML},fe=function(r){r.renderCount===1&&queueMicrotask(()=>{r.update(),r.renderCount=0})},me=(r,e)=>{const t=Q(e),s=()=>({get(a,n){const o=Object.prototype.toString.call(a[n]);return["[object Object]","[object Array]"].indexOf(o)>-1&&!("__metadata__"in a[n])?new Proxy(a[n],s()):a[n]},set(a,n,o){return a[n]=o,++r.renderCount,fe(r),!0}});return class extends e{constructor(...a){return super(...a),a.forEach((n,o)=>{t[o]&&t[o]!=="undefined"&&(this[t[o]]=n)}),new Proxy(this,s())}}},pe=()=>{let r;return[new Promise(t=>{r=t}),r]},Z=(r,e,t)=>{if(e.length>0){const s=[];for(const o of e)o.prototype.__metadata__.name!=="RENDERER"?s.push(b.getService(o)):s.push(t);const a=Q(r),n=new r(...s);return e.forEach((o,m)=>{n[a[m]]=s[m]}),n}else return new r},j=new class{constructor(){g(this,"globalStyles");g(this,"globalStyleTag");g(this,"style_registry");g(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(r=""){let e=[];const t=new CSSStyleSheet;if(t.insertRule(":host { display: block; }"),e=[this.globalStyles,t],r){const s=new CSSStyleSheet;s.replace(r),e.push(s)}return e}},{html:U,render:ee}=(()=>{const r=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,t="attr",s=/^attr([^ ]+)/,a="insertNode",n=/^insertNode([^ ]+)/;let o=[];const m=h=>{const i={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let d=JSON.stringify(h);const u=f=>i[f]||f;return d=(f=>f.replace(/[&<>\(\)]/g,u))(d),JSON.parse(d)},p=(h,i)=>{const d=h.options,u=Array.isArray(i)?i:[i];let S,f,c=d.length;for(;c--;){f=d[c];const y=f.getAttribute("value")??(f.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(f.selected=u.indexOf(y)>-1)&&(S=!0)}S||(h.selectedIndex=-1)},P=h=>{const i=document.createElement("template");return i.innerHTML=h,i.content},L=(h,i)=>{const d=document.createTreeWalker(h,NodeFilter.SHOW_ELEMENT,null);let u=d.nextNode();for(;u;){if(u.hasAttributes()){const S=Array.from(u.attributes).filter(f=>s.test(f.nodeName));for(const{nodeName:f,nodeValue:c}of S){const y=s.exec(f)[1];switch(!0){case/^on+/.test(c):{const w=c.slice(2).toLowerCase();u.removeEventListener(w,i[y]),w!=="bindprops"?u.addEventListener(w,i[y]):u.addEventListener(w,k=>{k.detail.setProps(i[y]())});break}case/ref/.test(c):{const w=(k=>{const x=k;return()=>{x.isConnected&&i[y](x)}})(u);o.push(w);break}case/^data-+/.test(c):case/^aria-+/.test(c):{u.setAttribute(c,m(i[y]));break}case/class/.test(c):{i[y]?u.classList.add(...i[y].split(" ")):u.setAttribute("class","");break}case/value/.test(c):{u.nodeName.toLowerCase()==="select"?p(u,i[y]):u.value=m(i[y]);break}case/disabled/.test(c):case/checked/.test(c):{i[y]?u.setAttribute(c,i[y]):u.removeAttribute(c);break}default:u.setAttribute(c,m(i[y]))}u.removeAttribute(f)}}u=d.nextNode()}},ie=(h,i)=>{const d=document.createTreeWalker(h,NodeFilter.SHOW_COMMENT,null);let u=d.nextNode(),S;for(;u;){if(S=n.exec(u.data)){const f=Array.isArray(i[S[1]])?i[S[1]]:[i[S[1]]];u.replaceWith(...f),d.currentNode=h}u=d.nextNode()}},_=(h,i)=>{if(!h||!i||h.nodeType!==1||i.nodeType!==1)return;const d=h.attributes,u=i.attributes,S=i.getAttribute("data-preserve-attributes"),f=S&&S==="true";for(const{name:c,value:y}of d)(!u[c]||u[c]!==y)&&i.setAttribute(c,y);if(!f)for(const{name:c}of u)d[c]||i.removeAttribute(c)},C=h=>h.nodeType===3?"text":h.nodeType===8?"comment":h.tagName.toLowerCase(),A=h=>h.childNodes&&h.childNodes.length>0?null:h.textContent,T=(h,i,d)=>{const u=i?Array.from(i.childNodes):[],S=h?Array.from(h.childNodes):[];let f=u.length-S.length;if(f>0)for(;f>0;f--)u[u.length-f].parentNode.removeChild(u[u.length-f]);S.forEach(function(c,y){const w=u[y];if(d&&w&&w.nodeType===1&&w.tagName.indexOf("-")>-1)return;if(_(c,w),!w){i&&i.appendChild(c);return}if(C(c)!==C(w)){w.replaceWith(c);return}const k=A(c);if(k&&k!==A(w)){w.textContent=k;return}if(w.childNodes.length>0&&c.childNodes.length<1){w.innerHTML="";return}if(w.childNodes.length<1&&c.childNodes.length>0){const x=document.createDocumentFragment();T(c,x,!1),w.appendChild(x);return}if(c.childNodes.length>0){T(c,w,!0);return}})};return{html:(h,...i)=>{let d="";const{length:u}=h;for(let f=1;f<u;f++){const c=i[f-1];let y=!1;if(d+=h[f-1],r.test(d)&&e.test(d)&&(d=d.replace(r,(w,k,x)=>`${t}${f-1}=${x||'"'}${k}${x?"":'"'}`),y=!0),!y)switch(!0){case Array.isArray(c):case c instanceof DocumentFragment:{d+=`<!--${a}${f-1}-->`;break}case(typeof c=="object"&&c!==null):{"html"in c&&(d+=c.html);break}default:d+=c}}d+=h[u-1];const S=P(d.trim());return L(S,i),ie(S,i),S},render:(h,i)=>{h&&!h.children.length?(h.innerHTML="",h.appendChild(i)):T(i,h,!1),o.forEach(d=>{d()}),o=[]}}})();class z{constructor(e,t){g(this,"_shadowRoot");g(this,"_hostElement");g(this,"update");g(this,"emitEvent");this._hostElement=e,this._shadowRoot=t}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return this._shadowRoot}get hostElement(){return this._hostElement}}const be={selector:"",root:!1,styles:"",deps:[],standalone:!1,encapsulation:"shadowDom"},te=(r,e)=>{const t=document.createElement("style");return t.innerHTML=r,e&&e.appendChild(t),t},ge=(r,e)=>{var t,s,a,n,o,ae,p,K,L;if(r={...be,...r},r.styles=r.styles.toString(),r.root&&!j.isRootNodeSet)j.isRootNodeSet=!0,r.styles&&(j.globalStyles.replace(r.styles),j.globalStyleTag=te(r.styles,document.head));else if(r.root&&j.isRootNodeSet)throw Error("Cannot register duplicate root component in "+r.selector+" component");window.customElements.define(r.selector,(L=class extends HTMLElement{constructor(){super();M(this,o);M(this,p);M(this,t,void 0);M(this,s,void 0);M(this,a,void 0);g(this,"renderCount",0);M(this,n,new W);if(le)H(this,s,this.attachShadow({mode:"open"})),R(this,s).adoptedStyleSheets=j.getComputedCss(r.styles,r.standalone);else{H(this,s,this);const _=r.styles.replaceAll(":host",r.selector);H(this,a,te(_,document.head))}D(this,o,ae).call(this),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this)}static get observedAttributes(){return e.observedAttributes||[]}update(){const _=R(this,t).render();typeof _=="string"?R(this,s).innerHTML=de(_):ee(R(this,s),_)}setProps(_){var C,A;for(const[T,N]of Object.entries(_))e.observedProperties.find(V=>V===T)&&(R(this,t)[T]=N);(A=(C=R(this,t)).onPropertiesChanged)==null||A.call(C)}getInstance(){return R(this,t)}connectedCallback(){var _,C,A,T;(C=(_=R(this,t)).beforeMount)==null||C.call(_),this.update(),(T=(A=R(this,t)).mount)==null||T.call(A),D(this,p,K).call(this,"bindprops",{setProps:N=>{this.setProps(N)}},!1),R(this,n).add(q(this,"refresh_component",()=>{var N,V;(V=(N=R(this,t)).mount)==null||V.call(N)}))}attributeChangedCallback(_,C,A){var T,N;(N=(T=R(this,t)).onAttributesChanged)==null||N.call(T,_,C,A)}disconnectedCallback(){var _,C,A;this.renderCount=1,(C=(_=R(this,t)).unmount)==null||C.call(_),(A=R(this,a))==null||A.remove(),R(this,n).unsubscribe()}},t=new WeakMap,s=new WeakMap,a=new WeakMap,n=new WeakMap,o=new WeakSet,ae=function(){const _=new z(this,R(this,s));_.update=()=>{this.update()},_.emitEvent=(C,A)=>{D(this,p,K).call(this,C,A)},H(this,t,Z(me(this,e),r.deps,_))},p=new WeakSet,K=function(_,C){const A=new CustomEvent(_,{detail:C});this.dispatchEvent(A)},L))},_e={deps:[]},re=r=>e=>{if(r.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(r.selector)||ge(r,e)},J=(r={})=>e=>{if(r={..._e,...r},e.prototype.__metadata__={name:"SERVICE"},r.deps.some(s=>s.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const t=Z(e,r.deps);b.register(e,t)},ye=r=>{let e;switch(r.nodeName&&r.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(r.type)?e=r.checked?r.value!==null&&r.value!=="on"?r.value:!0:!1:e=r.value;break}case"select":{const t=r.type==="select-one",a=[...Array.from(r.options)].filter(n=>n.selected).map(n=>n.value??(n.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));e=t?a[0]:a;break}default:{e=r.value;break}}return e};class we{constructor(e,t){g(this,"_initialValues");g(this,"_controls");g(this,"_errors",new Map);this._initialValues=e,this._controls=t}get errors(){return this._errors}get valid(){return this._checkValidity(),!this._errors.size}get value(){const e={};for(const[t,s]of Object.entries(this._controls))e[t]=s.value;return e}get(e){return this._controls[e]}reset(e={}){for(const t in this._controls)this._controls[t].value=e[t]||this._initialValues[t];return this._errors.clear(),this}_checkValidity(){this._errors.clear();for(const e in this._controls){const t=this._controls[e].value,s=this._controls[e].validators;this._controls[e].errors=null;for(const a of s){const n=a(t);n!==null&&(this._errors.has(e)?(this._errors.set(e,{...this._errors.get(e),...n}),this._controls[e].errors={...this._controls[e].errors,...n}):(this._errors.set(e,n),this._controls[e].errors=n))}}}}const ve=r=>{const e={},t={};for(const[o,m]of Object.entries(r)){const p=Array.isArray(m)?m:[m];e[o]={value:p.shift(),validators:p},t[o]=e[o].value}const s=new we(t,e);return[s,o=>m=>{const p=ye(m.target);s.get(o).value=p},()=>s.reset()]},se=r=>{let e=r;return[e,s=>{let a;v(s)?a=s(e):a=s,Object.assign(e,a)}]},Se=()=>{const r=window.location.search,e=Object.fromEntries(new URLSearchParams(r).entries()),[t,s]=se(e);return[t,n=>{const o=Object.fromEntries(n.entries());delete o["[object Object]"],s(o),window.history.pushState(null,"",`${location.pathname}?${new URLSearchParams(o).toString()}`)}]};class Re{static required(e){return e.length?null:{required:!0}}static min(e){return t=>t.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return t=>t.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return t=>new RegExp(e).test(t)?null:{pattern:!0}}}const F=class{static checkParams(e,t){let s=0;const a={},n=t.paramCount;for(let o=0;o<e.length;o++){const m=t.params[o];m.indexOf(":")>=0&&(a[m.split(":")[1]]=e[o].split("?")[0],s+=1)}return s===n?a:{}}static getParamCount(e){let t=0;return e.forEach(s=>{s.indexOf(":")>=0&&(t+=1)}),t}static formatRoute(e){const t={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:e.preload,canActivate:()=>!0};if(t.params=e.path.split("/").filter(s=>s.length>0),t.url=e.path,t.template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.template=e.template,t.templatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.paramCount=F.getParamCount(t.params),F.routeList.push(t)}static preloadRoutes(){for(const e of F.routeList)e.templatePath&&e.templatePath()}static preloadSelectedRoutes(){const e=F.routeList.filter(t=>t.preload===!0);for(const t of e)t.templatePath&&t.templatePath()}};let E=F;g(E,"routeList",[]),g(E,"isHistoryBasedRouting",!0);function Ee(r,e){return r?new RegExp(r.replace(/:[^\s/]+/g,"(.+)")).test(e):!1}class Y{constructor(){g(this,"_currentRoute",{path:"",routeParams:new Map,queryParams:new Map,state:{}});g(this,"_template",new X(""));g(this,"_navigationEndEvent",new $);g(this,"_routeStateMap",new Map)}listenRouteChanges(){const e=E.isHistoryBasedRouting?"popstate":"hashchange";return E.isHistoryBasedRouting&&(window.history.replaceState({},null,""),function(t,s){var a=t.pushState;t.pushState=function(...n){a.apply(t,n),s()}}(window.history,this._registerOnHashChange.bind(this))),q(window,e,()=>{this._registerOnHashChange()})}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute}navigateTo(e="/",t){let s=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");s=s||"/",this._routeStateMap.clear(),this._routeStateMap.set(e,t),s===e?this._navigateTo(e,t):E.isHistoryBasedRouting?window.history.pushState(t,"",e):window.location.hash="#"+e}onNavigationEnd(){return this._navigationEndEvent.asObservable()}_registerOnHashChange(){const e=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,""),t=this._routeStateMap.get(e);this._navigateTo(e,t)}_navigateTo(e,t){const s=e.split("/").filter(o=>o.length>0),a=E.routeList.filter(o=>{if(o.params.length===s.length&&Ee(o.url,e))return o;if(o.url===e)return o}),n=a.length>0?a[0]:null;n&&(this._currentRoute.path=e,this._currentRoute.state={...t||{}},B(n.canActivate()).subscribe(o=>{if(!o)return;const m=E.checkParams(s,n);if(Object.keys(m).length>0||e){this._currentRoute.routeParams=new Map(Object.entries(m));let p=[];E.isHistoryBasedRouting?p=new URLSearchParams(window.location.search).entries():p=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[],this._currentRoute.queryParams=new Map(p);const P=L=>{L.isRegistered=!0,this._template.next(L.template),this._navigationEndEvent.next()};n.isRegistered?P(n):n.templatePath?B(n.templatePath()).subscribe(()=>{P(n)}):n.redirectTo&&this.navigateTo(n.redirectTo,t)}else this.navigateTo(n.redirectTo,t)}))}}J()(Y);const Ce=()=>{class r{constructor(t,s){g(this,"_template","");g(this,"_subscriptions",new W)}beforeMount(){this._subscriptions.add(this.internalRouterSrvc.getTemplate().subscribe(t=>{this._template!==t?this._template=t:this.refreshRouterOutletComponent()})),this._subscriptions.add(this.internalRouterSrvc.listenRouteChanges())}mount(){const t=E.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(t||"/")}unmount(){this._subscriptions.unsubscribe()}refreshRouterOutletComponent(){if(this.renderer.shadowRoot.children.length){const t=new CustomEvent("refresh_component",{detail:{},bubbles:!1,cancelable:!1,composed:!1});this.renderer.shadowRoot.children[0].dispatchEvent(t)}}render(){if(this._template){const t=[`${this._template}`];return t.raw=[`${this._template}`],U(t)}else return U``}}re({selector:"router-outlet",deps:[Y,z]})(r)};class ne{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}onNavigationEnd(){return this.internalRouter.onNavigationEnd()}registerRoutes(e,t=!1,s=!1){if(s&&(E.isHistoryBasedRouting=!s),Array.isArray(e)){for(const a of e)E.formatRoute(a);t?E.preloadRoutes():E.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return J({deps:[Y]})(ne),l.BehaviourSubjectObs=X,l.Component=re,l.Injectable=J,l.Renderer=z,l.Router=ne,l.SubjectObs=$,l.Subscriptions=W,l.Validators=Re,l.fromEvent=q,l.html=U,l.promisify=pe,l.registerRouterComponent=Ce,l.render=ee,l.useFormFields=ve,l.useSearchParams=Se,l.useState=se,l.wrapIntoObservable=B,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),l}({});
