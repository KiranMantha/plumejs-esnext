var Re=Object.defineProperty;var Ee=(d,b,S)=>b in d?Re(d,b,{enumerable:!0,configurable:!0,writable:!0,value:S}):d[b]=S;var w=(d,b,S)=>(Ee(d,typeof b!="symbol"?b+"":b,S),S),B=(d,b,S)=>{if(!b.has(d))throw TypeError("Cannot "+S)};var _=(d,b,S)=>(B(d,b,"read from private field"),S?S.call(d):b.get(d)),A=(d,b,S)=>{if(b.has(d))throw TypeError("Cannot add the same private member more than once");b instanceof WeakSet?b.add(d):b.set(d,S)},k=(d,b,S,O)=>(B(d,b,"write to private field"),O?O.call(d,S):b.set(d,S),S);var D=(d,b,S)=>(B(d,b,"access private method"),S);var PlumeJS=function(d){var L,se,j,I;"use strict";const b=new(se=class{constructor(){A(this,L,void 0);k(this,L,new WeakMap)}register(r,e){if(!_(this,L).get(r))_(this,L).set(r,e);else throw console.error(r),"service already exists"}getService(r){const e=_(this,L).get(r);if(e)return e;throw console.error(r),"service is not a registered service."}clear(){k(this,L,new WeakMap)}},L=new WeakMap,se),S=r=>typeof r=="function",O=r=>{const e=r.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(t=>t.trim()):[]},$=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),G=(r,e,t,s=!1)=>(r.addEventListener(e,t,s),()=>{r.removeEventListener(e,t,s)}),ae=r=>{const e=()=>new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),t=f=>{const v=f.querySelectorAll("script");for(const R of v)R.remove()},s=(f,v)=>{if(v=v.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(f)&&(v.includes("javascript:")||v.includes("data:"))||f.startsWith("on"))return!0},i=f=>{const v=f.attributes;for(const{name:R,value:J}of v)s(R,J)&&f.removeAttribute(R)},n=f=>{const v=f.children;for(const R of v)i(R),n(R)},a=e();return t(a),n(a),a.innerHTML},ce=function(r){r.renderCount===1&&queueMicrotask(()=>{r.update(),r.renderCount=0})},le=(r,e)=>{const t=O(e),s=()=>({get(i,n){const a=Object.prototype.toString.call(i[n]);return["[object Object]","[object Array]"].indexOf(a)>-1&&!("__metadata__"in i[n])?new Proxy(i[n],s()):i[n]},set(i,n,a){return i[n]=a,++r.renderCount,ce(r),!0}});return class extends e{constructor(...i){return super(...i),i.forEach((n,a)=>{this[t[a]]=n}),new Proxy(this,s())}}},K=(r,e,t)=>{if(e.length>0){const s=[];for(const a of e)a.prototype.__metadata__.name!=="RENDERER"?s.push(b.getService(a)):s.push(t);const i=O(r),n=new r(...s);return e.forEach((a,f)=>{n[i[f]]=s[f]}),n}else return new r},P=new class{constructor(){w(this,"globalStyles");w(this,"globalStyleTag");w(this,"style_registry");w(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(r=""){let e=[];const t=new CSSStyleSheet;if(t.insertRule(":host { display: block; }"),e=[this.globalStyles,t],r){const s=new CSSStyleSheet;s.replace(r),e.push(s)}return e}},{html:q,render:Q}=(()=>{const r=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,t="attr",s=/^attr([^ ]+)/,i="insertNode",n=/^insertNode([^ ]+)/;let a=[];const f=c=>{const o={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let h=JSON.stringify(c);const l=u=>o[u]||u;return h=(u=>u.replace(/[&<>\(\)]/g,l))(h),JSON.parse(h)},v=(c,o)=>{const h=c.options,l=Array.isArray(o)?o:[o];let g,u,p=h.length;for(;p--;){u=h[p];const m=u.getAttribute("value")??(u.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(u.selected=l.indexOf(m)>-1)&&(g=!0)}g||(c.selectedIndex=-1)},R=c=>{const o=document.createElement("template");return o.innerHTML=c,o.content},J=(c,o)=>{const h=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,null);let l=h.nextNode();for(;l;){if(l.hasAttributes()){const g=Array.from(l.attributes).filter(u=>s.test(u.nodeName));for(const{nodeName:u,nodeValue:p}of g){const m=s.exec(u)[1];switch(!0){case/^on+/.test(p):{const T=p.slice(2).toLowerCase();l.removeEventListener(T,o[m]),T!=="bindprops"?l.addEventListener(T,o[m]):l.addEventListener(T,M=>{M.detail.setProps(o[m]())});break}case/ref/.test(p):{const T=(M=>{const V=M;return()=>{V.isConnected&&o[m](V)}})(l);a.push(T);break}case/^data-+/.test(p):case/^aria-+/.test(p):{l.setAttribute(p,f(o[m]));break}case/class/.test(p):{o[m]?l.classList.add(...o[m].split(" ")):l.setAttribute("class","");break}case/value/.test(p):{l.nodeName.toLowerCase()==="select"?v(l,o[m]):l.value=f(o[m]);break}case/disabled/.test(p):case/checked/.test(p):{o[m]?l.setAttribute(p,o[m]):l.removeAttribute(p);break}default:l.setAttribute(p,f(o[m]))}l.removeAttribute(u)}}l=h.nextNode()}},W=(c,o)=>{const h=document.createTreeWalker(c,NodeFilter.SHOW_COMMENT,null);let l=h.nextNode(),g;for(;l;){if(g=n.exec(l.data)){const u=Array.isArray(o[g[1]])?o[g[1]]:[o[g[1]]];l.replaceWith(...u),h.currentNode=c}l=h.nextNode()}},ne=(c,o)=>{if(!c||!o||c.nodeType!==1||o.nodeType!==1)return;const h=c.attributes,l=o.attributes;for(const{name:g,value:u}of h)(!l[g]||l[g]!==u)&&o.setAttribute(g,u);for(const{name:g}of l)h[g]||o.removeAttribute(g)},y=c=>c.nodeType===3?"text":c.nodeType===8?"comment":c.tagName.toLowerCase(),C=c=>c.childNodes&&c.childNodes.length>0?null:c.textContent,E=(c,o)=>{const h=o?Array.from(o.childNodes):[],l=c?Array.from(c.childNodes):[];let g=h.length-l.length;if(g>0)for(;g>0;g--)h[h.length-g].parentNode.removeChild(h[h.length-g]);l.forEach(function(u,p){const m=h[p];if(ne(u,m),!m){o&&o.appendChild(u);return}if(y(u)!==y(m)){m.replaceWith(u);return}const T=C(u);if(T&&T!==C(m)){m.textContent=T;return}if(m.childNodes.length>0&&u.childNodes.length<1){m.innerHTML="";return}if(m.childNodes.length<1&&u.childNodes.length>0){const M=document.createDocumentFragment();E(u,M),m.appendChild(M);return}if(u.childNodes.length>0){E(u,m);return}})};return{html:(c,...o)=>{let h="";const{length:l}=c;for(let u=1;u<l;u++){const p=o[u-1];let m=!1;if(h+=c[u-1],r.test(h)&&e.test(h)&&(h=h.replace(r,(T,M,V)=>`${t}${u-1}=${V||'"'}${M}${V?"":'"'}`),m=!0),!m)switch(!0){case Array.isArray(p):case p instanceof DocumentFragment:{h+=`<!--${i}${u-1}-->`;break}case(typeof p=="object"&&p!==null):{"html"in p&&(h+=p.html);break}default:h+=p}}h+=c[l-1];const g=R(h.trim());return J(g,o),W(g,o),g},render:(c,o)=>{c&&!c.children.length?(c.innerHTML="",c.appendChild(o)):E(o,c),a.forEach(h=>{h()}),a=[]}}})();class X{constructor(e,t){A(this,j,void 0);A(this,I,void 0);w(this,"update");w(this,"emitEvent");k(this,I,e),k(this,j,t)}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return _(this,j)}get hostElement(){return _(this,I)}}j=new WeakMap,I=new WeakMap;const ue={selector:"",root:!1,styles:"",deps:[],standalone:!1},Z=(r,e)=>{const t=document.createElement("style");return t.innerHTML=r,e&&e.appendChild(t),t},he=(r,e)=>{var t,s,i,n,oe,f,ie,R,Y,W;if(r={...ue,...r},r.styles=r.styles.toString(),r.root&&!P.isRootNodeSet)P.isRootNodeSet=!0,r.styles&&(P.globalStyles.replace(r.styles),P.globalStyleTag=Z(r.styles,document.head));else if(r.root&&P.isRootNodeSet)throw Error("Cannot register duplicate root component in "+r.selector+" component");window.customElements.define(r.selector,(W=class extends HTMLElement{constructor(){super();A(this,n);A(this,f);A(this,R);A(this,t,void 0);A(this,s,void 0);A(this,i,void 0);w(this,"renderCount",0);k(this,s,this.attachShadow({mode:"open"})),$||(_(this,s).adoptedStyleSheets=P.getComputedCss(r.styles,r.standalone)),D(this,n,oe).call(this),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this)}static get observedAttributes(){return e.observedAttributes||[]}update(){const y=_(this,t).render();typeof y=="string"?_(this,s).innerHTML=ae(y):Q(_(this,s),y),$&&(r.styles&&_(this,s).insertBefore(_(this,i),_(this,s).childNodes[0]),P.globalStyleTag&&!r.standalone&&_(this,s).insertBefore(document.importNode(P.globalStyleTag,!0),_(this,s).childNodes[0]))}setProps(y){var C,E;for(const[N,H]of Object.entries(y))e.observedProperties.find(c=>c===N)&&(_(this,t)[N]=H);(E=(C=_(this,t)).onPropertiesChanged)==null||E.call(C)}getInstance(){return _(this,t)}connectedCallback(){var y,C,E,N;D(this,f,ie).call(this),(C=(y=_(this,t)).beforeMount)==null||C.call(y),this.update(),(N=(E=_(this,t)).mount)==null||N.call(E),D(this,R,Y).call(this,"bindprops",{setProps:H=>{this.setProps(H)}},!1)}attributeChangedCallback(y,C,E){var N,H;(H=(N=_(this,t)).onAttributesChanged)==null||H.call(N,y,C,E)}disconnectedCallback(){var y,C;this.renderCount=1,(C=(y=_(this,t)).unmount)==null||C.call(y)}},t=new WeakMap,s=new WeakMap,i=new WeakMap,n=new WeakSet,oe=function(){const y=new X(this,_(this,s));y.update=()=>{this.update()},y.emitEvent=(C,E)=>{D(this,R,Y).call(this,C,E)},k(this,t,K(le(this,e),r.deps,y))},f=new WeakSet,ie=function(){$&&r.styles&&k(this,i,Z(r.styles))},R=new WeakSet,Y=function(y,C){const E=new CustomEvent(y,{detail:C});this.dispatchEvent(E)},W))},de={deps:[]},ee=r=>e=>{if(r.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(r.selector)||he(r,e)},z=(r={})=>e=>{if(r={...de,...r},e.prototype.__metadata__={name:"SERVICE"},r.deps.some(s=>s.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const t=K(e,r.deps);b.register(e,t)},fe=r=>{let e;switch(r.nodeName&&r.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(r.type)?e=r.checked?r.value!==null&&r.value!=="on"?r.value:!0:!1:e=r.value;break}case"select":{const t=r.type==="select-one",i=[...Array.from(r.options)].filter(n=>n.selected).map(n=>n.value??(n.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));e=t?i[0]:i;break}default:{e=r.value;break}}return e};class me{constructor(e,t){w(this,"_initialValues");w(this,"_controls");w(this,"_errors",new Map);this._initialValues=e,this._controls=t}get errors(){return this._errors}get valid(){return this._checkValidity(),!this._errors.size}get value(){const e={};for(const[t,s]of Object.entries(this._controls))e[t]=s.value;return e}get(e){return this._controls[e]}reset(e={}){for(const t in this._controls)this._controls[t].value=e[t]||this._initialValues[t];this._errors.clear()}_checkValidity(){this._errors.clear();for(const e in this._controls){const t=this._controls[e].value,s=this._controls[e].validators;this._controls[e].errors=null;for(const i of s){const n=i(t);n!==null&&(this._errors.has(e)?(this._errors.set(e,{...this._errors.get(e),...n}),this._controls[e].errors={...this._controls[e].errors,...n}):(this._errors.set(e,n),this._controls[e].errors=n))}}}}const ge=r=>{const e={},t={};for(const[a,f]of Object.entries(r)){const v=Array.isArray(f)?f:[f];e[a]={value:v.shift(),validators:v},t[a]=e[a].value}const s=new me(t,e);return[s,a=>f=>{const v=fe(f.target);s.get(a).value=v},()=>{s.reset()}]},pe=r=>{let e=r;return[e,s=>{let i;S(s)?i=s(e):i=s,Object.assign(e,i)}]};class be{static required(e){return e.length?null:{required:!0}}static min(e){return t=>t.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return t=>t.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return t=>new RegExp(e).test(t)?null:{pattern:!0}}}const _e=r=>!!r&&typeof r.subscribe=="function",ye=r=>!!r&&typeof r.then=="function",Se=r=>({subscribe:e=>{e(r)}}),ve=r=>({subscribe:e=>{Promise.resolve(r).then(t=>{e(t)})}});class we{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const te=r=>_e(r)?r:ye(r)?ve(Promise.resolve(r)):Se(r),F=class{static checkParams(e,t){let s=0;const i={},n=t.paramCount;for(let a=0;a<e.length;a++){const f=t.params[a];f.indexOf(":")>=0&&(i[f.split(":")[1]]=e[a].split("?")[0],s+=1)}return s===n?i:{}}static getParamCount(e){let t=0;return e.forEach(s=>{s.indexOf(":")>=0&&(t+=1)}),t}static formatRoute(e){const t={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:e.preload,canActivate:()=>!0};if(t.params=e.path.split("/").filter(s=>s.length>0),t.url=e.path,t.template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.template=e.template,t.templatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.paramCount=F.getParamCount(t.params),F.routeList.push(t)}static preloadRoutes(){for(const e of F.routeList)e.templatePath&&e.templatePath()}static preloadSelectedRoutes(){const e=F.routeList.filter(t=>t.preload===!0);for(const t of e)t.templatePath&&t.templatePath()}};let x=F;w(x,"routeList",[]);class U{constructor(){w(this,"_currentRoute",{path:"",routeParams:new Map,queryParams:new Map,state:{}});w(this,"_template",new we);w(this,"_unSubscribeHashEvent");w(this,"_routeStateMap",new Map)}startHashChange(){this._unSubscribeHashEvent=G(window,"hashchange",()=>{this._registerOnHashChange()})}stopHashChange(){this._unSubscribeHashEvent()}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute}navigateTo(e="",t){this._routeStateMap.clear(),e?(window.location.hash.replace(/^#/,"")===e&&this._navigateTo(e,t),this._routeStateMap.set(e,t),window.location.hash="#"+e):this._navigateTo(e,t)}_registerOnHashChange(){const e=window.location.hash.replace(/^#/,""),t=this._routeStateMap.get(e);this._navigateTo(e,t)}_routeMatcher(e,t){if(e){const s=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return t.match(s)}else return e===t}_navigateTo(e,t){const s=e.split("/").filter(a=>a.length>0),i=x.routeList.filter(a=>{if(a.params.length===s.length&&this._routeMatcher(a.url,e))return a;if(a.url===e)return a}),n=i.length>0?i[0]:null;n&&(this._currentRoute.path=e,this._currentRoute.state={...t||{}},te(n.canActivate()).subscribe(a=>{if(!a)return;const f=x.checkParams(s,n);if(Object.keys(f).length>0||e){this._currentRoute.routeParams=new Map(Object.entries(f));const v=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];this._currentRoute.queryParams=new Map(v),n.isRegistered?this._template.next(n.template):n.templatePath&&te(n.templatePath()).subscribe(()=>{n.isRegistered=!0,this._template.next(n.template)})}else this.navigateTo(n.redirectTo,t)}))}}z()(U);const Ce=()=>{class r{constructor(t){w(this,"_template","");w(this,"_subscriptions")}beforeMount(){this._subscriptions=this.internalRouterSrvc.getTemplate().subscribe(t=>{this._template=t}),this.internalRouterSrvc.startHashChange()}mount(){let t=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(t)}unmount(){this._subscriptions(),this.internalRouterSrvc.stopHashChange()}render(){if(this._template){const t=[`${this._template}`];return t.raw=[`${this._template}`],q(t)}else return q``}}ee({selector:"router-outlet",deps:[U]})(r)};class re{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}registerRoutes(e,t=!1){if(Array.isArray(e)){for(const s of e)x.formatRoute(s);t?x.preloadRoutes():x.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return z({deps:[U]})(re),d.Component=ee,d.Injectable=z,d.Renderer=X,d.Router=re,d.Validators=be,d.fromEvent=G,d.html=q,d.registerRouterComponent=Ce,d.render=Q,d.useFormFields=ge,d.useState=pe,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),d}({});
