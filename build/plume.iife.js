var Le=Object.defineProperty;var Me=(u,_,v)=>_ in u?Le(u,_,{enumerable:!0,configurable:!0,writable:!0,value:v}):u[_]=v;var g=(u,_,v)=>(Me(u,typeof _!="symbol"?_+"":_,v),v),Z=(u,_,v)=>{if(!_.has(u))throw TypeError("Cannot "+v)};var w=(u,_,v)=>(Z(u,_,"read from private field"),v?v.call(u):_.get(u)),I=(u,_,v)=>{if(_.has(u))throw TypeError("Cannot add the same private member more than once");_ instanceof WeakSet?_.add(u):_.set(u,v)},j=(u,_,v,B)=>(Z(u,_,"write to private field"),B?B.call(u,v):_.set(u,v),v);var ee=(u,_,v)=>(Z(u,_,"access private method"),v);var PlumeJS=function(u){var M,le;"use strict";const _=s=>!!s&&typeof s.subscribe=="function",v=s=>!!s&&typeof s.then=="function",B=s=>{const e=s.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(t=>t.trim()):[]},de=(()=>{try{return new CSSStyleSheet,!0}catch{return!1}})(),fe=s=>({subscribe:e=>{e(s)}}),pe=s=>({subscribe:e=>{Promise.resolve(s).then(t=>{e(t)})}}),q=()=>Math.random().toString(36).substring(2);class V{constructor(){g(this,"_callbackCollection",{})}unsubscribe(e){delete this._callbackCollection[e]}asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){const t=q();return this._callbackCollection[t]=e,()=>this.unsubscribe(t)}next(e){for(const t in this._callbackCollection)this._callbackCollection[t](e)}}class J extends V{constructor(t){super();g(this,"_initialValue");this._initialValue=t}subscribe(t){const r=super.subscribe(t);return super.next(this._initialValue),r}next(t){this._initialValue=t,super.next(t)}}class z{constructor(){g(this,"_subcribers",[])}add(e){this._subcribers.push(e)}unsubscribe(){for(const e of this._subcribers)e();this._subcribers=[]}}const Q=s=>_(s)?s:v(s)?pe(Promise.resolve(s)):fe(s),W=(s,e,t,r=!1)=>(s.addEventListener(e,t,r),()=>{s.removeEventListener(e,t,r)}),ge=s=>{const e=()=>new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),t=p=>{const y=p.querySelectorAll("script");for(const A of y)A.remove()},r=(p,y)=>{if(y=y.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(p)&&(y.includes("javascript:")||y.includes("data:"))||p.startsWith("on"))return!0},a=p=>{const y=p.attributes;for(const{name:A,value:x}of y)r(A,x)&&p.removeAttribute(A)},c=p=>{const y=p.children;for(const A of y)a(A),c(A)},l=e();return t(l),c(l),l.innerHTML},be=(s,e)=>{const t=B(e),r=()=>({get(a,c){const l=Object.prototype.toString.call(a[c]);return["[object Object]","[object Array]"].indexOf(l)>-1&&!("__metadata__"in a[c])?new Proxy(a[c],r()):a[c]},set(a,c,l){return a[c]=l,s(),!0}});return class extends e{constructor(...a){return super(...a),a.forEach((c,l)=>{t[l]&&t[l]!=="undefined"&&(this[t[l]]=c)}),new Proxy(this,r())}}},me=()=>{let s;return[new Promise(t=>{s=t}),s]},_e=s=>typeof s=="function",U=Object.create(null);let D=null;function ye(s,e){const t=D;let r;D=q(),U[D]=s;try{e()}finally{r=D,D=t}return r}function te(s){const e=U[D];let t=s;function r(){return t}return r.set=function(a){_e(a)?t=a(t):t=a,e()},r}function ve(s,e){const t=ye(s,e);return function(){delete U[t]}}const se=new(le=class{constructor(){I(this,M,void 0);j(this,M,new WeakMap)}register(s,e){if(!w(this,M).get(s))w(this,M).set(s,e);else throw console.error(s),"service already exists"}getService(s){const e=w(this,M).get(s);if(e)return e;throw console.error(s),"service is not a registered service."}clear(){j(this,M,new WeakMap)}},M=new WeakMap,le),re=(s,e,t)=>{if(e.length>0){const r=[];for(const l of e)l.prototype.__metadata__.name!=="RENDERER"?r.push(se.getService(l)):r.push(t);const a=B(s),c=new s(...r);return e.forEach((l,p)=>{c[a[p]]=r[p]}),c}else return new s},F=new class{constructor(){g(this,"globalStyles");g(this,"globalStyleTag");g(this,"style_registry");g(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(s=""){let e=[];const t=new CSSStyleSheet;if(t.insertRule(":host { display: block; }"),e=[this.globalStyles,t],s){const r=new CSSStyleSheet;r.replace(s),e.push(r)}return e}},{html:we,render:ne}=(()=>{const s=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,t="attr",r=/^attr([^ ]+)/,a="insertNode",c=/^insertNode([^ ]+)/;let l=[],p=[];const y=n=>{const i={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let o=JSON.stringify(n);const h=d=>i[d]||d;return o=(d=>d.replace(/[&<>\(\)]/g,h))(o),JSON.parse(o)},A=(n,i)=>{const o=n.options,h=Array.isArray(i)?i:[i];let m,d,f=o.length;for(;f--;){d=o[f];const T=d.getAttribute("value")??(d.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(d.selected=h.indexOf(T)>-1)&&(m=!0)}m||(n.selectedIndex=-1)},x=n=>{const i=document.createElement("template");return i.innerHTML=n,i.content},O=(n,i,o)=>{const h=()=>{setTimeout(()=>{if(n.isConnected){const m=new CustomEvent("bindprops",{detail:{props:i},bubbles:!1});n.dispatchEvent(m)}})};n[o]=JSON.stringify(i),p.push(h)},b=(n,i,o)=>{switch(!0){case/attrs/.test(i):{const h=o.attrs;for(const m in h)b(n,m,h[m]);break}case/^on+/.test(i):{const h=i.slice(2).toLowerCase();n.removeEventListener(h,o),n.addEventListener(h,o);break}case/ref/.test(i):{const h=function(){this.node.isConnected&&this.fn(this.node)}.bind({node:n,fn:o});l.push(h);break}case/^data-+/.test(i):case/^aria-+/.test(i):{i==="data-input"?O(n,o,Symbol("input")):n.setAttribute(i,y(o));break}case/class/.test(i):{o?n.classList.add(...o.split(" ")):n.setAttribute("class","");break}case/value/.test(i):{n.nodeName.toLowerCase()==="select"?A(n,o):n.value=y(o);break}case/disabled/.test(i):case/checked/.test(i):{o?n.setAttribute(i,o):n.removeAttribute(i);break}default:n.setAttribute(i,y(o))}},S=(n,i)=>{const o=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,null);let h=o.nextNode();for(;h;){if(h.hasAttributes()){const m=Array.from(h.attributes).filter(d=>r.test(d.nodeName));for(const{nodeName:d,nodeValue:f}of m){const T=r.exec(d)[1];b(h,f,i[T]),h.removeAttribute(d)}}h=o.nextNode()}},E=(n,i)=>{const o=document.createTreeWalker(n,NodeFilter.SHOW_COMMENT,null);let h=o.nextNode(),m;for(;h;){if(m=c.exec(h.data)){const d=Array.isArray(i[m[1]])?i[m[1]]:[i[m[1]]];h.replaceWith(...d),o.currentNode=n}h=o.nextNode()}},P=(n,i)=>{if(!n||!i||n.nodeType!==1||i.nodeType!==1)return;const o=n.attributes,h=i.attributes,m=i.getAttribute("data-preserve-attributes"),d=m&&m==="true";for(const{name:f,value:T}of o)(!h[f]||h[f]!==T)&&i.setAttribute(f,T);if(!d)for(const{name:f}of h)o[f]||i.removeAttribute(f);if(["input","textarea"].includes(i.tagName.toLowerCase())&&(i.value=n.value),i.tagName.indexOf("-")>-1&&n.tagName.indexOf("-")>-1){const f=Object.getOwnPropertySymbols(n).find(L=>L.description==="input"),T=Object.getOwnPropertySymbols(i).find(L=>L.description==="input"),C=f?n[f]:"",N=T?i[T]:"";C&&N&&C!==N&&O(i,JSON.parse(C),T)}},k=n=>n.nodeType===3?"text":n.nodeType===8?"comment":n.tagName.toLowerCase(),H=n=>n.childNodes&&n.childNodes.length>0?null:n.textContent,X=(n,i,o)=>{const h=i?Array.from(i.childNodes):[],m=n?Array.from(n.childNodes):[];let d=h.length-m.length;if(d>0)for(;d>0;d--)h[h.length-d].parentNode.removeChild(h[h.length-d]);m.forEach(function(f,T){const C=h[T];if(P(f,C),o&&C&&C.nodeType===1&&C.tagName.indexOf("-")>-1)return;if(!C){i&&i.appendChild(f);return}if(k(f)!==k(C)){C.replaceWith(f);return}const N=H(f);if(N&&N!==H(C)){C.textContent=N;return}if(C.childNodes.length>0&&f.childNodes.length<1){C.innerHTML="";return}if(C.childNodes.length<1&&f.childNodes.length>0){const L=document.createDocumentFragment();X(f,L,!1),C.appendChild(L);return}if(f.childNodes.length>0){X(f,C,!0);return}})};return{html:(n,...i)=>{let o="";const{length:h}=n;for(let d=1;d<h;d++){const f=i[d-1];let T=!1;if(o+=n[d-1],s.test(o)&&e.test(o)&&(o=o.replace(s,(C,N,L)=>`${t}${d-1}=${L||'"'}${N}${L?"":'"'}`),T=!0),!T)switch(!0){case Array.isArray(f):case f instanceof DocumentFragment:{o+=`<!--${a}${d-1}-->`;break}case(typeof f=="object"&&f!==null):{"attrs"in f&&(o+=`${t}${d-1}="attrs"`);break}default:o+=f||""}}o+=n[h-1];const m=x(o.trim());return S(m,i),E(m,i),m},render:(n,i)=>{n&&!n.children.length?(n.innerHTML="",n.appendChild(i)):X(i,n,!1),l.forEach(o=>{o()}),l=[],p.forEach(o=>{o()}),p=[]}}})();class Y{constructor(e,t){g(this,"_shadowRoot");g(this,"_hostElement");g(this,"update");g(this,"emitEvent");this._hostElement=e,this._shadowRoot=t}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return this._shadowRoot}get hostElement(){return this._hostElement}}const Se={selector:"",root:!1,styles:"",deps:[],standalone:!1,shadowDomEncapsulation:!0},ie=(s,e)=>{const t=document.createElement("style");return t.innerHTML=s,e&&e.appendChild(t),t},Ce=async(s,e)=>{var t,r,a,c,l,ue,y,he,x;if(s={...Se,...s},v(s.styles)){const O=await s.styles;s.styles=O.default.toString()}if(s.styles=s.styles.toString(),s.root&&!F.isRootNodeSet)F.isRootNodeSet=!0,s.styles&&(F.globalStyles.replace(s.styles),F.globalStyleTag=ie(s.styles,document.head));else if(s.root&&F.isRootNodeSet)throw Error("Cannot register duplicate root component in "+s.selector+" component");window.customElements.define(s.selector,(x=class extends HTMLElement{constructor(){super();I(this,l);I(this,y);I(this,t,void 0);I(this,r,void 0);I(this,a,void 0);I(this,c,new z);g(this,"renderCount",0);if(s.shadowDomEncapsulation&&de)j(this,r,this.attachShadow({mode:"open"})),w(this,r).adoptedStyleSheets=F.getComputedCss(s.styles,s.standalone);else{j(this,r,this);const b=q();this.setAttribute("data-did",b);const S=s.styles.replaceAll(":host",`${s.selector}[data-did='${b}']`);!s.root&&S&&j(this,a,ie(S,document.head))}this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this),this.setRenderIntoQueue=this.setRenderIntoQueue.bind(this),ee(this,l,ue).call(this)}static get observedAttributes(){return e.observedAttributes||[]}update(){const b=w(this,t).render();typeof b=="string"?w(this,r).innerHTML=ge(b):ne(w(this,r),b)}setProps(b){var S,E;for(const[P,k]of Object.entries(b))e.observedProperties.find(H=>H===P)&&(w(this,t)[P]=k);(E=(S=w(this,t)).onPropertiesChanged)==null||E.call(S)}getInstance(){return w(this,t)}setRenderIntoQueue(){++this.renderCount,this.renderCount===1&&queueMicrotask(()=>{this.update(),this.renderCount=0})}connectedCallback(){var b,S,E,P;w(this,c).add(W(this,"bindprops",k=>{const H=k.detail.props;H&&this.setProps(H)})),w(this,c).add(W(this,"refresh_component",()=>{this.update()})),(S=(b=w(this,t)).beforeMount)==null||S.call(b),this.update(),(P=(E=w(this,t)).mount)==null||P.call(E)}attributeChangedCallback(b,S,E){var P,k;(k=(P=w(this,t)).onAttributesChanged)==null||k.call(P,b,S,E)}disconnectedCallback(){var b,S,E;this.renderCount=0,(S=(b=w(this,t)).unmount)==null||S.call(b),(E=w(this,a))==null||E.remove(),w(this,c).unsubscribe()}},t=new WeakMap,r=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakSet,ue=function(){const b=new Y(this,w(this,r));b.update=()=>{this.update()},b.emitEvent=(S,E)=>{ee(this,y,he).call(this,S,E)},w(this,c).add(ve(this.setRenderIntoQueue,()=>{j(this,t,re(be(this.setRenderIntoQueue,e),s.deps,b))}))},y=new WeakSet,he=function(b,S){const E=new CustomEvent(b,{detail:S});this.dispatchEvent(E)},x))},Re={deps:[]},oe=s=>e=>{if(s.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(s.selector)||Ce(s,e)},G=(s={})=>e=>{if(s={...Re,...s},e.prototype.__metadata__={name:"SERVICE"},s.deps.some(r=>r.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const t=re(e,s.deps);se.register(e,t)},ae=s=>typeof s=="function";function Ee(s,e){return s.nodeName&&s.nodeName.toLowerCase()===e.toLowerCase()}const Te=s=>{let e;switch(s.nodeName&&s.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(s.type)?e=s.checked?s.value!==null&&s.value!=="on"?s.value:!0:!1:e=s.value;break}case"select":{const t=s.type==="select-one",a=[...Array.from(s.options).filter(c=>!c.disabled&&(!c.parentNode.disabled||!Ee(c.parentNode,"optgroup")))].filter(c=>c.selected).map(c=>c.value??(c.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));e=t?a[0]:a;break}default:{e=s.value;break}}return e};class Ae{constructor(e){g(this,"_initialValues");g(this,"_controls",new Map);g(this,"_errors",new Map);g(this,"_errorCount");g(this,"_isSubmitted",!1);this._errorCount=te(0),this._initialValues=e;for(const[t,r]of Object.entries(e)){const a=[...Array.isArray(r)?r:[r]];this._controls.set(t,{value:a[0],validators:a.length>1?a[1]:[],isTouched:!1,errorMessage:""})}}get hasErrors(){return!!this._errorCount()}get errors(){return this._errors}get valid(){return!this._errors.size}get value(){const e={};for(const[t,r]of this._controls)e[t]=r.value;return e}get submitted(){return this._isSubmitted}getControl(e){return this._controls.get(e)}register(e){return{attrs:{name:e,value:this.getControl(e).value,onchange:t=>{const r=Te(t.target);this.getControl(e).value=r},onblur:()=>{this.getControl(e).isTouched=!0,this._checkValidity(e)}}}}handleSubmit(e,t){e.preventDefault(),this._isSubmitted=!0,this._checkValidity(),t(this.value)}reset(){for(const[e,t]of Object.entries(this._initialValues)){const r=[...Array.isArray(t)?t:[t]],{validators:a}=this._controls.get(e);this._controls.set(e,{value:JSON.parse(JSON.stringify(r))[0],validators:a,isTouched:!1,errorMessage:""})}this._isSubmitted=!1,this._errors.clear(),this._errorCount.set(0)}_checkValidity(e){if(e)this._executeValidators(e);else{this._errors.clear();for(const[t]of this._controls)this._executeValidators(t)}this._errorCount.set(this._errors.size)}_executeValidators(e){const{value:t,validators:r}=this._controls.get(e);let a="";for(const c of r){const l=ae(c)?c(t):c.rule(t);if(l!==null){this._errors.has(e)?this._errors.set(e,{...this._errors.get(e),...l}):this._errors.set(e,l),a=ae(c)?"error":c.message;break}else this._errors.delete(e)}this._controls.get(e).errorMessage=a}}class Pe{static required(e){return e.length?null:{required:!0}}static min(e){return t=>t.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return t=>t.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return t=>new RegExp(e).test(t)?null:{pattern:!0}}}const $=class{static checkParams(e,t){let r=0;const a={},c=t.paramCount;for(let l=0;l<e.length;l++){const p=t.params[l];p.indexOf(":")>=0&&(a[p.split(":")[1]]=e[l].split("?")[0],r+=1)}return r===c?a:{}}static getParamCount(e){let t=0;return e.forEach(r=>{r.indexOf(":")>=0&&(t+=1)}),t}static formatRoute(e){const t={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:e.preload,canActivate:()=>!0};if(t.params=e.path.split("/").filter(r=>r.length>0),t.url=e.path,t.template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.template=e.template,t.templatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.paramCount=$.getParamCount(t.params),$.routeList.push(t)}static preloadRoutes(){for(const e of $.routeList)e.templatePath&&e.templatePath()}static preloadSelectedRoutes(){const e=$.routeList.filter(t=>t.preload===!0);for(const t of e)t.templatePath&&t.templatePath()}};let R=$;g(R,"routeList",[]),g(R,"isHistoryBasedRouting",!0);function xe(s,e){return s?new RegExp(s.replace(/:[^\s/]+/g,"(.+)")).test(e):!1}class K{constructor(){g(this,"_currentRoute",new J({path:"",routeParams:new Map,queryParams:new Map,state:{}}));g(this,"_template",new J(""));g(this,"_navigationEndEvent",new V);g(this,"_routeStateMap",new Map)}listenRouteChanges(){const e=R.isHistoryBasedRouting?"popstate":"hashchange";return R.isHistoryBasedRouting&&(window.history.replaceState({},null,""),function(t,r){var a=t.pushState;t.pushState=function(...c){a.apply(t,c),r()}}(window.history,this._registerOnHashChange.bind(this))),W(window,e,()=>{this._registerOnHashChange()})}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute.asObservable()}navigateTo(e="/",t){let r=R.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");r=r||"/",this._routeStateMap.clear(),this._routeStateMap.set(e,t),r===e?this._navigateTo(e,t):R.isHistoryBasedRouting?window.history.pushState(t,"",e):window.location.hash="#"+e}onNavigationEnd(){return this._navigationEndEvent.asObservable()}_registerOnHashChange(){const e=R.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,""),t=this._routeStateMap.get(e);this._navigateTo(e,t)}_navigateTo(e,t){const r={},a=e.split("/").filter(p=>p.length>0),c=R.routeList.filter(p=>{if(p.params.length===a.length&&xe(p.url,e))return p;if(p.url===e)return p}),l=c.length>0?c[0]:null;l&&(r.path=e,r.state={...t||{}},Q(l.canActivate()).subscribe(p=>{if(!p)return;const y=R.checkParams(a,l);if(Object.keys(y).length>0||e){r.routeParams=new Map(Object.entries(y));let A=[];R.isHistoryBasedRouting?A=new URLSearchParams(window.location.search).entries():A=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[],r.queryParams=new Map(A);const x=O=>{O.isRegistered=!0,this._currentRoute.next(r),this._template.next(O.template),this._navigationEndEvent.next()};l.isRegistered?x(l):l.templatePath?Q(l.templatePath()).subscribe(()=>{x(l)}):l.redirectTo&&this.navigateTo(l.redirectTo,t)}else this.navigateTo(l.redirectTo,t)}))}}G()(K);const ke=()=>{class s{constructor(t,r){g(this,"_template","");g(this,"_subscriptions",new z)}beforeMount(){this._subscriptions.add(this.internalRouterSrvc.getTemplate().subscribe(t=>{this._template!==t&&(this._template=t)})),this._subscriptions.add(this.internalRouterSrvc.listenRouteChanges())}mount(){const t=R.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(t||"/")}unmount(){this._subscriptions.unsubscribe()}render(){return this._template}}oe({selector:"router-outlet",deps:[K,Y]})(s)};class ce{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}onNavigationEnd(){return this.internalRouter.onNavigationEnd()}registerRoutes(e,t=!1,r=!1){if(r&&(R.isHistoryBasedRouting=!r),Array.isArray(e)){for(const a of e)R.formatRoute(a);t?R.preloadRoutes():R.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return G({deps:[K]})(ce),u.BehaviourSubjectObs=J,u.Component=oe,u.FormBuilder=Ae,u.Injectable=G,u.Renderer=Y,u.Router=ce,u.SubjectObs=V,u.Subscriptions=z,u.Validators=Pe,u.fromEvent=W,u.html=we,u.promisify=me,u.registerRouterComponent=ke,u.render=ne,u.signal=te,u.wrapIntoObservable=Q,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),u}({});
