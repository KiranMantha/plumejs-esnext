var Le=Object.defineProperty;var xe=(o,m,w)=>m in o?Le(o,m,{enumerable:!0,configurable:!0,writable:!0,value:w}):o[m]=w;var _=(o,m,w)=>(xe(o,typeof m!="symbol"?m+"":m,w),w),re=(o,m,w)=>{if(!m.has(o))throw TypeError("Cannot "+w)};var n=(o,m,w)=>(re(o,m,"read from private field"),w?w.call(o):m.get(o)),S=(o,m,w)=>{if(m.has(o))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(o):m.set(o,w)},T=(o,m,w,z)=>(re(o,m,"write to private field"),z?z.call(o,w):m.set(o,w),w);var H=(o,m,w)=>(re(o,m,"access private method"),w);(function(o,m){typeof exports=="object"&&typeof module<"u"?m(exports):typeof define=="function"&&define.amd?define(["exports"],m):(o=typeof globalThis<"u"?globalThis:o||self,m(o.PlumeJS={}))})(this,function(o){var x,he,j,V,W,C,R,J,fe,k,I,U,B,me,Y,ge,O,K;"use strict";const m=new(he=class{constructor(){S(this,x,void 0);T(this,x,new WeakMap)}register(t,e){if(!n(this,x).get(t))n(this,x).set(t,e);else throw console.error(t),"service already exists"}getService(t){const e=n(this,x).get(t);if(e)return e;throw console.error(t),"service is not a registered service."}clear(){T(this,x,new WeakMap)}},x=new WeakMap,he),w=t=>typeof t=="function",z=t=>{const e=t.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(s=>s.trim()):[]},Q=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),ne=(t,e,s,r=!1)=>(t.addEventListener(e,s,r),()=>{t.removeEventListener(e,s,r)}),ie=(t,e,s)=>{if(e.length>0){const r=[];for(const y of e)y.__metadata__?r.push(s):r.push(m.getService(y));const c=z(t),d=new t(...r);return e.forEach((y,f)=>{d[c[f]]=r[f]}),d}else return new t},L=new class{constructor(){_(this,"globalStyles");_(this,"globalStyleTag");_(this,"style_registry");_(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(t=""){let e=[];const s=new CSSStyleSheet;if(s.insertRule(":host { display: block; }"),e=[this.globalStyles,s],t){const r=new CSSStyleSheet;r.replace(t),e.push(r)}return e}},{html:X,render:ae}=(()=>{const t=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,s="attr",r=/^attr([^ ]+)/,c="insertNode",d=/^insertNode([^ ]+)/;let y=[];const f=l=>{const i={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let h=JSON.stringify(l);const u=a=>i[a]||a;return h=(a=>a.replace(/[&<>\(\)]/g,u))(h),JSON.parse(h)},v=(l,i)=>{const h=l.options,u=Array.isArray(i)?i:[i];let g,a,b=h.length;for(;b--;){a=h[b];const p=a.getAttribute("value")??(a.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(a.selected=u.indexOf(p)>-1)&&(g=!0)}g||(l.selectedIndex=-1)},E=l=>{const i=document.createElement("template");return i.innerHTML=l,i.content},P=(l,i)=>{const h=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,null);let u=h.nextNode();for(;u;){if(u.hasAttributes()){const g=Array.from(u.attributes).filter(a=>r.test(a.nodeName));for(const{nodeName:a,nodeValue:b}of g){const p=r.exec(a)[1];switch(!0){case/^on+/.test(b):{const A=b.slice(2).toLowerCase();u.removeEventListener(A,i[p]),A!=="bindprops"?u.addEventListener(A,i[p]):u.addEventListener(A,F=>{F.detail.setProps(i[p]())});break}case/ref/.test(b):{const A=(F=>{const D=F;return()=>{D.isConnected&&i[p](D)}})(u);y.push(A);break}case/^data-+/.test(b):case/^aria-+/.test(b):{u.setAttribute(b,f(i[p]));break}case/class/.test(b):{i[p]?u.classList.add(...i[p].split(" ")):u.setAttribute("class","");break}case/value/.test(b):{u.nodeName.toLowerCase()==="select"?v(u,i[p]):u.value=f(i[p]);break}case/disabled/.test(b):case/checked/.test(b):{i[p]?u.setAttribute(b,i[p]):u.removeAttribute(b);break}default:u.setAttribute(b,f(i[p]))}u.removeAttribute(a)}}u=h.nextNode()}},N=(l,i)=>{const h=document.createTreeWalker(l,NodeFilter.SHOW_COMMENT,null);let u=h.nextNode(),g;for(;u;){if(g=d.exec(u.data)){const a=Array.isArray(i[g[1]])?i[g[1]]:[i[g[1]]];u.replaceWith(...a),h.currentNode=l}u=h.nextNode()}},q=(l,i)=>{if(!l||!i||l.nodeType!==1||i.nodeType!==1)return;const h=l.attributes,u=i.attributes;for(const{name:g,value:a}of h)/class/.test(g)?Array.from(l.classList).every(b=>{i.classList.contains(b)||i.classList.add(b)}):(!u[g]||u[g]!==a)&&i.setAttribute(g,a);for(const{name:g}of u)/class/.test(g)?Array.from(i.classList).every(a=>{l.classList.contains(a)||i.classList.remove(a)}):h[g]||i.removeAttribute(g)},G=l=>l.nodeType===3?"text":l.nodeType===8?"comment":l.tagName.toLowerCase(),de=l=>l.childNodes&&l.childNodes.length>0?null:l.textContent,se=(l,i)=>{const h=i?Array.from(i.childNodes):[],u=l?Array.from(l.childNodes):[];let g=h.length-u.length;if(g>0)for(;g>0;g--)h[h.length-g].parentNode.removeChild(h[h.length-g]);u.forEach(function(a,b){const p=h[b];if(q(a,p),!p){i&&i.appendChild(a);return}if(G(a)!==G(p)){p.replaceWith(a);return}const A=de(a);if(A&&A!==de(p)){p.textContent=A;return}if(p.childNodes.length>0&&a.childNodes.length<1){p.innerHTML="";return}if(p.childNodes.length<1&&a.childNodes.length>0){const F=document.createDocumentFragment();se(a,F),p.appendChild(F);return}if(a.childNodes.length>0){se(a,p);return}})};return{html:(l,...i)=>{let h="";const{length:u}=l;for(let a=1;a<u;a++){const b=i[a-1];let p=!1;if(h+=l[a-1],t.test(h)&&e.test(h)&&(h=h.replace(t,(A,F,D)=>`${s}${a-1}=${D||'"'}${F}${D?"":'"'}`),p=!0),!p)switch(!0){case Array.isArray(b):case b instanceof DocumentFragment:{h+=`<!--${c}${a-1}-->`;break}case(typeof b=="object"&&b!==null):{"html"in b&&(h+=b.html);break}default:h+=b}}h+=l[u-1];const g=E(h.trim());return P(g,i),N(g,i),g},render:(l,i)=>{l&&!l.children.length?(l.innerHTML="",l.appendChild(i)):se(i,l),y.forEach(h=>{h()}),y=[]}}})();class Z{constructor(e,s){S(this,j,void 0);S(this,V,void 0);_(this,"update");_(this,"emitEvent");T(this,V,e),T(this,j,s)}static get __metadata__(){return{name:"Renderer"}}get shadowRoot(){return n(this,j)}get hostElement(){return n(this,V)}}j=new WeakMap,V=new WeakMap;const be={selector:"",root:!1,styles:"",deps:[],standalone:!1},oe=(t,e)=>{const s=document.createElement("style");return s.innerHTML=t,e&&e.appendChild(s),s},pe=(t,e)=>{var s,r,c,d;if(t={...be,...t},t.styles=t.styles.toString(),t.root&&!L.isRootNodeSet)L.isRootNodeSet=!0,t.styles&&(L.globalStyles.replace(t.styles),L.globalStyleTag=oe(t.styles,document.head));else if(t.root&&L.isRootNodeSet)throw Error("Cannot register duplicate root component in "+t.selector+" component");window.customElements.define(t.selector,(d=class extends HTMLElement{constructor(){super();S(this,s,void 0);S(this,r,void 0);S(this,c,void 0);T(this,r,this.attachShadow({mode:"open"})),Q||(n(this,r).adoptedStyleSheets=L.getComputedCss(t.styles,t.standalone)),this.getInstance=this.getInstance.bind(this)}static get observedAttributes(){return e.observedAttributes||[]}emulateComponent(){Q&&t.styles&&T(this,c,oe(t.styles))}update(){ae(n(this,r),(()=>n(this,s).render())()),Q&&(t.styles&&n(this,r).insertBefore(n(this,c),n(this,r).childNodes[0]),L.globalStyleTag&&!t.standalone&&n(this,r).insertBefore(document.importNode(L.globalStyleTag,!0),n(this,r).childNodes[0]))}emitEvent(f,v){const E=new CustomEvent(f,{detail:v});this.dispatchEvent(E)}setProps(f){var v,E;for(const[P,N]of Object.entries(f))e.observedProperties[P]&&(n(this,s)[P]=N);(E=(v=n(this,s)).onPropertiesChanged)==null||E.call(v),this.update()}getInstance(){return n(this,s)}connectedCallback(){var v,E,P,N;this.emulateComponent();const f=new Z(this,n(this,r));f.update=()=>{this.update()},f.emitEvent=(q,G)=>{this.emitEvent(q,G)},T(this,s,ie(e,t.deps,f)),(E=(v=n(this,s)).beforeMount)==null||E.call(v),this.update(),(N=(P=n(this,s)).mount)==null||N.call(P),this.emitEvent("bindprops",{setProps:q=>{this.setProps(q)}},!1)}attributeChangedCallback(f,v,E){var P,N;(N=(P=n(this,s)).onAttributesChanges)==null||N.call(P,f,v,E)}disconnectedCallback(){var f,v;(v=(f=n(this,s)).unmount)==null||v.call(f)}},s=new WeakMap,r=new WeakMap,c=new WeakMap,d))},ye={deps:[]},le=t=>e=>{if(t.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(t.selector)||pe(t,e)},ee=(t={})=>e=>{if(t={...ye,...t},t.deps.some(r=>{var c;return((c=r.__metadata__)==null?void 0:c.name)==="Renderer"}))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const s=ie(e,t.deps);m.register(e,s)},ve=t=>{let e;switch(t.nodeName&&t.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(t.type)?e=t.checked?t.value!==null&&t.value!=="on"?t.value:!0:!1:e=t.value;break}case"select":{const s=t.type==="select-one",c=[...Array.from(t.options)].filter(d=>d.selected).map(d=>d.value??(d.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" "));e=s?c[0]:c;break}default:{e=t.value;break}}return e};class we{constructor(e,s){S(this,J);S(this,W,void 0);S(this,C,void 0);S(this,R,new Map);T(this,W,e),T(this,C,s)}get errors(){return n(this,R)}get valid(){return H(this,J,fe).call(this),!n(this,R).size}get value(){const e={};for(const[s,r]of Object.entries(n(this,C)))e[s]=r.value;return e}get(e){return n(this,C)[e]}reset(e={}){for(const s in n(this,C))n(this,C)[s].value=e[s]||n(this,W)[s];n(this,R).clear()}}W=new WeakMap,C=new WeakMap,R=new WeakMap,J=new WeakSet,fe=function(){n(this,R).clear();for(const e in n(this,C)){const s=n(this,C)[e].value,r=n(this,C)[e].validators;n(this,C)[e].errors=null;for(const c of r){const d=c(s);d!==null&&(n(this,R).has(e)?(n(this,R).set(e,{...n(this,R).get(e),...d}),n(this,C)[e].errors={...n(this,C)[e].errors,...d}):(n(this,R).set(e,d),n(this,C)[e].errors=d))}}};const Se=t=>{const e={},s={};for(const[y,f]of Object.entries(t)){const v=Array.isArray(f)?f:[f];e[y]={value:v.shift(),validators:v},s[y]=e[y].value}const r=new we(s,e);return[r,y=>f=>{const v=ve(f.target);r.get(y).value=v},()=>{r.reset()}]},Ce=t=>{let e=t;return[e,r=>{let c;w(r)?c=r(e):c=r,Object.assign(e,c)}]};class Te{static required(e){return e.length?null:{required:!0}}static min(e){return s=>s.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return s=>s.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return s=>new RegExp(e).test(s)?null:{pattern:!0}}}const Re=t=>!!t&&typeof t.subscribe=="function",Ee=t=>!!t&&typeof t.then=="function",Ae=t=>({subscribe:e=>{e(t)}}),Pe=t=>({subscribe:e=>{Promise.resolve(t).then(s=>{e(s)})}});class Ne{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const ce=t=>Re(t)?t:Ee(t)?Pe(Promise.resolve(t)):Ae(t),$=class{static checkParams(e,s){let r=0,c={},d=s.ParamCount;for(let f=0;f<e.length;f++){var y=s.Params[f];y.indexOf(":")>=0&&(c[y.split(":")[1]]=e[f].split("?")[0],r+=1)}return r===d?c:{}}static getParamCount(e){let s=0;return e.forEach(r=>{r.indexOf(":")>=0&&(s+=1)}),s}static formatRoute(e){let s={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(s.Params=e.path.split("/").filter(r=>r.length>0),s.Url=e.path,s.Template="",s.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");s.Template=e.template,s.TemplatePath=e.templatePath}e.canActivate&&(s.canActivate=e.canActivate),s.ParamCount=$.getParamCount(s.Params),$.routeList.push(s)}static preloadRoutes(){for(const e of $.routeList)e.TemplatePath&&e.TemplatePath()}};let M=$;_(M,"routeList",[]);class te{constructor(){S(this,B);S(this,Y);S(this,O);S(this,k,{path:"",routeParams:new Map,queryParams:new Map,state:{}});S(this,I,new Ne);S(this,U,void 0)}startHashChange(){T(this,U,ne(window,"hashchange",()=>{H(this,B,me).call(this)}))}stopHashChange(){n(this,U).call(this)}getTemplate(){return n(this,I).asObservable()}getCurrentRoute(){return n(this,k)}navigateTo(e="",s){e?(window.location.hash.replace(/^#/,"")===e&&H(this,O,K).call(this,e,s),window.location.hash="#"+e):H(this,O,K).call(this,e,s)}}k=new WeakMap,I=new WeakMap,U=new WeakMap,B=new WeakSet,me=function(){const e=window.location.hash.replace(/^#/,"");H(this,O,K).call(this,e,null)},Y=new WeakSet,ge=function(e,s){if(e){let r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return s.match(r)}else return e===s},O=new WeakSet,K=function(e,s){let r=e.split("/").filter(y=>y.length>0),c=M.routeList.filter(y=>{if(y.Params.length===r.length&&H(this,Y,ge).call(this,y.Url,e))return y;if(y.Url===e)return y}),d=c.length>0?c[0]:null;d&&(n(this,k).path=e,n(this,k).state={...s||{}},ce(d.canActivate()).subscribe(y=>{if(!y)return;let f=M.checkParams(r,d);if(Object.keys(f).length>0||e){n(this,k).routeParams=new Map(Object.entries(f));const v=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];n(this,k).queryParams=new Map(v),d.IsRegistered?n(this,I).next(d.Template):d.TemplatePath&&ce(d.TemplatePath()).subscribe(()=>{d.IsRegistered=!0,n(this,I).next(d.Template)})}else this.navigateTo(d.redirectTo)}))},ee()(te);const _e=()=>{var e,s;class t{constructor(c,d){S(this,e,"");S(this,s,void 0);_(this,"update")}beforeMount(){T(this,s,this.internalRouterSrvc.getTemplate().subscribe(c=>{T(this,e,c),this.renderer.update()})),this.internalRouterSrvc.startHashChange()}mount(){let c=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(c)}unmount(){n(this,s).call(this),this.internalRouterSrvc.stopHashChange()}render(){if(n(this,e)){const c=[`${n(this,e)}`];return c.raw=[`${n(this,e)}`],X(c)}else return X``}}e=new WeakMap,s=new WeakMap,le({selector:"router-outlet",deps:[te,Z]})(t)};class ue{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,s){this.internalRouter.navigateTo(e,s)}registerRoutes(e,s=!1){if(Array.isArray(e)){for(let r of e)M.formatRoute(r);s&&M.preloadRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}ee({deps:[te]})(ue),o.Component=le,o.Injectable=ee,o.Renderer=Z,o.Router=ue,o.Validators=Te,o.fromNativeEvent=ne,o.html=X,o.registerRouterComponent=_e,o.render=ae,o.useFormFields=Se,o.useState=Ce,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
