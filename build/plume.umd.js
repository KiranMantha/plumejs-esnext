var Re=Object.defineProperty;var Ee=(a,g,y)=>g in a?Re(a,g,{enumerable:!0,configurable:!0,writable:!0,value:y}):a[g]=y;var _=(a,g,y)=>(Ee(a,typeof g!="symbol"?g+"":g,y),y),X=(a,g,y)=>{if(!g.has(a))throw TypeError("Cannot "+y)};var n=(a,g,y)=>(X(a,g,"read from private field"),y?y.call(a):g.get(a)),w=(a,g,y)=>{if(g.has(a))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(a):g.set(a,y)},A=(a,g,y,R)=>(X(a,g,"write to private field"),R?R.call(a,y):g.set(a,y),y);var F=(a,g,y)=>(X(a,g,"access private method"),y);(function(a,g){typeof exports=="object"&&typeof module!="undefined"?g(exports):typeof define=="function"&&define.amd?define(["exports"],g):(a=typeof globalThis!="undefined"?globalThis:a||self,g(a.PlumeJS={}))})(this,function(a){var x,ae,L,H,V,U,le,D,ce,I,J,W,C,E,z,ue;"use strict";const{html:g,render:y}=(()=>{const s=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,t="attr",r=/^attr([^ ]+)/,l="insertNode",c=/^insertNode([^ ]+)/,h=d=>{const i={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let f=JSON.stringify(d);const o=u=>i[u]||u;return f=(u=>u.replace(/[&<>\(\)]/g,o))(f),JSON.parse(f)},b=(d,i)=>{var m;const f=d.options,o=Array.isArray(i)?i:[i];let S,u,p=f.length;for(;p--;){u=f[p];const T=(m=u.getAttribute("value"))!=null?m:(u.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(u.selected=o.indexOf(T)>-1)&&(S=!0)}S||(d.selectedIndex=-1)},v=d=>{const i=document.createElement("template");return i.innerHTML=d,i.content},P=(d,i)=>{const f=document.createTreeWalker(d,NodeFilter.SHOW_ELEMENT,null);let o=f.nextNode();for(;o;){if(o.hasAttributes()){const S=Array.from(o.attributes).filter(u=>r.test(u.nodeName));for(const{nodeName:u,nodeValue:p}of S){const m=r.exec(u)[1];switch(!0){case/^on+/.test(p):{const T=p.slice(2).toLowerCase();o.removeEventListener(T,i[m]),T!=="bindprops"?o.addEventListener(T,i[m]):o.addEventListener(T,j=>{j.detail.setProps(i[m]())});break}case/ref/.test(p):{o.tagName.includes("-")?o.addEventListener("load",T=>{i[m](T.detail)}):i[m](o);break}case/^data-+/.test(p):{o.setAttribute(`data-${p}`,h(i[m]));break}case/^aria-+/.test(p):{o.setAttribute(`aria-${p}`,h(i[m]));break}case/class/.test(p):{i[m]?o.classList.add(...i[m].split(" ")):o.setAttribute("class","");break}case/value/.test(p):{o.nodeName.toLowerCase()==="select"?b(o,i[m]):o.value=h(i[m]);break}case/disabled/.test(p):case/checked/.test(p):{i[m]?o.setAttribute(p,i[m]):o.removeAttribute(p);break}default:o.setAttribute(p,h(i[m]))}o.removeAttribute(u)}}o=f.nextNode()}},k=(d,i)=>{const f=document.createTreeWalker(d,NodeFilter.SHOW_COMMENT,null);let o=f.nextNode(),S;for(;o;){if(S=c.exec(o.data)){const u=Array.isArray(i[S[1]])?i[S[1]]:[i[S[1]]];o.replaceWith(...u),f.currentNode=d}o=f.nextNode()}},N=d=>d.nodeType===3?"text":d.nodeType===8?"comment":d.tagName.toLowerCase(),O=d=>d.childNodes&&d.childNodes.length>0?null:d.textContent,q=(d,i)=>{const f=i?Array.from(i.childNodes):[],o=d?Array.from(d.childNodes):[];let S=f.length-o.length;if(S>0)for(;S>0;S--)f[f.length-S].parentNode.removeChild(f[f.length-S]);o.forEach(function(u,p){const m=f[p];if(!m){i&&i.appendChild(u);return}if(N(u)!==N(m)){m.replaceWith(u);return}const T=O(u);if(T&&T!==O(m)){m.textContent=T;return}if(m.childNodes.length>0&&u.childNodes.length<1){m.innerHTML="";return}if(m.childNodes.length<1&&u.childNodes.length>0){const j=document.createDocumentFragment();q(u,j),m.appendChild(j);return}if(u.childNodes.length>0){q(u,m);return}})};return{html:(d,...i)=>{let f="";const{length:o}=d;for(let u=1;u<o;u++){const p=i[u-1];let m=!1;if(f+=d[u-1],s.test(f)&&e.test(f)&&(f=f.replace(s,(T,j,oe)=>`${t}${u-1}=${oe||'"'}${j}${oe?"":'"'}`),m=!0),!m)switch(!0){case Array.isArray(p):case p instanceof DocumentFragment:{f+=`<!--${l}${u-1}-->`;break}case(typeof p=="object"&&p!==null):{"html"in p&&(f+=p.html);break}default:f+=p}}f+=d[o-1];const S=v(f.trim());return P(S,i),k(S,i),S},render:(d,i)=>{d.children.length?q(i,d):(d.innerHTML="",d.appendChild(i))}}})(),R=new class{constructor(){_(this,"globalStyles");_(this,"globalStyleTag");_(this,"style_registry");_(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(s=""){let e=[];const t=new CSSStyleSheet;if(t.insertRule(":host { display: block; }"),e=[this.globalStyles,t],s){const r=new CSSStyleSheet;r.replace(s),e.push(r)}return e}},Y=new(ae=class{constructor(){w(this,x,void 0);A(this,x,new WeakMap)}register(s,e){if(!n(this,x).get(s))n(this,x).set(s,e);else throw console.error(s),"service already exists"}getService(s){const e=n(this,x).get(s);if(e)return e;throw console.error(s),"service is not a registered service."}clear(){A(this,x,new WeakMap)}},x=new WeakMap,ae),he=s=>typeof s=="function",de=s=>{const e=s.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(t=>t.trim()):[]},B=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),Z=(s,e,t,r=!1)=>(s.addEventListener(e,t,r),()=>{s.removeEventListener(e,t,r)}),ee=(s,e,t)=>{if(e.length>0){const r=[];for(const h of e)h.__metadata__?r.push(t):r.push(Y.getService(h));const l=de(s),c=new s(...r);return e.forEach((h,b)=>{c[l[b]]=r[b]}),c}else return new s};class G{constructor(){_(this,"shadowRoot");_(this,"update");_(this,"emitEvent")}static get __metadata__(){return{name:"Renderer"}}}const fe={selector:"",root:!1,styles:"",deps:[],standalone:!1},te=(s,e)=>{const t=document.createElement("style");return t.innerHTML=s,e&&e.appendChild(t),t},se=(s,e)=>{var t,r,l,c;if(!window.customElements.get(s.selector)){if(s={...fe,...s},s.styles=s.styles.toString(),s.root&&!R.isRootNodeSet)R.isRootNodeSet=!0,s.styles&&(R.globalStyles.replace(s.styles),R.globalStyleTag=te(s.styles,document.head));else if(s.root&&R.isRootNodeSet)throw Error("Cannot register duplicate root component in "+s.selector+" component");window.customElements.define(s.selector,(c=class extends HTMLElement{constructor(){super();w(this,t,void 0);w(this,r,void 0);w(this,l,void 0);A(this,r,this.attachShadow({mode:"open"})),B||(n(this,r).adoptedStyleSheets=R.getComputedCss(s.styles,s.standalone)),this.getInstance=this.getInstance.bind(this)}static get observedAttributes(){return e.observedAttributes||[]}emulateComponent(){B&&s.styles&&A(this,l,te(s.styles))}update(){y(n(this,r),(()=>n(this,t).render())()),B&&(s.styles&&n(this,r).insertBefore(n(this,l),n(this,r).childNodes[0]),R.globalStyleTag&&!s.standalone&&n(this,r).insertBefore(document.importNode(R.globalStyleTag,!0),n(this,r).childNodes[0]))}emitEvent(b,v){const P=new CustomEvent(b,{detail:v});this.dispatchEvent(P)}setProps(b){var v,P;for(const[k,N]of Object.entries(b))n(this,t)[k]=N;(P=(v=n(this,t)).onPropsChanged)==null||P.call(v),this.update()}getInstance(){return n(this,t)}connectedCallback(){var b,v,P,k;if(this.isConnected){this.emitEvent("load",this),this.emulateComponent();const N=new G;N.shadowRoot=n(this,r),N.update=()=>{this.update()},N.emitEvent=(O,q)=>{this.emitEvent(O,q)},A(this,t,ee(e,s.deps,N)),(v=(b=n(this,t)).beforeMount)==null||v.call(b),this.update(),(k=(P=n(this,t)).mount)==null||k.call(P),this.emitEvent("bindprops",{setProps:O=>{this.setProps(O)}},!1)}}attributeChangedCallback(b,v,P){var k,N;(N=(k=n(this,t)).onNativeAttributeChanges)==null||N.call(k,b,v,P)}disconnectedCallback(){var b,v;(v=(b=n(this,t)).unmount)==null||v.call(b)}},t=new WeakMap,r=new WeakMap,l=new WeakMap,c))}},re={deps:[]},K=(...s)=>{let e={...re},t;if(s[0].hasOwnProperty("deps")?(e={...re,...s[0]},t=s[1]):t=s[0],t){const r=ee(t,e.deps);Y.register(t,r)}else throw new Error("error: Requires constructor to define service")},$=class{static checkParams(e,t){let r=0,l={},c=t.ParamCount;for(let b=0;b<e.length;b++){var h=t.Params[b];h.indexOf(":")>=0&&(l[h.split(":")[1]]=e[b].split("?")[0],r+=1)}return r===c?l:{}}static getParamCount(e){let t=0;return e.forEach(r=>{r.indexOf(":")>=0&&(t+=1)}),t}static formatRoute(e){let t={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(t.Params=e.path.split("/").filter(r=>r.length>0),t.Url=e.path,t.Template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.Template=e.template,t.TemplatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.ParamCount=$.getParamCount(t.Params),$.routeList.push(t)}static preloadRoutes(){for(const e of $.routeList)e.TemplatePath&&e.TemplatePath()}};let M=$;_(M,"routeList",[]);const me=s=>!!s&&typeof s.subscribe=="function",ge=s=>!!s&&typeof s.then=="function",be=s=>({subscribe:e=>{e(s)}}),pe=s=>({subscribe:e=>{Promise.resolve(s).then(t=>{e(t)})}});class ye{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const ne=s=>me(s)?s:ge(s)?pe(Promise.resolve(s)):be(s);class Q{constructor(){w(this,U);w(this,D);w(this,I);w(this,L,{path:"",routeParams:new Map,queryParams:new Map,state:{}});w(this,H,new ye);w(this,V,void 0)}startHashChange(){A(this,V,Z(window,"hashchange",()=>{F(this,U,le).call(this)}))}stopHashChange(){n(this,V).call(this)}getTemplate(){return n(this,H).asObservable()}getCurrentRoute(){return n(this,L)}navigateTo(e="",t){e?(window.location.hash.replace(/^#/,"")===e&&F(this,I,J).call(this,e,t),window.location.hash="#"+e):F(this,I,J).call(this,e,t)}}L=new WeakMap,H=new WeakMap,V=new WeakMap,U=new WeakSet,le=function(){const e=window.location.hash.replace(/^#/,"");F(this,I,J).call(this,e,null)},D=new WeakSet,ce=function(e,t){if(e){let r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return t.match(r)}else return e===t},I=new WeakSet,J=function(e,t){let r=e.split("/").filter(h=>h.length>0),l=M.routeList.filter(h=>{if(h.Params.length===r.length&&F(this,D,ce).call(this,h.Url,e))return h;if(h.Url===e)return h}),c=l.length>0?l[0]:null;c&&(n(this,L).path=e,n(this,L).state={...t||{}},ne(c.canActivate()).subscribe(h=>{if(!h)return;let b=M.checkParams(r,c);if(Object.keys(b).length>0||e){n(this,L).routeParams=new Map(Object.entries(b));const v=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];n(this,L).queryParams=new Map(v),c.IsRegistered?n(this,H).next(c.Template):c.TemplatePath&&ne(c.TemplatePath()).subscribe(()=>{c.IsRegistered=!0,n(this,H).next(c.Template)})}else this.navigateTo(c.redirectTo)}))},K(Q);class ie{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}registerRoutes(e,t=!1){if(Array.isArray(e)){for(let r of e)M.formatRoute(r);t&&M.preloadRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}K({deps:[Q]},ie);const ve=()=>{var e,t;class s{constructor(l,c){w(this,e,"");w(this,t,void 0);_(this,"update")}beforeMount(){A(this,t,this.internalRouterSrvc.getTemplate().subscribe(l=>{A(this,e,l),this.renderer.update()})),this.internalRouterSrvc.startHashChange()}mount(){let l=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(l)}unmount(){n(this,t).call(this),this.internalRouterSrvc.stopHashChange()}render(){if(n(this,e)){const l=[`${n(this,e)}`];return l.raw=[`${n(this,e)}`],g(l)}else return g``}}e=new WeakMap,t=new WeakMap,se({selector:"router-outlet",deps:[Q,G]},s)},Se=s=>{let e=s;return[e,r=>{let l;he(r)?l=r(e):l=r,Object.assign(e,l)}]},we=s=>{let e;switch(s.nodeName&&s.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(s.type)?e=s.checked?s.value!==null&&s.value!=="on"?s.value:!0:!1:e=s.value;break}case"select":{const t=s.type==="select-one",l=[...Array.from(s.options)].filter(c=>c.selected).map(c=>{var h;return(h=c.value)!=null?h:(c.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")});e=t?l[0]:l;break}default:{e=s.value;break}}return e};class Ce{constructor(e,t){w(this,z);w(this,W,void 0);w(this,C,void 0);w(this,E,new Map);A(this,W,e),A(this,C,t)}get errors(){return n(this,E)}get valid(){return F(this,z,ue).call(this),!n(this,E).size}get value(){const e={};for(const[t,r]of Object.entries(n(this,C)))e[t]=r.value;return e}get(e){return n(this,C)[e]}reset(e={}){for(const t in n(this,C))n(this,C)[t].value=e[t]||n(this,W)[t];n(this,E).clear()}}W=new WeakMap,C=new WeakMap,E=new WeakMap,z=new WeakSet,ue=function(){n(this,E).clear();for(const e in n(this,C)){const t=n(this,C)[e].value,r=n(this,C)[e].validators;n(this,C)[e].errors=null;for(const l of r){const c=l(t);c!==null&&(n(this,E).has(e)?(n(this,E).set(e,{...n(this,E).get(e),...c}),n(this,C)[e].errors={...n(this,C)[e].errors,...c}):(n(this,E).set(e,c),n(this,C)[e].errors=c))}}};const Te=s=>{const e={},t={};for(const[h,b]of Object.entries(s)){const v=Array.isArray(b)?b:[b];e[h]={value:v.shift(),validators:v},t[h]=e[h].value}const r=new Ce(t,e);return[r,h=>b=>{const v=we(b.target);r.get(h).value=v},()=>{r.reset()}]};class Ne{static required(e){return e.length?null:{required:!0}}static min(e){return t=>t.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return t=>t.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return t=>new RegExp(e).test(t)?null:{pattern:!0}}}a.Component=se,a.Renderer=G,a.Router=ie,a.Service=K,a.Validators=Ne,a.fromNativeEvent=Z,a.html=g,a.registerRouterComponent=ve,a.render=y,a.useFormFields=Te,a.useState=Se,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
