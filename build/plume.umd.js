var Re=Object.defineProperty;var Pe=(i,g,y)=>g in i?Re(i,g,{enumerable:!0,configurable:!0,writable:!0,value:y}):i[g]=y;var A=(i,g,y)=>(Pe(i,typeof g!="symbol"?g+"":g,y),y),Y=(i,g,y)=>{if(!g.has(i))throw TypeError("Cannot "+y)};var n=(i,g,y)=>(Y(i,g,"read from private field"),y?y.call(i):g.get(i)),w=(i,g,y)=>{if(g.has(i))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(i):g.set(i,y)},R=(i,g,y,j)=>(Y(i,g,"write to private field"),j?j.call(i,y):g.set(i,y),y);var x=(i,g,y)=>(Y(i,g,"access private method"),y);(function(i,g){typeof exports=="object"&&typeof module!="undefined"?g(exports):typeof define=="function"&&define.amd?define(["exports"],g):(i=typeof globalThis!="undefined"?globalThis:i||self,g(i.PlumeJS={}))})(this,function(i){var L,ie,M,H,V,U,le,D,ce,I,J,W,C,T,z,ue;"use strict";const{html:g,render:y}=(()=>{const s=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,t="attr",r=/^attr([^ ]+)/,c="insertNode",h=/^insertNode([^ ]+)/,m=p=>{const l={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let a=JSON.stringify(p);const u=d=>l[d]||d;return a=(d=>d.replace(/[&<>\(\)]/g,u))(a),JSON.parse(a)},f=(p,l)=>{var b;const a=p.options,u=Array.isArray(l)?l:[l];let S,d,o=a.length;for(;o--;){d=a[o];const E=(b=d.getAttribute("value"))!=null?b:(d.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(d.selected=u.indexOf(E)>-1)&&(S=!0)}S||(p.selectedIndex=-1)},v=p=>{const l=document.createElement("template");return l.innerHTML=p,l.content},N=(p,l)=>{const a=document.createTreeWalker(p,NodeFilter.SHOW_ELEMENT,null);let u=a.nextNode();for(;u;){if(u.hasAttributes()){const S=Array.from(u.attributes).filter(d=>r.test(d.nodeName));for(const{nodeName:d,nodeValue:o}of S){const b=r.exec(d)[1];switch(!0){case/^on+/.test(o):{const E=o.slice(2).toLowerCase();u.removeEventListener(E,l[b]),E!=="bindprops"?u.addEventListener(E,l[b]):u.addEventListener(E,X=>{X.detail.setProps(l[b]())});break}case/ref/.test(o):{l[b](u);break}case/^data-+/.test(o):{u.setAttribute(`data-${o}`,m(l[b]));break}case/^aria-+/.test(o):{u.setAttribute(`aria-${o}`,m(l[b]));break}case/class/.test(o):{l[b]?u.classList.add(...l[b].split(" ")):u.setAttribute("class","");break}case/value/.test(o):{u.nodeName.toLowerCase()==="select"?f(u,l[b]):u.value=m(l[b]);break}case/disabled/.test(o):case/checked/.test(o):{l[b]?u.setAttribute(o,l[b]):u.removeAttribute(o);break}default:u.setAttribute(o,m(l[b]))}u.removeAttribute(d)}}u=a.nextNode()}},_=(p,l)=>{const a=document.createTreeWalker(p,NodeFilter.SHOW_COMMENT,null);let u=a.nextNode(),S;for(;u;){if(S=h.exec(u.data)){const d=Array.isArray(l[S[1]])?l[S[1]]:[l[S[1]]];u.replaceWith(...d),a.currentNode=p}u=a.nextNode()}},P=p=>p.nodeType===3?"text":p.nodeType===8?"comment":p.tagName.toLowerCase(),O=p=>p.childNodes&&p.childNodes.length>0?null:p.textContent,q=(p,l)=>{const a=Array.prototype.slice.call(l.childNodes),u=Array.prototype.slice.call(p.childNodes),S=a.length-u.length;if(S>0)for(;S>0;S--)a[a.length-S].parentNode.removeChild(a[a.length-S]);u.forEach(function(d,o){if(!a[o]){l.appendChild(d.cloneNode(!0));return}if(P(d)!==P(a[o])){a[o].parentNode.replaceChild(d.cloneNode(!0),a[o]);return}const b=O(d);if(b&&b!==O(a[o])&&(a[o].textContent=b),a[o].childNodes.length>0&&d.childNodes.length<1){a[o].innerHTML="";return}if(a[o].childNodes.length<1&&d.childNodes.length>0){const E=document.createDocumentFragment();q(d,E),a[o].appendChild(E);return}d.childNodes.length>0&&q(d,a[o])})};return{html:(p,...l)=>{let a="";const{length:u}=p;for(let d=1;d<u;d++){const o=l[d-1];let b=!1;if(a+=p[d-1],s.test(a)&&e.test(a)&&(a=a.replace(s,(E,X,oe)=>`${t}${d-1}=${oe||'"'}${X}${oe?"":'"'}`),b=!0),!b)switch(!0){case Array.isArray(o):case o instanceof DocumentFragment:{a+=`<!--${c}${d-1}-->`;break}case(typeof o=="object"&&o!==null):{"html"in o&&(a+=o.html);break}default:a+=o}}a+=p[u-1];const S=v(a.trim());return N(S,l),_(S,l),S},render:(p,l)=>{p.children.length?q(l,p):(p.innerHTML="",p.appendChild(l))}}})(),j=new(ie=class{constructor(){w(this,L,void 0);R(this,L,new WeakMap)}register(s,e){if(!n(this,L).get(s))n(this,L).set(s,e);else throw console.error(s),"service already exists"}getService(s){const e=n(this,L).get(s);if(e)return e;throw console.error(s),"service is not a registered service."}clear(){R(this,L,new WeakMap)}},L=new WeakMap,ie),he=s=>typeof s=="function",de=s=>{const e=s.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(t=>t.trim()):[]},B=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),Z=(s,e,t,r=!1)=>(s.addEventListener(e,t,r),()=>{s.removeEventListener(e,t,r)}),ee=(s,e,t)=>{if(e.length>0){const r=[];for(const m of e)m.__metadata__?r.push(t):r.push(j.getService(m));const c=de(s),h=new s(...r);return e.forEach((m,f)=>{h[c[f]]=r[f]}),h}else return new s},k=new class{constructor(){A(this,"globalStyles");A(this,"globalStyleTag");A(this,"style_registry");A(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(s=""){let e=[];const t=new CSSStyleSheet;if(t.insertRule(":host { display: block; }"),e=[this.globalStyles,t],s){const r=new CSSStyleSheet;r.replace(s),e.push(r)}return e}};class G{constructor(){A(this,"shadowRoot");A(this,"update");A(this,"emitEvent")}static get __metadata__(){return{name:"Renderer"}}}const fe={selector:"",root:!1,styles:"",deps:[],standalone:!1},te=(s,e)=>{const t=document.createElement("style");return t.innerHTML=s,e&&e.appendChild(t),t},se=(s,e)=>{var t,r,c,h;if(!window.customElements.get(s.selector)){if(s={...fe,...s},s.styles=s.styles.toString(),s.root&&!k.isRootNodeSet)k.isRootNodeSet=!0,s.styles&&(k.globalStyles.replace(s.styles),k.globalStyleTag=te(s.styles,document.head));else if(s.root&&k.isRootNodeSet)throw Error("Cannot register duplicate root component in "+s.selector+" component");window.customElements.define(s.selector,(h=class extends HTMLElement{constructor(){super();w(this,t,void 0);w(this,r,void 0);w(this,c,void 0);R(this,r,this.attachShadow({mode:"open"})),B||(n(this,r).adoptedStyleSheets=k.getComputedCss(s.styles,s.standalone)),this.getInstance=this.getInstance.bind(this)}static get observedAttributes(){return e.observedAttributes||[]}emulateComponent(){B&&s.styles&&R(this,c,te(s.styles))}connectedCallback(){var v,N,_,P;this.emulateComponent();const f=new G;f.shadowRoot=n(this,r),f.update=()=>{this.update()},f.emitEvent=(O,q)=>{this.emitEvent(O,q)},R(this,t,ee(e,s.deps,f)),(N=(v=n(this,t)).beforeMount)==null||N.call(v),this.update(),(P=(_=n(this,t)).mount)==null||P.call(_),this.emitEvent("bindprops",{setProps:O=>{this.setProps(O)}},!1)}update(){y(n(this,r),(()=>n(this,t).render())()),B&&(s.styles&&n(this,r).insertBefore(n(this,c),n(this,r).childNodes[0]),k.globalStyleTag&&!s.standalone&&n(this,r).insertBefore(document.importNode(k.globalStyleTag,!0),n(this,r).childNodes[0]))}emitEvent(f,v){const N=new CustomEvent(f,{detail:v});this.dispatchEvent(N)}setProps(f){var v,N;for(const[_,P]of Object.entries(f))n(this,t)[_]=P;(N=(v=n(this,t)).onPropsChanged)==null||N.call(v),this.update()}getInstance(){return n(this,t)}attributeChangedCallback(f,v,N){var _,P;(P=(_=n(this,t)).onNativeAttributeChanges)==null||P.call(_,f,v,N)}disconnectedCallback(){var f,v;(v=(f=n(this,t)).unmount)==null||v.call(f)}},t=new WeakMap,r=new WeakMap,c=new WeakMap,h))}},re={deps:[]},K=(...s)=>{let e={...re},t;if(s[0].hasOwnProperty("deps")?(e={...re,...s[0]},t=s[1]):t=s[0],t){const r=ee(t,e.deps);j.register(t,r)}else throw new Error("error: Requires constructor to define service")},$=class{static checkParams(e,t){let r=0,c={},h=t.ParamCount;for(let f=0;f<e.length;f++){var m=t.Params[f];m.indexOf(":")>=0&&(c[m.split(":")[1]]=e[f].split("?")[0],r+=1)}return r===h?c:{}}static getParamCount(e){let t=0;return e.forEach(r=>{r.indexOf(":")>=0&&(t+=1)}),t}static formatRoute(e){let t={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(t.Params=e.path.split("/").filter(r=>r.length>0),t.Url=e.path,t.Template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.Template=e.template,t.TemplatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.ParamCount=$.getParamCount(t.Params),$.routeList.push(t)}static preloadRoutes(){for(const e of $.routeList)e.TemplatePath&&e.TemplatePath()}};let F=$;A(F,"routeList",[]);const me=s=>!!s&&typeof s.subscribe=="function",ge=s=>!!s&&typeof s.then=="function",pe=s=>({subscribe:e=>{e(s)}}),be=s=>({subscribe:e=>{Promise.resolve(s).then(t=>{e(t)})}});class ye{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const ne=s=>me(s)?s:ge(s)?be(Promise.resolve(s)):pe(s);class Q{constructor(){w(this,U);w(this,D);w(this,I);w(this,M,{path:"",routeParams:new Map,queryParams:new Map,state:{}});w(this,H,new ye);w(this,V,void 0)}startHashChange(){R(this,V,Z(window,"hashchange",()=>{x(this,U,le).call(this)}))}stopHashChange(){n(this,V).call(this)}getTemplate(){return n(this,H).asObservable()}getCurrentRoute(){return n(this,M)}navigateTo(e="",t){e?(window.location.hash.replace(/^#/,"")===e&&x(this,I,J).call(this,e,t),window.location.hash="#"+e):x(this,I,J).call(this,e,t)}}M=new WeakMap,H=new WeakMap,V=new WeakMap,U=new WeakSet,le=function(){const e=window.location.hash.replace(/^#/,"");x(this,I,J).call(this,e,null)},D=new WeakSet,ce=function(e,t){if(e){let r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return t.match(r)}else return e===t},I=new WeakSet,J=function(e,t){let r=e.split("/").filter(m=>m.length>0),c=F.routeList.filter(m=>{if(m.Params.length===r.length&&x(this,D,ce).call(this,m.Url,e))return m;if(m.Url===e)return m}),h=c.length>0?c[0]:null;h&&(n(this,M).path=e,n(this,M).state={...t||{}},ne(h.canActivate()).subscribe(m=>{if(!m)return;let f=F.checkParams(r,h);if(Object.keys(f).length>0||e){n(this,M).routeParams=new Map(Object.entries(f));const v=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];n(this,M).queryParams=new Map(v),h.IsRegistered?n(this,H).next(h.Template):h.TemplatePath&&ne(h.TemplatePath()).subscribe(()=>{h.IsRegistered=!0,n(this,H).next(h.Template)})}else this.navigateTo(h.redirectTo)}))},K(Q);class ae{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}registerRoutes(e,t=!1){if(Array.isArray(e)){for(let r of e)F.formatRoute(r);t&&F.preloadRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}K({deps:[Q]},ae);const ve=()=>{var e,t;class s{constructor(c,h){w(this,e,"");w(this,t,void 0);A(this,"update")}beforeMount(){R(this,t,this.internalRouterSrvc.getTemplate().subscribe(c=>{R(this,e,c),this.renderer.update()})),this.internalRouterSrvc.startHashChange()}mount(){let c=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(c)}unmount(){n(this,t).call(this),this.internalRouterSrvc.stopHashChange()}render(){if(n(this,e)){const c=[`${n(this,e)}`];return c.raw=[`${n(this,e)}`],g(c)}else return g``}}e=new WeakMap,t=new WeakMap,se({selector:"router-outlet",deps:[Q,G]},s)},Se=s=>{let e=s;return[e,r=>{let c;he(r)?c=r(e):c=r,Object.assign(e,c)}]},we=s=>{let e;switch(s.nodeName&&s.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(s.type)?e=s.checked?s.value!==null&&s.value!=="on"?s.value:!0:!1:e=s.value;break}case"select":{const t=s.type==="select-one",c=[...Array.from(s.options)].filter(h=>h.selected).map(h=>{var m;return(m=h.value)!=null?m:(h.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")});e=t?c[0]:c;break}default:{e=s.value;break}}return e};class Ce{constructor(e,t){w(this,z);w(this,W,void 0);w(this,C,void 0);w(this,T,new Map);R(this,W,e),R(this,C,t)}get errors(){return n(this,T)}get valid(){return x(this,z,ue).call(this),!n(this,T).size}get value(){const e={};for(const[t,r]of Object.entries(n(this,C)))e[t]=r.value;return e}get(e){return n(this,C)[e]}reset(e={}){for(const t in n(this,C))n(this,C)[t].value=e[t]||n(this,W)[t];n(this,T).clear()}}W=new WeakMap,C=new WeakMap,T=new WeakMap,z=new WeakSet,ue=function(){n(this,T).clear();for(const e in n(this,C)){const t=n(this,C)[e].value,r=n(this,C)[e].validators;n(this,C)[e].errors=null;for(const c of r){const h=c(t);h!==null&&(n(this,T).has(e)?(n(this,T).set(e,{...n(this,T).get(e),...h}),n(this,C)[e].errors={...n(this,C)[e].errors,...h}):(n(this,T).set(e,h),n(this,C)[e].errors=h))}}};const Te=s=>{const e={},t={};for(const[m,f]of Object.entries(s)){const v=Array.isArray(f)?f:[f];e[m]={value:v.shift(),validators:v},t[m]=e[m].value}const r=new Ce(t,e);return[r,m=>f=>{const v=we(f.target);r.get(m).value=v},()=>{r.reset()}]};class Ne{static required(e){return e.length?null:{required:!0}}static min(e){return t=>t.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return t=>t.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return t=>new RegExp(e).test(t)?null:{pattern:!0}}}i.Component=se,i.Renderer=G,i.Router=ae,i.Service=K,i.Validators=Ne,i.fromNativeEvent=Z,i.html=g,i.registerRouterComponent=ve,i.render=y,i.useFormFields=Te,i.useState=Se,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
