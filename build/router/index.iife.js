var Et=Object.defineProperty;var Tt=(p,b,y)=>b in p?Et(p,b,{enumerable:!0,configurable:!0,writable:!0,value:y}):p[b]=y;var w=(p,b,y)=>(Tt(p,typeof b!="symbol"?b+"":b,y),y),K=(p,b,y)=>{if(!b.has(p))throw TypeError("Cannot "+y)};var m=(p,b,y)=>(K(p,b,"read from private field"),y?y.call(p):b.get(p)),M=(p,b,y)=>{if(b.has(p))throw TypeError("Cannot add the same private member more than once");b instanceof WeakSet?b.add(p):b.set(p,y)},N=(p,b,y,D)=>(K(p,b,"write to private field"),D?D.call(p,y):b.set(p,y),y);var Y=(p,b,y)=>(K(p,b,"access private method"),y);var plumejs_router=function(p){var L,ct;"use strict";const b=s=>!!s&&typeof s.subscribe=="function",y=s=>!!s&&typeof s.then=="function",D=s=>{const t=s.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return t.length===3?t[1].split(",").map(e=>e.trim()):[]},dt=(()=>{try{return new CSSStyleSheet,!0}catch{return!1}})(),ft=s=>({subscribe:t=>{t(s)}}),pt=s=>({subscribe:t=>{Promise.resolve(s).then(e=>{t(e)})}}),q=()=>Math.random().toString(36).substring(2);class G{constructor(){w(this,"_callbackCollection",{})}unsubscribe(t){delete this._callbackCollection[t]}asObservable(){return{subscribe:t=>this.subscribe(t)}}subscribe(t){const e=q();return this._callbackCollection[e]=t,()=>this.unsubscribe(e)}next(t){for(const e in this._callbackCollection)this._callbackCollection[e](t)}}class X extends G{constructor(e){super();w(this,"_initialValue");this._initialValue=e}subscribe(e){const i=super.subscribe(e);return super.next(this._initialValue),i}next(e){this._initialValue=e,super.next(e)}}class Z{constructor(){w(this,"_subcribers",[])}add(t){this._subcribers.push(t)}unsubscribe(){for(const t of this._subcribers)t();this._subcribers=[]}}const V=s=>b(s)?s:y(s)?pt(Promise.resolve(s)):ft(s),Q=(s,t,e,i=!1)=>(s.addEventListener(t,e,i),()=>{s.removeEventListener(t,e,i)}),gt=s=>{const t=()=>new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),e=l=>{const R=l.querySelectorAll("script");for(const v of R)v.remove()},i=(l,R)=>{if(R=R.replace(/\s+/g,"").toLowerCase(),["src","href","xlink:href"].includes(l)&&(R.includes("javascript:")||R.includes("data:"))||l.startsWith("on"))return!0},h=l=>{const R=l.attributes;for(const{name:v,value:j}of R)i(v,j)&&l.removeAttribute(v)},f=l=>{const R=l.children;for(const v of R)h(v),f(v)},a=t();return e(a),f(a),a.innerHTML},bt=(s,t)=>{const e=D(t),i=()=>({get(h,f){const a=Object.prototype.toString.call(h[f]);return["[object Object]","[object Array]"].indexOf(a)>-1&&!("__metadata__"in h[f])?new Proxy(h[f],i()):h[f]},set(h,f,a){return h[f]=a,s(),!0}});return class extends t{constructor(...h){return super(...h),h.forEach((f,a)=>{e[a]&&e[a]!=="undefined"&&(this[e[a]]=f)}),new Proxy(this,i())}}},tt=Object.create(null);let F=null;function mt(s,t){const e=F;let i;F=q(),tt[F]=s;try{t()}finally{i=F,F=e}return i}function yt(s,t){const e=mt(s,t);return function(){delete tt[e]}}const et=new(ct=class{constructor(){M(this,L,void 0);N(this,L,new WeakMap)}register(s,t){if(!m(this,L).get(s))m(this,L).set(s,t);else throw console.error(s),"service already exists"}getService(s){const t=m(this,L).get(s);if(t)return t;throw console.error(s),"service is not a registered service."}clear(){N(this,L,new WeakMap)}},L=new WeakMap,ct),st=(s,t,e)=>{if(t.length>0){const i=[];for(const a of t)a.prototype.__metadata__.name!=="RENDERER"?i.push(et.getService(a)):i.push(e);const h=D(s),f=new s(...i);return t.forEach((a,l)=>{f[h[l]]=i[l]}),f}else return new s},H=new class{constructor(){w(this,"globalStyles");w(this,"globalStyleTag");w(this,"style_registry");w(this,"isRootNodeSet");try{this.globalStyles=new CSSStyleSheet}catch{this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss(s=""){let t=[];const e=new CSSStyleSheet;if(e.insertRule(":host { display: block; }"),t=[this.globalStyles,e],s){const i=new CSSStyleSheet;i.replace(s),t.push(i)}return t}},{html:At,render:_t}=(()=>{const s=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,t=/<[a-z][^>]+$/i,e="attr",i=/^attr([^ ]+)/,h="insertNode",f=/^insertNode([^ ]+)/;let a=[],l=[];const R=r=>{const n={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let o=JSON.stringify(r);const c=d=>n[d]||d;return o=(d=>d.replace(/[&<>\(\)]/g,c))(o),JSON.parse(o)},v=(r,n)=>{const o=r.options,c=Array.isArray(n)?n:[n];let g,d,u=o.length;for(;u--;){d=o[u];const A=d.getAttribute("value")??(d.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(d.selected=c.indexOf(A)>-1)&&(g=!0)}g||(r.selectedIndex=-1)},j=r=>{const n=document.createElement("template");return n.innerHTML=r,n.content},O=(r,n,o)=>{const c=()=>{setTimeout(()=>{if(r.isConnected){const g=new CustomEvent("bindprops",{detail:{props:n},bubbles:!1});r.dispatchEvent(g)}})};r[o]=JSON.stringify(n),l.push(c)},W=(r,n,o)=>{switch(!0){case/attrs/.test(n):{const c=o.attrs;for(const g in c)W(r,g,c[g]);break}case/^on+/.test(n):{const c=n.slice(2).toLowerCase();r.removeEventListener(c,o),r.addEventListener(c,o);break}case/ref/.test(n):{const c=function(){this.node.isConnected&&this.fn(this.node)}.bind({node:r,fn:o});a.push(c);break}case/key/.test(n):{r[Symbol("key")]=o;break}case/^data-+/.test(n):case/^aria-+/.test(n):{n==="data-input"?O(r,o,Symbol("input")):r.setAttribute(n,R(o));break}case/class/.test(n):{o?r.classList.add(...o.split(" ")):r.setAttribute("class","");break}case/value/.test(n):{r.nodeName.toLowerCase()==="select"?v(r,o):r.value=R(o);break}case/disabled/.test(n):case/checked/.test(n):{o?r.setAttribute(n,o):r.removeAttribute(n);break}default:r.setAttribute(n,R(o))}},_=(r,n)=>{const o=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,null);let c=o.nextNode();for(;c;){if(c.hasAttributes()){const g=Array.from(c.attributes).filter(d=>i.test(d.nodeName));for(const{nodeName:d,nodeValue:u}of g){const A=i.exec(d)[1];W(c,u,n[A]),c.removeAttribute(d)}}c=o.nextNode()}},E=(r,n)=>{const o=document.createTreeWalker(r,NodeFilter.SHOW_COMMENT,null);let c=o.nextNode(),g;for(;c;){if(g=f.exec(c.data)){const d=Array.isArray(n[g[1]])?n[g[1]]:[n[g[1]]];c.replaceWith(...d),o.currentNode=r}c=o.nextNode()}},S=(r,n)=>{if(!r)return[null,""];const o=Object.getOwnPropertySymbols(r).find(g=>g.description===n),c=o?r[o]:"";return[o,c]},x=(r,n)=>{if(!r||!n||r.nodeType!==1||n.nodeType!==1)return;const o=r.attributes,c=n.attributes,g=n.getAttribute("data-preserve-attributes"),d=g&&g==="true";for(const{name:u,value:A}of o)(!c[u]||c[u]!==A)&&n.setAttribute(u,A);if(!d)for(const{name:u}of c)o[u]||n.removeAttribute(u);if(["input","textarea"].includes(n.tagName.toLowerCase())&&(n.value=r.value),n.tagName.indexOf("-")>-1&&r.tagName.indexOf("-")>-1){const u=S(r,"input")[1],A=S(n,"input");u&&A[1]&&u!==A[1]&&O(n,JSON.parse(u),A[0])}},P=r=>r.nodeType===3?"text":r.nodeType===8?"comment":r.tagName.toLowerCase(),k=r=>r.childNodes&&r.childNodes.length>0?null:r.textContent,J=(r,n,o)=>{const c=n?Array.from(n.childNodes):[],g=r?Array.from(r.childNodes):[];let d=c.length-g.length;if(d>0)for(;d>0;d--)c[c.length-d].parentNode.removeChild(c[c.length-d]);g.forEach(function(u,A){const T=c[A],B=S(u,"key")[1],$=S(T,"key")[1];if(x(u,T),o&&T&&T.nodeType===1&&T.tagName.indexOf("-")>-1)return;if(!T){n&&n.appendChild(u);return}if(B&&$&&B!==$||P(u)!==P(T)){T.replaceWith(u);return}const z=k(u);if(z&&z!==k(T)){T.textContent=z;return}if(T.childNodes.length>0&&u.childNodes.length<1){T.innerHTML="";return}if(T.childNodes.length<1&&u.childNodes.length>0){const lt=document.createDocumentFragment();J(u,lt,!1),T.appendChild(lt);return}if(u.childNodes.length>0){J(u,T,!0);return}})};return{html:(r,...n)=>{let o="";const{length:c}=r;for(let d=1;d<c;d++){const u=n[d-1];let A=!1;if(o+=r[d-1],s.test(o)&&t.test(o)&&(o=o.replace(s,(T,B,$)=>`${e}${d-1}=${$||'"'}${B}${$?"":'"'}`),A=!0),!A)switch(!0){case Array.isArray(u):case u instanceof DocumentFragment:{o+=`<!--${h}${d-1}-->`;break}case(typeof u=="object"&&u!==null):{"attrs"in u&&(o+=`${e}${d-1}="attrs"`);break}default:o+=u??""}}o+=r[c-1];const g=j(o.trim());return _(g,n),E(g,n),g},render:(r,n)=>{r&&!r.children.length?(r.innerHTML="",r.appendChild(n)):J(n,r,!1),a.forEach(o=>{o()}),a=[],l.forEach(o=>{o()}),l=[]}}})();class rt{constructor(t,e){w(this,"_shadowRoot");w(this,"_hostElement");w(this,"update");w(this,"emitEvent");this._hostElement=t,this._shadowRoot=e}get __metadata__(){return{name:"RENDERER"}}get shadowRoot(){return this._shadowRoot}get hostElement(){return this._hostElement}}const wt={selector:"",root:!1,styles:"",deps:[],standalone:!1,shadowDomEncapsulation:!0},nt=(s,t)=>{const e=document.createElement("style");return e.innerHTML=s,t&&t.appendChild(e),e},St=async(s,t)=>{var e,i,h,f,a,l,ut,v,ht,O;if(s={...wt,...s},y(s.styles)){const W=await s.styles;s.styles=W.default.toString()}if(s.styles=s.styles.toString(),s.root&&!H.isRootNodeSet)H.isRootNodeSet=!0,s.styles&&(H.globalStyles.replace(s.styles),H.globalStyleTag=nt(s.styles,document.head));else if(s.root&&H.isRootNodeSet)throw Error("Cannot register duplicate root component in "+s.selector+" component");window.customElements.define(s.selector,(O=class extends HTMLElement{constructor(){super();M(this,l);M(this,v);M(this,e,void 0);M(this,i,void 0);M(this,h,void 0);M(this,f,new Z);M(this,a,!1);w(this,"renderCount",0);s.shadowDomEncapsulation&&dt?(N(this,a,!1),N(this,i,this.attachShadow({mode:"open"})),m(this,i).adoptedStyleSheets=H.getComputedCss(s.styles,s.standalone)):(N(this,a,!0),N(this,i,this)),this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this),this.setRenderIntoQueue=this.setRenderIntoQueue.bind(this),Y(this,l,ut).call(this)}static get observedAttributes(){return t.observedAttributes||[]}update(){const _=m(this,e).render();typeof _=="string"?m(this,i).innerHTML=gt(_):_t(m(this,i),_)}setProps(_){var E,S;for(const[x,P]of Object.entries(_))t.observedProperties.find(k=>k===x)&&(m(this,e)[x]=P);(S=(E=m(this,e)).onPropertiesChanged)==null||S.call(E)}getInstance(){return m(this,e)}setRenderIntoQueue(){++this.renderCount,this.renderCount===1&&queueMicrotask(()=>{this.update(),this.renderCount=0})}connectedCallback(){var _,E,S,x;if(m(this,a)){const P=q();this.setAttribute("data-did",P);const k=s.styles.replaceAll(":host",`${s.selector}[data-did='${P}']`);!s.root&&k&&N(this,h,nt(k,document.head))}m(this,f).add(Q(this,"bindprops",P=>{const k=P.detail.props;k&&this.setProps(k)})),m(this,f).add(Q(this,"refresh_component",()=>{this.update()})),(E=(_=m(this,e)).beforeMount)==null||E.call(_),this.update(),(x=(S=m(this,e)).mount)==null||x.call(S)}attributeChangedCallback(_,E,S){var x,P;(P=(x=m(this,e)).onAttributesChanged)==null||P.call(x,_,E,S)}disconnectedCallback(){var _,E,S;this.renderCount=0,(E=(_=m(this,e)).unmount)==null||E.call(_),(S=m(this,h))==null||S.remove(),m(this,f).unsubscribe()}},e=new WeakMap,i=new WeakMap,h=new WeakMap,f=new WeakMap,a=new WeakMap,l=new WeakSet,ut=function(){const _=new rt(this,m(this,i));_.update=()=>{this.update()},_.emitEvent=(E,S)=>{Y(this,v,ht).call(this,E,S)},m(this,f).add(yt(this.setRenderIntoQueue,()=>{N(this,e,st(bt(this.setRenderIntoQueue,t),s.deps,_))}))},v=new WeakSet,ht=function(_,E){const S=new CustomEvent(_,{detail:E});this.dispatchEvent(S)},O))},Rt={deps:[]},vt=s=>t=>{if(s.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(s.selector)||St(s,t)},it=(s={})=>t=>{if(s={...Rt,...s},t.prototype.__metadata__={name:"SERVICE"},s.deps.some(i=>i.prototype.__metadata__.name==="RENDERER"))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const e=st(t,s.deps);et.register(t,e)},I=class{static checkParams(t,e){let i=0;const h={},f=e.paramCount;for(let a=0;a<t.length;a++){const l=e.params[a];l.indexOf(":")>=0&&(h[l.split(":")[1]]=t[a].split("?")[0],i+=1)}return i===f?h:{}}static getParamCount(t){let e=0;return t.forEach(i=>{i.indexOf(":")>=0&&(e+=1)}),e}static formatRoute(t){const e={params:{},url:"",template:"",paramCount:0,isRegistered:!1,redirectTo:"",preload:t.preload,canActivate:()=>!0};if(e.params=t.path.split("/").filter(i=>i.length>0),e.url=t.path,e.template="",e.redirectTo=t.redirectTo,t.template){if(!t.templatePath)throw Error("templatePath is required in route if template is mentioned.");e.template=t.template,e.templatePath=t.templatePath}t.canActivate&&(e.canActivate=t.canActivate),e.paramCount=I.getParamCount(e.params),I.routeList.push(e)}static preloadRoutes(){for(const t of I.routeList)t.templatePath&&t.templatePath()}static preloadSelectedRoutes(){const t=I.routeList.filter(e=>e.preload===!0);for(const e of t)e.templatePath&&e.templatePath()}};let C=I;w(C,"routeList",[]),w(C,"isHistoryBasedRouting",!0);function ot(s,t){return s?new RegExp(s.replace(/:[^\s/]+/g,"(.+)")).test(t):!1}class U{constructor(){w(this,"_currentRoute",new X({path:"",routeParams:new Map,queryParams:new Map,state:{}}));w(this,"_template",new X(""));w(this,"_navigationEndEvent",new G);w(this,"_routeStateMap",new Map)}listenRouteChanges(){const t=C.isHistoryBasedRouting?"popstate":"hashchange";return C.isHistoryBasedRouting&&(window.history.replaceState({},null,""),function(e,i){var h=e.pushState;e.pushState=function(...f){h.apply(e,f),i()}}(window.history,this._registerOnHashChange.bind(this))),Q(window,t,()=>{this._registerOnHashChange()})}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute.asObservable()}navigateTo(t="/",e){let i=C.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");i=i||"/",this._routeStateMap.clear(),this._routeStateMap.set(t,e),i===t?this._navigateTo(t,e):C.isHistoryBasedRouting?window.history.pushState(e,"",t):window.location.hash="#"+t}onNavigationEnd(){return this._navigationEndEvent.asObservable()}_registerOnHashChange(){const t=C.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,""),e=this._routeStateMap.get(t);this._navigateTo(t,e)}_navigateTo(t,e){const i={},h=t.split("/").filter(l=>l.length>0),f=C.routeList.filter(l=>{if(l.params.length===h.length&&ot(l.url,t))return l;if(l.url===t)return l}),a=f.length>0?f[0]:null;a&&(i.path=t,i.state={...e||{}},V(a.canActivate()).subscribe(l=>{if(!l)return;const R=C.checkParams(h,a);if(Object.keys(R).length>0||t){i.routeParams=new Map(Object.entries(R));let v=[];C.isHistoryBasedRouting?v=new URLSearchParams(window.location.search).entries():v=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[],i.queryParams=new Map(v);const j=O=>{O.isRegistered=!0,this._currentRoute.next(i),this._template.next(O.template),this._navigationEndEvent.next()};a.isRegistered?j(a):a.templatePath?V(a.templatePath()).subscribe(()=>{j(a)}):a.redirectTo&&this.navigateTo(a.redirectTo,e)}else this.navigateTo(a.redirectTo,e)}))}}it()(U);const Ct=()=>{class s{constructor(e,i){w(this,"_template","");w(this,"_subscriptions",new Z)}beforeMount(){this._subscriptions.add(this.internalRouterSrvc.getTemplate().subscribe(e=>{this._template!==e&&(this._template=e)})),this._subscriptions.add(this.internalRouterSrvc.listenRouteChanges())}mount(){const e=C.isHistoryBasedRouting?window.location.pathname:window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(e||"/")}unmount(){this._subscriptions.unsubscribe()}render(){return this._template}}vt({selector:"router-outlet",deps:[U,rt]})(s)};class at{constructor(t){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(t,e){this.internalRouter.navigateTo(t,e)}onNavigationEnd(){return this.internalRouter.onNavigationEnd()}registerRoutes(t,e=!1,i=!1){if(i&&(C.isHistoryBasedRouting=!i),Array.isArray(t)){for(const h of t)C.formatRoute(h);e?C.preloadRoutes():C.preloadSelectedRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}return it({deps:[U]})(at),p.Router=at,p.matchPath=ot,p.registerRouterComponent=Ct,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),p}({});
