var Se=Object.defineProperty;var se=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var V=(i,o,d)=>o in i?Se(i,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[o]=d,N=(i,o)=>{for(var d in o||(o={}))we.call(o,d)&&V(i,d,o[d]);if(se)for(var d of se(o))ye.call(o,d)&&V(i,d,o[d]);return i};var T=(i,o,d)=>(V(i,typeof o!="symbol"?o+"":o,d),d),q=(i,o,d)=>{if(!o.has(i))throw TypeError("Cannot "+d)};var a=(i,o,d)=>(q(i,o,"read from private field"),d?d.call(i):o.get(i)),y=(i,o,d)=>{if(o.has(i))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(i):o.set(i,d)},v=(i,o,d,L)=>(q(i,o,"write to private field"),L?L.call(i,d):o.set(i,d),d);var F=(i,o,d)=>(q(i,o,"access private method"),d);var PlumeJS=function(i){var R,Z,E,k,H,O,Te,I,Ce,M,J;"use strict";const{html:o,render:d}=(()=>{const t=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,s="attr",r=/^attr([^ ]+)/,c="insertNode",h=/^insertNode([^ ]+)/,n=S=>{const l={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let f=JSON.stringify(S);const u=b=>l[b]||b;return f=(b=>b.replace(/[&<>\(\)]/g,u))(f),JSON.parse(f)},g=(S,l)=>{var p;const f=S.options,u=Array.isArray(l)?l:[l];let w,b,m=f.length;for(;m--;){b=f[m];const A=(p=b.getAttribute("value"))!=null?p:(b.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(b.selected=u.indexOf(A)>-1)&&(w=!0)}w||(S.selectedIndex=-1)},C=S=>{const l=document.createElement("template");return l.innerHTML=S,l.content},ee=(S,l)=>{const f=document.createTreeWalker(S,NodeFilter.SHOW_ELEMENT,null);let u=f.nextNode();for(;u;){if(u.hasAttributes()){const w=Array.from(u.attributes).filter(b=>r.test(b.nodeName));for(const{nodeName:b,nodeValue:m}of w){const p=r.exec(b)[1];switch(!0){case/^on+/.test(m):{const A=m.slice(2).toLowerCase();u.removeEventListener(A,l[p]),A!=="bindprops"?u.addEventListener(A,l[p]):u.addEventListener(A,D=>{D.detail.setProps(l[p]())});break}case/ref/.test(m):{l[p](u);break}case/^data-+/.test(m):{u.setAttribute(`data-${m}`,n(l[p]));break}case/^aria-+/.test(m):{u.setAttribute(`aria-${m}`,n(l[p]));break}case/class/.test(m):{l[p]?u.classList.add(...l[p].split(" ")):u.setAttribute("class","");break}case/value/.test(m):{u.nodeName.toLowerCase()==="select"?g(u,l[p]):u.value=n(l[p]);break}case/disabled/.test(m):case/checked/.test(m):{l[p]?u.setAttribute(m,l[p]):u.removeAttribute(m);break}default:u.setAttribute(m,n(l[p]))}u.removeAttribute(b)}}u=f.nextNode()}},pe=(S,l)=>{const f=document.createTreeWalker(S,NodeFilter.SHOW_COMMENT,null);let u=f.nextNode(),w;for(;u;){if(w=h.exec(u.data)){const b=Array.isArray(l[w[1]])?l[w[1]]:[l[w[1]]];u.replaceWith(...b),f.currentNode=S}u=f.nextNode()}};return{html:(S,...l)=>{let f="";const{length:u}=S;for(let b=1;b<u;b++){const m=l[b-1];let p=!1;if(f+=S[b-1],t.test(f)&&e.test(f)&&(f=f.replace(t,(A,D,te)=>`${s}${b-1}=${te||'"'}${D}${te?"":'"'}`),p=!0),!p)switch(!0){case Array.isArray(m):case m instanceof DocumentFragment:{f+=`<!--${c}${b-1}-->`;break}case(typeof m=="object"&&m!==null):{"html"in m&&(f+=m.html);break}default:f+=m}}f+=S[u-1];const w=C(f.trim());return ee(w,l),pe(w,l),w},render:(S,l)=>{S.innerHTML="",S.appendChild(l)}}})(),L=new(Z=class{constructor(){y(this,R,void 0);v(this,R,new WeakMap)}register(t,e){if(!a(this,R).get(t))a(this,R).set(t,e);else throw console.error(t),"service already exists"}getService(t){const e=a(this,R).get(t);if(e)return e;throw console.error(t),"service is not a registered service."}clear(){v(this,R,new WeakMap)}},R=new WeakMap,Z),re=t=>typeof t=="function",ne=t=>{const e=t.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(s=>s.trim()):[]},$=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),ie=(t,e,s,r=!1)=>(t.addEventListener(e,s,r),()=>{t.removeEventListener(e,s,r)}),z=(t,e,s)=>{if(e.length>0){const r=[];for(const n of e)n.__metadata__?r.push(s):r.push(L.getService(n));const c=ne(t),h=new t(...r);return e.forEach((n,g)=>{h[c[g]]=r[g]}),h}else return new t},P=new class{constructor(){T(this,"globalStyles");T(this,"globalStyleTag");T(this,"style_registry");T(this,"isRootNodeSet");this.globalStyles=new CSSStyleSheet,this.isRootNodeSet=!1}getComputedCss(t=""){let e=[];const s=new CSSStyleSheet;if(s.insertRule(":host { display: block; }"),e=[this.globalStyles,s],t){const r=new CSSStyleSheet;r.replace(t),e.push(r)}return e}};class j{constructor(){T(this,"shadowRoot");T(this,"update");T(this,"emitEvent")}static get __metadata__(){return{name:"Renderer"}}}const B="data-compid",ae={selector:"",root:!1,styles:"",useShadow:!0,deps:[]},oe=(t,e)=>(t&&(t=e+" "+t.replace("}",` } ${e} `)),t),G=(t,e)=>{const s=document.createElement("style");return s.innerHTML=t,e&&e.appendChild(s),s},K=(t,e)=>{var s,r,c,h;if(!window.customElements.get(t.selector)){if(t=N(N({},ae),t),t.styles=t.styles.toString(),t.root&&!P.isRootNodeSet)P.isRootNodeSet=!0,t.styles&&(P.globalStyles.replace(t.styles),P.globalStyleTag=G(t.styles,document.head));else if(t.root&&P.isRootNodeSet)throw Error("Cannot register duplicate root component in "+t.selector+" component");window.customElements.define(t.selector,(h=class extends HTMLElement{constructor(){super();y(this,s,void 0);y(this,r,void 0);y(this,c,void 0);v(this,r,this.attachShadow({mode:"open"})),$||(a(this,r).adoptedStyleSheets=P.getComputedCss(t.styles)),this.update=this.update.bind(this),this.emitEvent=this.emitEvent.bind(this),this.setProps=this.setProps.bind(this),this.getInstance=this.getInstance.bind(this)}emulateComponent(){if($&&t.styles){const n=new Date().getTime()+Math.floor(Math.random()*1e3+1),g=oe(t.styles,`[${B}="${n.toString()}"]`);v(this,c,G(g)),this.setAttribute(B,n.toString())}}connectedCallback(){this.emulateComponent();const n=new j;n.shadowRoot=a(this,r),n.update=this.update,n.emitEvent=this.emitEvent,v(this,s,z(e,t.deps,n)),a(this,s).beforeMount&&a(this,s).beforeMount(),this.update(),a(this,s).mount&&a(this,s).mount(),this.emitEvent("bindprops",{setProps:this.setProps},!1)}update(){d(a(this,r),a(this,s).render.bind(a(this,s))()),$&&(t.styles&&a(this,r).insertBefore(a(this,c),a(this,r).childNodes[0]),P.globalStyleTag&&a(this,r).insertBefore(document.importNode(P.globalStyleTag,!0),a(this,r).childNodes[0]))}emitEvent(n,g){const C=new CustomEvent(n,{detail:g});this.dispatchEvent(C)}setProps(n){for(const[g,C]of Object.entries(n))a(this,s)[g]=C;a(this,s).onPropsChanged&&a(this,s).onPropsChanged(),this.update()}getInstance(){return a(this,s)}disconnectedCallback(){a(this,s).unmount&&a(this,s).unmount()}},s=new WeakMap,r=new WeakMap,c=new WeakMap,h))}},Q={deps:[]},W=(...t)=>{let e=N({},Q),s;if(t[0].hasOwnProperty("deps")?(e=N(N({},Q),t[0]),s=t[1]):s=t[0],s){const r=z(s,e.deps);L.register(s,r)}else throw new Error("error: Requires constructor to define service")},x=class{static checkParams(e,s){let r=0,c={},h=s.ParamCount;for(let g=0;g<e.length;g++){var n=s.Params[g];n.indexOf(":")>=0&&(c[n.split(":")[1]]=e[g],r+=1)}return r===h?c:{}}static getParamCount(e){let s=0;return e.forEach(r=>{r.indexOf(":")>=0&&(s+=1)}),s}static formatRoute(e){let s={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(s.Params=e.path.split("/").filter(r=>r.length>0),s.Url=e.path,s.Template="",s.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");s.Template=e.template,s.TemplatePath=e.templatePath}e.canActivate&&(s.canActivate=e.canActivate),s.ParamCount=x.getParamCount(s.Params),x.routeList.push(s)}static preloadRoutes(){for(const e of x.routeList)e.TemplatePath&&e.TemplatePath()}};let _=x;T(_,"routeList",[]);const ce=t=>!!t&&typeof t.subscribe=="function",le=t=>!!t&&typeof t.then=="function",ue=t=>({subscribe:e=>{e(t)}}),he=t=>({subscribe:e=>{Promise.resolve(t).then(s=>{e(s)})}});class de{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const X=t=>ce(t)?t:le(t)?he(Promise.resolve(t)):ue(t);class U{constructor(){y(this,O);y(this,I);y(this,M);y(this,E,{path:"",routeParams:new Map,queryParams:new Map,state:{}});y(this,k,new de);y(this,H,void 0)}startHashChange(){v(this,H,ie(window,"hashchange",()=>{F(this,O,Te).call(this)}))}stopHashChange(){a(this,H).call(this)}getTemplate(){return a(this,k).asObservable()}getCurrentRoute(){return a(this,E)}navigateTo(e="",s){e?(window.location.hash.replace(/^#/,"")===e&&F(this,M,J).call(this,e,s),window.location.hash="#"+e):F(this,M,J).call(this,e,s)}}E=new WeakMap,k=new WeakMap,H=new WeakMap,O=new WeakSet,Te=function(){const e=window.location.hash.replace(/^#/,"");F(this,M,J).call(this,e,null)},I=new WeakSet,Ce=function(e,s){if(e){let r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return s.match(r)}else return e===s},M=new WeakSet,J=function(e,s){let r=e.split("/").filter(n=>n.length>0),c=_.routeList.filter(n=>{if(n.Params.length===r.length&&F(this,I,Ce).call(this,n.Url,e))return n;if(n.Url===e)return n}),h=c.length>0?c[0]:null;h&&(a(this,E).path=e,a(this,E).state=N({},s||{}),X(h.canActivate()).subscribe(n=>{if(!n)return;let g=_.checkParams(r,h);if(Object.keys(g).length>0||e){a(this,E).routeParams=new Map(Object.entries(g));const C=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];a(this,E).queryParams=new Map(C),h.IsRegistered?a(this,k).next(h.Template):h.TemplatePath&&X(h.TemplatePath()).subscribe(ee=>{h.IsRegistered=!0,a(this,k).next(h.Template)})}else this.navigateTo(h.redirectTo)}))},W(U);class me{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,s){this.internalRouter.navigateTo(e,s)}registerRoutes(e,s=!1){if(Array.isArray(e)){for(let r of e)_.formatRoute(r);s&&_.preloadRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}W({deps:[U]},me);const fe=()=>{var e,s;class t{constructor(c,h){y(this,e,"");y(this,s,void 0);T(this,"update")}beforeMount(){v(this,s,this.internalRouterSrvc.getTemplate().subscribe(c=>{v(this,e,c),this.renderer.update()})),this.internalRouterSrvc.startHashChange()}mount(){let c=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(c)}unmount(){a(this,s).call(this),this.internalRouterSrvc.stopHashChange()}render(){if(a(this,e)){const c=[`${a(this,e)}`];return c.raw=[`${a(this,e)}`],o(c)}else return o``}}e=new WeakMap,s=new WeakMap,K({selector:"router-outlet",deps:[U,j]},t)},Y=t=>{let e=t;return[e,r=>{let c;re(r)?c=r(e):c=r,Object.assign(e,c)}]},be=t=>{let e;switch(t.nodeName&&t.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(t.type)?e=t.checked?t.value!==null&&t.value!=="on"?t.value:!0:!1:e=t.value;break}case"select":{const s=t.type==="select-one",c=[...Array.from(t.options)].filter(h=>h.selected).map(h=>{var n;return(n=h.value)!=null?n:(h.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")});e=s?c[0]:c;break}default:{e=t.value;break}}return e},ge=t=>{let[e,s]=Y(t);return[e,h=>n=>{let g=n.target;const C=be(g);s(()=>(e[h]=C,e))},()=>{for(const h of Object.keys(e))e[h]=""}]};return i.Component=K,i.Renderer=j,i.Service=W,i.html=o,i.registerRouterComponent=fe,i.render=d,i.useFormFields=ge,i.useState=Y,Object.defineProperty(i,"__esModule",{value:!0}),i[Symbol.toStringTag]="Module",i}({});
