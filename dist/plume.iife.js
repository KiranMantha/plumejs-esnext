var Ce=Object.defineProperty;var ae=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var J=(a,l,d)=>l in a?Ce(a,l,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[l]=d,R=(a,l)=>{for(var d in l||(l={}))Re.call(l,d)&&J(a,d,l[d]);if(ae)for(var d of ae(l))Pe.call(l,d)&&J(a,d,l[d]);return a};var E=(a,l,d)=>(J(a,typeof l!="symbol"?l+"":l,d),d),B=(a,l,d)=>{if(!l.has(a))throw TypeError("Cannot "+d)};var n=(a,l,d)=>(B(a,l,"read from private field"),d?d.call(a):l.get(a)),w=(a,l,d)=>{if(l.has(a))throw TypeError("Cannot add the same private member more than once");l instanceof WeakSet?l.add(a):l.set(a,d)},P=(a,l,d,O)=>(B(a,l,"write to private field"),O?O.call(a,d):l.set(a,d),d);var F=(a,l,d)=>(B(a,l,"access private method"),d);var PlumeJS=function(a){var N,re,_,M,I,j,Ee,V,Ae,x,G,$,v,C;"use strict";const{html:l,render:d}=(()=>{const s=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,t="attr",r=/^attr([^ ]+)/,o="insertNode",c=/^insertNode([^ ]+)/,i=S=>{const u={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let g=JSON.stringify(S);const h=b=>u[b]||b;return g=(b=>b.replace(/[&<>\(\)]/g,h))(g),JSON.parse(g)},m=(S,u)=>{var p;const g=S.options,h=Array.isArray(u)?u:[u];let T,b,f=g.length;for(;f--;){b=g[f];const k=(p=b.getAttribute("value"))!=null?p:(b.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(b.selected=h.indexOf(k)>-1)&&(T=!0)}T||(S.selectedIndex=-1)},y=S=>{const u=document.createElement("template");return u.innerHTML=S,u.content},ne=(S,u)=>{const g=document.createTreeWalker(S,NodeFilter.SHOW_ELEMENT,null);let h=g.nextNode();for(;h;){if(h.hasAttributes()){const T=Array.from(h.attributes).filter(b=>r.test(b.nodeName));for(const{nodeName:b,nodeValue:f}of T){const p=r.exec(b)[1];switch(!0){case/^on+/.test(f):{const k=f.slice(2).toLowerCase();h.removeEventListener(k,u[p]),k!=="bindprops"?h.addEventListener(k,u[p]):h.addEventListener(k,z=>{z.detail.setProps(u[p]())});break}case/ref/.test(f):{u[p](h);break}case/^data-+/.test(f):{h.setAttribute(`data-${f}`,i(u[p]));break}case/^aria-+/.test(f):{h.setAttribute(`aria-${f}`,i(u[p]));break}case/class/.test(f):{u[p]?h.classList.add(...u[p].split(" ")):h.setAttribute("class","");break}case/value/.test(f):{h.nodeName.toLowerCase()==="select"?m(h,u[p]):h.value=i(u[p]);break}case/disabled/.test(f):case/checked/.test(f):{u[p]?h.setAttribute(f,u[p]):h.removeAttribute(f);break}default:h.setAttribute(f,i(u[p]))}h.removeAttribute(b)}}h=g.nextNode()}},Te=(S,u)=>{const g=document.createTreeWalker(S,NodeFilter.SHOW_COMMENT,null);let h=g.nextNode(),T;for(;h;){if(T=c.exec(h.data)){const b=Array.isArray(u[T[1]])?u[T[1]]:[u[T[1]]];h.replaceWith(...b),g.currentNode=S}h=g.nextNode()}};return{html:(S,...u)=>{let g="";const{length:h}=S;for(let b=1;b<h;b++){const f=u[b-1];let p=!1;if(g+=S[b-1],s.test(g)&&e.test(g)&&(g=g.replace(s,(k,z,ie)=>`${t}${b-1}=${ie||'"'}${z}${ie?"":'"'}`),p=!0),!p)switch(!0){case Array.isArray(f):case f instanceof DocumentFragment:{g+=`<!--${o}${b-1}-->`;break}case(typeof f=="object"&&f!==null):{"html"in f&&(g+=f.html);break}default:g+=f}}g+=S[h-1];const T=y(g.trim());return ne(T,u),Te(T,u),T},render:(S,u)=>{S.innerHTML="",S.appendChild(u)}}})(),O=new(re=class{constructor(){w(this,N,void 0);P(this,N,new WeakMap)}register(s,e){if(!n(this,N).get(s))n(this,N).set(s,e);else throw console.error(s),"service already exists"}getService(s){const e=n(this,N).get(s);if(e)return e;throw console.error(s),"service is not a registered service."}clear(){P(this,N,new WeakMap)}},N=new WeakMap,re),oe=s=>typeof s=="function",le=s=>{const e=s.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(t=>t.trim()):[]},W=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),K=(s,e,t,r=!1)=>(s.addEventListener(e,t,r),()=>{s.removeEventListener(e,t,r)}),Q=(s,e,t)=>{if(e.length>0){const r=[];for(const i of e)i.__metadata__?r.push(t):r.push(O.getService(i));const o=le(s),c=new s(...r);return e.forEach((i,m)=>{c[o[m]]=r[m]}),c}else return new s},A=new class{constructor(){E(this,"globalStyles");E(this,"globalStyleTag");E(this,"style_registry");E(this,"isRootNodeSet");this.globalStyles=new CSSStyleSheet,this.isRootNodeSet=!1}getComputedCss(s=""){let e=[];const t=new CSSStyleSheet;if(t.insertRule(":host { display: block; }"),e=[this.globalStyles,t],s){const r=new CSSStyleSheet;r.replace(s),e.push(r)}return e}};class q{constructor(){E(this,"shadowRoot");E(this,"update");E(this,"emitEvent")}static get __metadata__(){return{name:"Renderer"}}}const X="data-compid",ce={selector:"",root:!1,styles:"",useShadow:!0,deps:[]},ue=(s,e)=>(s&&(s=e+" "+s.replace("}",` } ${e} `)),s),Y=(s,e)=>{const t=document.createElement("style");return t.innerHTML=s,e&&e.appendChild(t),t},Z=(s,e)=>{var t,r,o,c;if(!window.customElements.get(s.selector)){if(s=R(R({},ce),s),s.styles=s.styles.toString(),s.root&&!A.isRootNodeSet)A.isRootNodeSet=!0,s.styles&&(A.globalStyles.replace(s.styles),A.globalStyleTag=Y(s.styles,document.head));else if(s.root&&A.isRootNodeSet)throw Error("Cannot register duplicate root component in "+s.selector+" component");window.customElements.define(s.selector,(c=class extends HTMLElement{constructor(){super();w(this,t,void 0);w(this,r,void 0);w(this,o,void 0);P(this,r,this.attachShadow({mode:"open"})),W||(n(this,r).adoptedStyleSheets=A.getComputedCss(s.styles)),this.getInstance=this.getInstance.bind(this)}emulateComponent(){if(W&&s.styles){const i=new Date().getTime()+Math.floor(Math.random()*1e3+1),m=ue(s.styles,`[${X}="${i.toString()}"]`);P(this,o,Y(m)),this.setAttribute(X,i.toString())}}connectedCallback(){this.emulateComponent();const i=new q;i.shadowRoot=n(this,r),i.update=()=>{this.update()},i.emitEvent=(m,y)=>{this.emitEvent(m,y)},P(this,t,Q(e,s.deps,i)),n(this,t).beforeMount&&n(this,t).beforeMount(),this.update(),n(this,t).mount&&n(this,t).mount(),this.emitEvent("bindprops",{setProps:m=>{this.setProps(m)}},!1)}update(){d(n(this,r),(()=>n(this,t).render())()),W&&(s.styles&&n(this,r).insertBefore(n(this,o),n(this,r).childNodes[0]),A.globalStyleTag&&n(this,r).insertBefore(document.importNode(A.globalStyleTag,!0),n(this,r).childNodes[0]))}emitEvent(i,m){const y=new CustomEvent(i,{detail:m});this.dispatchEvent(y)}setProps(i){for(const[m,y]of Object.entries(i))n(this,t)[m]=y;n(this,t).onPropsChanged&&n(this,t).onPropsChanged(),this.update()}getInstance(){return n(this,t)}disconnectedCallback(){n(this,t).unmount&&n(this,t).unmount()}},t=new WeakMap,r=new WeakMap,o=new WeakMap,c))}},ee={deps:[]},U=(...s)=>{let e=R({},ee),t;if(s[0].hasOwnProperty("deps")?(e=R(R({},ee),s[0]),t=s[1]):t=s[0],t){const r=Q(t,e.deps);O.register(t,r)}else throw new Error("error: Requires constructor to define service")},H=class{static checkParams(e,t){let r=0,o={},c=t.ParamCount;for(let m=0;m<e.length;m++){var i=t.Params[m];i.indexOf(":")>=0&&(o[i.split(":")[1]]=e[m],r+=1)}return r===c?o:{}}static getParamCount(e){let t=0;return e.forEach(r=>{r.indexOf(":")>=0&&(t+=1)}),t}static formatRoute(e){let t={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(t.Params=e.path.split("/").filter(r=>r.length>0),t.Url=e.path,t.Template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.Template=e.template,t.TemplatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.ParamCount=H.getParamCount(t.Params),H.routeList.push(t)}static preloadRoutes(){for(const e of H.routeList)e.TemplatePath&&e.TemplatePath()}};let L=H;E(L,"routeList",[]);const he=s=>!!s&&typeof s.subscribe=="function",de=s=>!!s&&typeof s.then=="function",me=s=>({subscribe:e=>{e(s)}}),fe=s=>({subscribe:e=>{Promise.resolve(s).then(t=>{e(t)})}});class ge{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const te=s=>he(s)?s:de(s)?fe(Promise.resolve(s)):me(s);class D{constructor(){w(this,j);w(this,V);w(this,x);w(this,_,{path:"",routeParams:new Map,queryParams:new Map,state:{}});w(this,M,new ge);w(this,I,void 0)}startHashChange(){P(this,I,K(window,"hashchange",()=>{F(this,j,Ee).call(this)}))}stopHashChange(){n(this,I).call(this)}getTemplate(){return n(this,M).asObservable()}getCurrentRoute(){return n(this,_)}navigateTo(e="",t){e?(window.location.hash.replace(/^#/,"")===e&&F(this,x,G).call(this,e,t),window.location.hash="#"+e):F(this,x,G).call(this,e,t)}}_=new WeakMap,M=new WeakMap,I=new WeakMap,j=new WeakSet,Ee=function(){const e=window.location.hash.replace(/^#/,"");F(this,x,G).call(this,e,null)},V=new WeakSet,Ae=function(e,t){if(e){let r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return t.match(r)}else return e===t},x=new WeakSet,G=function(e,t){let r=e.split("/").filter(i=>i.length>0),o=L.routeList.filter(i=>{if(i.Params.length===r.length&&F(this,V,Ae).call(this,i.Url,e))return i;if(i.Url===e)return i}),c=o.length>0?o[0]:null;c&&(n(this,_).path=e,n(this,_).state=R({},t||{}),te(c.canActivate()).subscribe(i=>{if(!i)return;let m=L.checkParams(r,c);if(Object.keys(m).length>0||e){n(this,_).routeParams=new Map(Object.entries(m));const y=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];n(this,_).queryParams=new Map(y),c.IsRegistered?n(this,M).next(c.Template):c.TemplatePath&&te(c.TemplatePath()).subscribe(ne=>{c.IsRegistered=!0,n(this,M).next(c.Template)})}else this.navigateTo(c.redirectTo)}))},U(D);class se{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}registerRoutes(e,t=!1){if(Array.isArray(e)){for(let r of e)L.formatRoute(r);t&&L.preloadRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}U({deps:[D]},se);const be=()=>{var e,t;class s{constructor(o,c){w(this,e,"");w(this,t,void 0);E(this,"update")}beforeMount(){P(this,t,this.internalRouterSrvc.getTemplate().subscribe(o=>{P(this,e,o),this.renderer.update()})),this.internalRouterSrvc.startHashChange()}mount(){let o=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(o)}unmount(){n(this,t).call(this),this.internalRouterSrvc.stopHashChange()}render(){if(n(this,e)){const o=[`${n(this,e)}`];return o.raw=[`${n(this,e)}`],l(o)}else return l``}}e=new WeakMap,t=new WeakMap,Z({selector:"router-outlet",deps:[D,q]},s)},pe=s=>{let e=s;return[e,r=>{let o;oe(r)?o=r(e):o=r,Object.assign(e,o)}]},Se=s=>{let e;switch(s.nodeName&&s.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(s.type)?e=s.checked?s.value!==null&&s.value!=="on"?s.value:!0:!1:e=s.value;break}case"select":{const t=s.type==="select-one",o=[...Array.from(s.options)].filter(c=>c.selected).map(c=>{var i;return(i=c.value)!=null?i:(c.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")});e=t?o[0]:o;break}default:{e=s.value;break}}return e};class we{constructor(e,t){w(this,$,void 0);w(this,v,void 0);w(this,C,new Map);P(this,$,e),P(this,v,t)}get errors(){return n(this,C)}get valid(){return this.checkValidity(),!n(this,C).size}get value(){const e={};for(const[t,r]of Object.entries(n(this,v)))e[t]=r.value;return e}get(e){return n(this,v)[e]}checkValidity(){n(this,C).clear();for(const e in n(this,v)){const t=n(this,v)[e].value,r=n(this,v)[e].validators;n(this,v)[e].errors=null;for(const o of r){const c=o(t);c!==null&&(n(this,C).has(e)?(n(this,C).set(e,R(R({},n(this,C).get(e)),c)),n(this,v)[e].errors=R(R({},n(this,v)[e].errors),c)):(n(this,C).set(e,c),n(this,v)[e].errors=c))}}}reset(e={}){for(const t in n(this,v))n(this,v)[t].value=e[t]||n(this,$)[t];n(this,C).clear()}}$=new WeakMap,v=new WeakMap,C=new WeakMap;const ve=s=>{const e={},t={};for(const[i,m]of Object.entries(s)){const y=Array.isArray(m)?m:[m];e[i]={value:y.shift(),validators:y},t[i]=e[i].value}const r=new we(t,e);return[r,i=>m=>{const y=Se(m.target);r.get(i).value=y},()=>{r.reset()}]};class ye{static required(e){return e.length?null:{required:!0}}static min(e){return t=>t.length>=e?null:{minLength:{requiredLength:e}}}static max(e){return t=>t.length<=e?null:{maxLength:{requiredLength:e}}}static pattern(e){return t=>new RegExp(e).test(t)?null:{pattern:!0}}}return a.Component=Z,a.Renderer=q,a.Router=se,a.Service=U,a.Validators=ye,a.fromNativeEvent=K,a.html=l,a.registerRouterComponent=be,a.render=d,a.useFormFields=ve,a.useState=pe,Object.defineProperty(a,"__esModule",{value:!0}),a[Symbol.toStringTag]="Module",a}({});
