var Se=Object.defineProperty;var re=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var V=(n,o,d)=>o in n?Se(n,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):n[o]=d,N=(n,o)=>{for(var d in o||(o={}))we.call(o,d)&&V(n,d,o[d]);if(re)for(var d of re(o))ye.call(o,d)&&V(n,d,o[d]);return n};var C=(n,o,d)=>(V(n,typeof o!="symbol"?o+"":o,d),d),q=(n,o,d)=>{if(!o.has(n))throw TypeError("Cannot "+d)};var i=(n,o,d)=>(q(n,o,"read from private field"),d?d.call(n):o.get(n)),y=(n,o,d)=>{if(o.has(n))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(n):o.set(n,d)},v=(n,o,d,L)=>(q(n,o,"write to private field"),L?L.call(n,d):o.set(n,d),d);var F=(n,o,d)=>(q(n,o,"access private method"),d);var PlumeJS=function(n){var P,ee,E,k,H,O,Te,I,Ce,M,J;"use strict";const{html:o,render:d}=(()=>{const t=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,s="attr",r=/^attr([^ ]+)/,c="insertNode",h=/^insertNode([^ ]+)/,a=S=>{const l={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let b=JSON.stringify(S);const u=g=>l[g]||g;return b=(g=>g.replace(/[&<>\(\)]/g,u))(b),JSON.parse(b)},f=(S,l)=>{var p;const b=S.options,u=Array.isArray(l)?l:[l];let w,g,m=b.length;for(;m--;){g=b[m];const A=(p=g.getAttribute("value"))!=null?p:(g.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(g.selected=u.indexOf(A)>-1)&&(w=!0)}w||(S.selectedIndex=-1)},T=S=>{const l=document.createElement("template");return l.innerHTML=S,l.content},te=(S,l)=>{const b=document.createTreeWalker(S,NodeFilter.SHOW_ELEMENT,null);let u=b.nextNode();for(;u;){if(u.hasAttributes()){const w=Array.from(u.attributes).filter(g=>r.test(g.nodeName));for(const{nodeName:g,nodeValue:m}of w){const p=r.exec(g)[1];switch(!0){case/^on+/.test(m):{const A=m.slice(2).toLowerCase();u.removeEventListener(A,l[p]),A!=="bindprops"?u.addEventListener(A,l[p]):u.addEventListener(A,D=>{D.detail.setProps(l[p]())});break}case/ref/.test(m):{l[p](u);break}case/^data-+/.test(m):{u.setAttribute(`data-${m}`,a(l[p]));break}case/^aria-+/.test(m):{u.setAttribute(`aria-${m}`,a(l[p]));break}case/class/.test(m):{l[p]?u.classList.add(...l[p].split(" ")):u.setAttribute("class","");break}case/value/.test(m):{u.nodeName.toLowerCase()==="select"?f(u,l[p]):u.value=a(l[p]);break}case/disabled/.test(m):case/checked/.test(m):{l[p]?u.setAttribute(m,l[p]):u.removeAttribute(m);break}default:u.setAttribute(m,a(l[p]))}u.removeAttribute(g)}}u=b.nextNode()}},pe=(S,l)=>{const b=document.createTreeWalker(S,NodeFilter.SHOW_COMMENT,null);let u=b.nextNode(),w;for(;u;){if(w=h.exec(u.data)){const g=Array.isArray(l[w[1]])?l[w[1]]:[l[w[1]]];u.replaceWith(...g),b.currentNode=S}u=b.nextNode()}};return{html:(S,...l)=>{let b="";const{length:u}=S;for(let g=1;g<u;g++){const m=l[g-1];let p=!1;if(b+=S[g-1],t.test(b)&&e.test(b)&&(b=b.replace(t,(A,D,se)=>`${s}${g-1}=${se||'"'}${D}${se?"":'"'}`),p=!0),!p)switch(!0){case Array.isArray(m):case m instanceof DocumentFragment:{b+=`<!--${c}${g-1}-->`;break}case(typeof m=="object"&&m!==null):{"html"in m&&(b+=m.html);break}default:b+=m}}b+=S[u-1];const w=T(b.trim());return te(w,l),pe(w,l),w},render:(S,l)=>{S.innerHTML="",S.appendChild(l)}}})(),L=new(ee=class{constructor(){y(this,P,void 0);v(this,P,new WeakMap)}register(t,e){if(!i(this,P).get(t))i(this,P).set(t,e);else throw console.error(t),"service already exists"}getService(t){const e=i(this,P).get(t);if(e)return e;throw console.error(t),"service is not a registered service."}clear(){v(this,P,new WeakMap)}},P=new WeakMap,ee),ne=t=>typeof t=="function",ae=t=>{const e=t.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(s=>s.trim()):[]},$=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),z=(t,e,s,r=!1)=>(t.addEventListener(e,s,r),()=>{t.removeEventListener(e,s,r)}),B=(t,e,s)=>{if(e.length>0){const r=[];for(const a of e)a.__metadata__?r.push(s):r.push(L.getService(a));const c=ae(t),h=new t(...r);return e.forEach((a,f)=>{h[c[f]]=r[f]}),h}else return new t},R=new class{constructor(){C(this,"globalStyles");C(this,"globalStyleTag");C(this,"style_registry");C(this,"isRootNodeSet");this.globalStyles=new CSSStyleSheet,this.isRootNodeSet=!1}getComputedCss(t=""){let e=[];const s=new CSSStyleSheet;if(s.insertRule(":host { display: block; }"),e=[this.globalStyles,s],t){const r=new CSSStyleSheet;r.replace(t),e.push(r)}return e}};class j{constructor(){C(this,"shadowRoot");C(this,"update");C(this,"emitEvent")}static get __metadata__(){return{name:"Renderer"}}}const G="data-compid",ie={selector:"",root:!1,styles:"",useShadow:!0,deps:[]},oe=(t,e)=>(t&&(t=e+" "+t.replace("}",` } ${e} `)),t),K=(t,e)=>{const s=document.createElement("style");return s.innerHTML=t,e&&e.appendChild(s),s},Q=(t,e)=>{var s,r,c,h;if(!window.customElements.get(t.selector)){if(t=N(N({},ie),t),t.styles=t.styles.toString(),t.root&&!R.isRootNodeSet)R.isRootNodeSet=!0,t.styles&&(R.globalStyles.replace(t.styles),R.globalStyleTag=K(t.styles,document.head));else if(t.root&&R.isRootNodeSet)throw Error("Cannot register duplicate root component in "+t.selector+" component");window.customElements.define(t.selector,(h=class extends HTMLElement{constructor(){super();y(this,s,void 0);y(this,r,void 0);y(this,c,void 0);v(this,r,this.attachShadow({mode:"open"})),$||(i(this,r).adoptedStyleSheets=R.getComputedCss(t.styles)),this.getInstance=this.getInstance.bind(this)}emulateComponent(){if($&&t.styles){const a=new Date().getTime()+Math.floor(Math.random()*1e3+1),f=oe(t.styles,`[${G}="${a.toString()}"]`);v(this,c,K(f)),this.setAttribute(G,a.toString())}}connectedCallback(){this.emulateComponent();const a=new j;a.shadowRoot=i(this,r),a.update=()=>{this.update()},a.emitEvent=(f,T)=>{this.emitEvent(f,T)},v(this,s,B(e,t.deps,a)),i(this,s).beforeMount&&i(this,s).beforeMount(),this.update(),i(this,s).mount&&i(this,s).mount(),this.emitEvent("bindprops",{setProps:f=>{this.setProps(f)}},!1)}update(){d(i(this,r),(()=>i(this,s).render())()),$&&(t.styles&&i(this,r).insertBefore(i(this,c),i(this,r).childNodes[0]),R.globalStyleTag&&i(this,r).insertBefore(document.importNode(R.globalStyleTag,!0),i(this,r).childNodes[0]))}emitEvent(a,f){const T=new CustomEvent(a,{detail:f});this.dispatchEvent(T)}setProps(a){for(const[f,T]of Object.entries(a))i(this,s)[f]=T;i(this,s).onPropsChanged&&i(this,s).onPropsChanged(),this.update()}getInstance(){return i(this,s)}disconnectedCallback(){i(this,s).unmount&&i(this,s).unmount()}},s=new WeakMap,r=new WeakMap,c=new WeakMap,h))}},X={deps:[]},W=(...t)=>{let e=N({},X),s;if(t[0].hasOwnProperty("deps")?(e=N(N({},X),t[0]),s=t[1]):s=t[0],s){const r=B(s,e.deps);L.register(s,r)}else throw new Error("error: Requires constructor to define service")},x=class{static checkParams(e,s){let r=0,c={},h=s.ParamCount;for(let f=0;f<e.length;f++){var a=s.Params[f];a.indexOf(":")>=0&&(c[a.split(":")[1]]=e[f],r+=1)}return r===h?c:{}}static getParamCount(e){let s=0;return e.forEach(r=>{r.indexOf(":")>=0&&(s+=1)}),s}static formatRoute(e){let s={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(s.Params=e.path.split("/").filter(r=>r.length>0),s.Url=e.path,s.Template="",s.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");s.Template=e.template,s.TemplatePath=e.templatePath}e.canActivate&&(s.canActivate=e.canActivate),s.ParamCount=x.getParamCount(s.Params),x.routeList.push(s)}static preloadRoutes(){for(const e of x.routeList)e.TemplatePath&&e.TemplatePath()}};let _=x;C(_,"routeList",[]);const ce=t=>!!t&&typeof t.subscribe=="function",le=t=>!!t&&typeof t.then=="function",ue=t=>({subscribe:e=>{e(t)}}),he=t=>({subscribe:e=>{Promise.resolve(t).then(s=>{e(s)})}});class de{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const Y=t=>ce(t)?t:le(t)?he(Promise.resolve(t)):ue(t);class U{constructor(){y(this,O);y(this,I);y(this,M);y(this,E,{path:"",routeParams:new Map,queryParams:new Map,state:{}});y(this,k,new de);y(this,H,void 0)}startHashChange(){v(this,H,z(window,"hashchange",()=>{F(this,O,Te).call(this)}))}stopHashChange(){i(this,H).call(this)}getTemplate(){return i(this,k).asObservable()}getCurrentRoute(){return i(this,E)}navigateTo(e="",s){e?(window.location.hash.replace(/^#/,"")===e&&F(this,M,J).call(this,e,s),window.location.hash="#"+e):F(this,M,J).call(this,e,s)}}E=new WeakMap,k=new WeakMap,H=new WeakMap,O=new WeakSet,Te=function(){const e=window.location.hash.replace(/^#/,"");F(this,M,J).call(this,e,null)},I=new WeakSet,Ce=function(e,s){if(e){let r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return s.match(r)}else return e===s},M=new WeakSet,J=function(e,s){let r=e.split("/").filter(a=>a.length>0),c=_.routeList.filter(a=>{if(a.Params.length===r.length&&F(this,I,Ce).call(this,a.Url,e))return a;if(a.Url===e)return a}),h=c.length>0?c[0]:null;h&&(i(this,E).path=e,i(this,E).state=N({},s||{}),Y(h.canActivate()).subscribe(a=>{if(!a)return;let f=_.checkParams(r,h);if(Object.keys(f).length>0||e){i(this,E).routeParams=new Map(Object.entries(f));const T=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];i(this,E).queryParams=new Map(T),h.IsRegistered?i(this,k).next(h.Template):h.TemplatePath&&Y(h.TemplatePath()).subscribe(te=>{h.IsRegistered=!0,i(this,k).next(h.Template)})}else this.navigateTo(h.redirectTo)}))},W(U);class me{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,s){this.internalRouter.navigateTo(e,s)}registerRoutes(e,s=!1){if(Array.isArray(e)){for(let r of e)_.formatRoute(r);s&&_.preloadRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}W({deps:[U]},me);const fe=()=>{var e,s;class t{constructor(c,h){y(this,e,"");y(this,s,void 0);C(this,"update")}beforeMount(){v(this,s,this.internalRouterSrvc.getTemplate().subscribe(c=>{v(this,e,c),this.renderer.update()})),this.internalRouterSrvc.startHashChange()}mount(){let c=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(c)}unmount(){i(this,s).call(this),this.internalRouterSrvc.stopHashChange()}render(){if(i(this,e)){const c=[`${i(this,e)}`];return c.raw=[`${i(this,e)}`],o(c)}else return o``}}e=new WeakMap,s=new WeakMap,Q({selector:"router-outlet",deps:[U,j]},t)},Z=t=>{let e=t;return[e,r=>{let c;ne(r)?c=r(e):c=r,Object.assign(e,c)}]},be=t=>{let e;switch(t.nodeName&&t.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(t.type)?e=t.checked?t.value!==null&&t.value!=="on"?t.value:!0:!1:e=t.value;break}case"select":{const s=t.type==="select-one",c=[...Array.from(t.options)].filter(h=>h.selected).map(h=>{var a;return(a=h.value)!=null?a:(h.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")});e=s?c[0]:c;break}default:{e=t.value;break}}return e},ge=t=>{let[e,s]=Z(t);return[e,h=>a=>{let f=a.target;const T=be(f);s(()=>(e[h]=T,e))},()=>{for(const h of Object.keys(e))e[h]=""}]};return n.Component=Q,n.Renderer=j,n.Service=W,n.fromNativeEvent=z,n.html=o,n.registerRouterComponent=fe,n.render=d,n.useFormFields=ge,n.useState=Z,Object.defineProperty(n,"__esModule",{value:!0}),n[Symbol.toStringTag]="Module",n}({});
