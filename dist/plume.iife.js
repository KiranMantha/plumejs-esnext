var be=Object.defineProperty;var pe=(i,h,p)=>h in i?be(i,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):i[h]=p;var v=(i,h,p)=>(pe(i,typeof h!="symbol"?h+"":h,p),p),q=(i,h,p)=>{if(!h.has(i))throw TypeError("Cannot "+p)};var n=(i,h,p)=>(q(i,h,"read from private field"),p?p.call(i):h.get(i)),y=(i,h,p)=>{if(h.has(i))throw TypeError("Cannot add the same private member more than once");h instanceof WeakSet?h.add(i):h.set(i,p)},C=(i,h,p,M)=>(q(i,h,"write to private field"),M?M.call(i,p):h.set(i,p),p);var L=(i,h,p)=>(q(i,h,"access private method"),p);var PlumeJS=function(i){var R,Y,E,_,H,I,ee,O,te,k,$;"use strict";const{html:h,render:p}=(()=>{const t=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,s="attr",r=/^attr([^ ]+)/,a="insertNode",c=/^insertNode([^ ]+)/,u=S=>{const o={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let m=JSON.stringify(S);const l=b=>o[b]||b;return m=(b=>b.replace(/[&<>\(\)]/g,l))(m),JSON.parse(m)},f=(S,o)=>{var g;const m=S.options,l=Array.isArray(o)?o:[o];let w,b,d=m.length;for(;d--;){b=m[d];const A=(g=b.getAttribute("value"))!=null?g:(b.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(b.selected=l.indexOf(A)>-1)&&(w=!0)}w||(S.selectedIndex=-1)},T=S=>{const o=document.createElement("template");return o.innerHTML=S,o.content},F=(S,o)=>{const m=document.createTreeWalker(S,NodeFilter.SHOW_ELEMENT,null);let l=m.nextNode();for(;l;){if(l.hasAttributes()){const w=Array.from(l.attributes).filter(b=>r.test(b.nodeName));for(const{nodeName:b,nodeValue:d}of w){const g=r.exec(b)[1];switch(!0){case/^on+/.test(d):{const A=d.slice(2).toLowerCase();l.removeEventListener(A,o[g]),A!=="bindprops"?l.addEventListener(A,o[g]):l.addEventListener(A,V=>{V.detail.setProps(o[g]())});break}case/ref/.test(d):{o[g](l);break}case/^data-+/.test(d):{l.setAttribute(`data-${d}`,u(o[g]));break}case/^aria-+/.test(d):{l.setAttribute(`aria-${d}`,u(o[g]));break}case/class/.test(d):{o[g]?l.classList.add(...o[g].split(" ")):l.setAttribute("class","");break}case/value/.test(d):{l.nodeName.toLowerCase()==="select"?f(l,o[g]):l.value=u(o[g]);break}case/disabled/.test(d):case/checked/.test(d):{o[g]?l.setAttribute(d,o[g]):l.removeAttribute(d);break}default:l.setAttribute(d,u(o[g]))}l.removeAttribute(b)}}l=m.nextNode()}},fe=(S,o)=>{const m=document.createTreeWalker(S,NodeFilter.SHOW_COMMENT,null);let l=m.nextNode(),w;for(;l;){if(w=c.exec(l.data)){const b=Array.isArray(o[w[1]])?o[w[1]]:[o[w[1]]];l.replaceWith(...b),m.currentNode=S}l=m.nextNode()}};return{html:(S,...o)=>{let m="";const{length:l}=S;for(let b=1;b<l;b++){const d=o[b-1];let g=!1;if(m+=S[b-1],t.test(m)&&e.test(m)&&(m=m.replace(t,(A,V,Z)=>`${s}${b-1}=${Z||'"'}${V}${Z?"":'"'}`),g=!0),!g)switch(!0){case Array.isArray(d):case d instanceof DocumentFragment:{m+=`<!--${a}${b-1}-->`;break}case(typeof d=="object"&&d!==null):{"html"in d&&(m+=d.html);break}default:m+=d}}m+=S[l-1];const w=T(m.trim());return F(w,o),fe(w,o),w},render:(S,o)=>{S.innerHTML="",S.appendChild(o)}}})(),M=new(Y=class{constructor(){y(this,R,void 0);C(this,R,new WeakMap)}register(t,e){if(!n(this,R).get(t))n(this,R).set(t,e);else throw console.error(t),"service already exists"}getService(t){const e=n(this,R).get(t);if(e)return e;throw console.error(t),"service is not a registered service."}clear(){C(this,R,new WeakMap)}},R=new WeakMap,Y),se=t=>typeof t=="function",re=t=>{const e=t.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(s=>s.trim()):[]},j=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),J=(t,e,s,r=!1)=>(t.addEventListener(e,s,r),()=>{t.removeEventListener(e,s,r)}),z=(t,e,s)=>{if(e.length>0){const r=[];for(const u of e)u.__metadata__?r.push(s):r.push(M.getService(u));const a=re(t),c=new t(...r);return e.forEach((u,f)=>{c[a[f]]=r[f]}),c}else return new t},P=new class{constructor(){v(this,"globalStyles");v(this,"globalStyleTag");v(this,"style_registry");v(this,"isRootNodeSet");this.globalStyles=new CSSStyleSheet,this.isRootNodeSet=!1}getComputedCss(t=""){let e=[];const s=new CSSStyleSheet;if(s.insertRule(":host { display: block; }"),e=[this.globalStyles,s],t){const r=new CSSStyleSheet;r.replace(t),e.push(r)}return e}};class W{constructor(){v(this,"shadowRoot");v(this,"update");v(this,"emitEvent")}static get __metadata__(){return{name:"Renderer"}}}const ne={selector:"",root:!1,styles:"",deps:[],standalone:!1},B=(t,e)=>{const s=document.createElement("style");return s.innerHTML=t,e&&e.appendChild(s),s},G=(t,e)=>{var s,r,a,c;if(!window.customElements.get(t.selector)){if(t={...ne,...t},t.styles=t.styles.toString(),t.root&&!P.isRootNodeSet)P.isRootNodeSet=!0,t.styles&&(P.globalStyles.replace(t.styles),P.globalStyleTag=B(t.styles,document.head));else if(t.root&&P.isRootNodeSet)throw Error("Cannot register duplicate root component in "+t.selector+" component");window.customElements.define(t.selector,(c=class extends HTMLElement{constructor(){super();y(this,s,void 0);y(this,r,void 0);y(this,a,void 0);C(this,r,this.attachShadow({mode:"open"})),j||(n(this,r).adoptedStyleSheets=P.getComputedCss(t.styles)),this.update=this.update.bind(this),this.emitEvent=this.emitEvent.bind(this),this.setProps=this.setProps.bind(this),this.getInstance=this.getInstance.bind(this)}emulateComponent(){j&&t.styles&&C(this,a,B(compiledCSS))}connectedCallback(){this.emulateComponent();const f=new W;f.shadowRoot=n(this,r),f.update=this.update,f.emitEvent=this.emitEvent,C(this,s,z(e,t.deps,f)),n(this,s).beforeMount&&n(this,s).beforeMount(),this.update(),n(this,s).mount&&n(this,s).mount(),this.emitEvent("bindprops",{setProps:this.setProps},!1)}update(){p(n(this,r),n(this,s).render.bind(n(this,s))()),j&&(t.styles&&n(this,r).insertBefore(n(this,a),n(this,r).childNodes[0]),P.globalStyleTag&&!t.standalone&&n(this,r).insertBefore(document.importNode(P.globalStyleTag,!0),n(this,r).childNodes[0]))}emitEvent(f,T){const F=new CustomEvent(f,{detail:T});this.dispatchEvent(F)}setProps(f){for(const[T,F]of Object.entries(f))n(this,s)[T]=F;n(this,s).onPropsChanged&&n(this,s).onPropsChanged(),this.update()}getInstance(){return n(this,s)}disconnectedCallback(){n(this,s).unmount&&n(this,s).unmount()}},s=new WeakMap,r=new WeakMap,a=new WeakMap,c))}},K={deps:[]},U=(...t)=>{let e={...K},s;if(t[0].hasOwnProperty("deps")?(e={...K,...t[0]},s=t[1]):s=t[0],s){const r=z(s,e.deps);M.register(s,r)}else throw new Error("error: Requires constructor to define service")},x=class{static checkParams(e,s){let r=0,a={},c=s.ParamCount;for(let f=0;f<e.length;f++){var u=s.Params[f];u.indexOf(":")>=0&&(a[u.split(":")[1]]=e[f],r+=1)}return r===c?a:{}}static getParamCount(e){let s=0;return e.forEach(r=>{r.indexOf(":")>=0&&(s+=1)}),s}static formatRoute(e){let s={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(s.Params=e.path.split("/").filter(r=>r.length>0),s.Url=e.path,s.Template="",s.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");s.Template=e.template,s.TemplatePath=e.templatePath}e.canActivate&&(s.canActivate=e.canActivate),s.ParamCount=x.getParamCount(s.Params),x.routeList.push(s)}static preloadRoutes(){for(const e of x.routeList)e.TemplatePath&&e.TemplatePath()}};let N=x;v(N,"routeList",[]);const ie=t=>!!t&&typeof t.subscribe=="function",ae=t=>!!t&&typeof t.then=="function",oe=t=>({subscribe:e=>{e(t)}}),le=t=>({subscribe:e=>{Promise.resolve(t).then(s=>{e(s)})}});class ce{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const Q=t=>ie(t)?t:ae(t)?le(Promise.resolve(t)):oe(t);class D{constructor(){y(this,I);y(this,O);y(this,k);y(this,E,{path:"",routeParams:new Map,queryParams:new Map,state:{}});y(this,_,new ce);y(this,H,void 0)}startHashChange(){C(this,H,J(window,"hashchange",()=>{L(this,I,ee).call(this)}))}stopHashChange(){n(this,H).call(this)}getTemplate(){return n(this,_).asObservable()}getCurrentRoute(){return n(this,E)}navigateTo(e="",s){e?(window.location.hash.replace(/^#/,"")===e&&L(this,k,$).call(this,e,s),window.location.hash="#"+e):L(this,k,$).call(this,e,s)}}E=new WeakMap,_=new WeakMap,H=new WeakMap,I=new WeakSet,ee=function(){const e=window.location.hash.replace(/^#/,"");L(this,k,$).call(this,e,null)},O=new WeakSet,te=function(e,s){if(e){let r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return s.match(r)}else return e===s},k=new WeakSet,$=function(e,s){let r=e.split("/").filter(u=>u.length>0),a=N.routeList.filter(u=>{if(u.Params.length===r.length&&L(this,O,te).call(this,u.Url,e))return u;if(u.Url===e)return u}),c=a.length>0?a[0]:null;c&&(n(this,E).path=e,n(this,E).state={...s||{}},Q(c.canActivate()).subscribe(u=>{if(!u)return;let f=N.checkParams(r,c);if(Object.keys(f).length>0||e){n(this,E).routeParams=new Map(Object.entries(f));const T=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];n(this,E).queryParams=new Map(T),c.IsRegistered?n(this,_).next(c.Template):c.TemplatePath&&Q(c.TemplatePath()).subscribe(F=>{c.IsRegistered=!0,n(this,_).next(c.Template)})}else this.navigateTo(c.redirectTo)}))},U(D);class ue{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,s){this.internalRouter.navigateTo(e,s)}registerRoutes(e,s=!1){if(Array.isArray(e)){for(let r of e)N.formatRoute(r);s&&N.preloadRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}U({deps:[D]},ue);const he=()=>{var e,s;class t{constructor(a,c){y(this,e,"");y(this,s,void 0);v(this,"update")}beforeMount(){C(this,s,this.internalRouterSrvc.getTemplate().subscribe(a=>{C(this,e,a),this.renderer.update()})),this.internalRouterSrvc.startHashChange()}mount(){let a=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(a)}unmount(){n(this,s).call(this),this.internalRouterSrvc.stopHashChange()}render(){if(n(this,e)){const a=[`${n(this,e)}`];return a.raw=[`${n(this,e)}`],h(a)}else return h``}}e=new WeakMap,s=new WeakMap,G({selector:"router-outlet",deps:[D,W]},t)},X=t=>{let e=t;return[e,r=>{let a;se(r)?a=r(e):a=r,Object.assign(e,a)}]},de=t=>{let e;switch(t.nodeName&&t.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(t.type)?e=t.checked?t.value!==null&&t.value!=="on"?t.value:!0:!1:e=t.value;break}case"select":{const s=t.type==="select-one",a=[...Array.from(t.options)].filter(c=>c.selected).map(c=>{var u;return(u=c.value)!=null?u:(c.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")});e=s?a[0]:a;break}default:{e=t.value;break}}return e},me=t=>{let[e,s]=X(t);return[e,c=>u=>{let f=u.target;const T=de(f);s(()=>(e[c]=T,e))},()=>{for(const c of Object.keys(e))e[c]=""}]};return i.Component=G,i.Renderer=W,i.Service=U,i.fromNativeEvent=J,i.html=h,i.registerRouterComponent=he,i.render=p,i.useFormFields=me,i.useState=X,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),i}({});
