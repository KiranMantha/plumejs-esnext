var Se=Object.defineProperty;var te=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var D=(a,o,h)=>o in a?Se(a,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):a[o]=h,A=(a,o)=>{for(var h in o||(o={}))we.call(o,h)&&D(a,h,o[h]);if(te)for(var h of te(o))ye.call(o,h)&&D(a,h,o[h]);return a};var T=(a,o,h)=>(D(a,typeof o!="symbol"?o+"":o,h),h),V=(a,o,h)=>{if(!o.has(a))throw TypeError("Cannot "+h)};var i=(a,o,h)=>(V(a,o,"read from private field"),h?h.call(a):o.get(a)),y=(a,o,h)=>{if(o.has(a))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(a):o.set(a,h)},R=(a,o,h,F)=>(V(a,o,"write to private field"),F?F.call(a,h):o.set(a,h),h);var M=(a,o,h)=>(V(a,o,"access private method"),h);var PlumeJS=function(a){var P,Y,E,_,x,H,Te,O,Ce,k,q;"use strict";const{html:o,render:h}=(()=>{const t=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,e=/<[a-z][^>]+$/i,s="attr",r=/^attr([^ ]+)/,c="insertNode",l=/^insertNode([^ ]+)/,n=p=>{const u={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let f=JSON.stringify(p);const d=b=>u[b]||b;return f=(b=>b.replace(/[&<>\(\)]/g,d))(f),JSON.parse(f)},g=(p,u)=>{var S;const f=p.options,d=Array.isArray(u)?u:[u];let w,b,m=f.length;for(;m--;){b=f[m];const I=(S=b.getAttribute("value"))!=null?S:(b.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(b.selected=d.indexOf(I)>-1)&&(w=!0)}w||(p.selectedIndex=-1)},C=p=>{const u=document.createElement("template");return u.innerHTML=p,u.content},Z=(p,u)=>{const f=document.createTreeWalker(p,NodeFilter.SHOW_ELEMENT,null);let d=f.nextNode();for(;d;){if(d.hasAttributes()){const w=Array.from(d.attributes).filter(b=>r.test(b.nodeName));for(const{nodeName:b,nodeValue:m}of w){const S=r.exec(b)[1];switch(!0){case/^on+/.test(m):{const I=m.slice(2).toLowerCase();d.addEventListener(I,u[S]);break}case/ref/.test(m):{u[S](d);break}case/^data-+/.test(m):{d.setAttribute(`data-${m}`,n(u[S]));break}case/^aria-+/.test(m):{d.setAttribute(`aria-${m}`,n(u[S]));break}case/class/.test(m):{u[S]?d.classList.add(...u[S].split(" ")):d.setAttribute("class","");break}case/value/.test(m):{d.nodeName.toLowerCase()==="select"?g(d,u[S]):d.value=n(u[S]);break}case/disabled/.test(m):case/checked/.test(m):{u[S]?d.setAttribute(m,u[S]):d.removeAttribute(m);break}default:d.setAttribute(m,n(u[S]))}d.removeAttribute(b)}}d=f.nextNode()}},ge=(p,u)=>{const f=document.createTreeWalker(p,NodeFilter.SHOW_COMMENT,null);let d=f.nextNode(),w;for(;d;){if(w=l.exec(d.data)){const b=Array.isArray(u[w[1]])?u[w[1]]:[u[w[1]]];d.replaceWith(...b),f.currentNode=p}d=f.nextNode()}};return{html:(p,...u)=>{let f="";const{length:d}=p;for(let b=1;b<d;b++){const m=u[b-1];let S=!1;if(f+=p[b-1],t.test(f)&&e.test(f)&&(f=f.replace(t,(I,pe,ee)=>`${s}${b-1}=${ee||'"'}${pe}${ee?"":'"'}`),S=!0),!S)switch(!0){case Array.isArray(m):case m instanceof DocumentFragment:{f+=`<!--${c}${b-1}-->`;break}case(typeof m=="object"&&m!==null):{"html"in m&&(f+=m.html);break}default:f+=m}}f+=p[d-1];const w=C(f.trim());return Z(w,u),ge(w,u),w},render:(p,u)=>{p.innerHTML="",p.appendChild(u)}}})(),F=new(Y=class{constructor(){y(this,P,void 0);R(this,P,new WeakMap)}register(t,e){if(!i(this,P).get(t))i(this,P).set(t,e);else throw console.error(t),"service already exists"}getService(t){const e=i(this,P).get(t);if(e)return e;throw console.error(t),"service is not a registered service."}clear(){R(this,P,new WeakMap)}},P=new WeakMap,Y),se=t=>typeof t=="function",re=t=>{const e=t.toString().split(/constructor\s*[^\(]*\(\s*([^\)]*)\)/m);return e.length===3?e[1].split(",").map(s=>s.trim()):[]},$=(()=>{try{return new CSSStyleSheet,!1}catch{return!0}})(),ne=(t,e,s,r=!1)=>(t.addEventListener(e,s,r),()=>{t.removeEventListener(e,s,r)}),J=(t,e,s)=>{if(e.length>0){const r=[];for(const n of e)n.__metadata__?r.push(s):r.push(F.getService(n));const c=re(t),l=new t(...r);return e.forEach((n,g)=>{l[c[g]]=r[g]}),l}else return new t},v=new class{constructor(){T(this,"globalStyles");T(this,"globalStyleTag");T(this,"style_registry");T(this,"isRootNodeSet");this.globalStyles=new CSSStyleSheet,this.isRootNodeSet=!1}getComputedCss(t=""){let e=[];const s=new CSSStyleSheet;if(s.insertRule(":host { display: block; }"),e=[this.globalStyles,s],t){const r=new CSSStyleSheet;r.replace(t),e.push(r)}return e}};class j{constructor(){T(this,"shadowRoot");T(this,"update");T(this,"emitEvent")}static get __metadata__(){return{name:"Renderer"}}}const z="data-compid",ae={selector:"",root:!1,styles:"",useShadow:!0,deps:[]},ie=(t,e)=>(t&&(t=e+" "+t.replace("}",` } ${e} `)),t),B=(t,e)=>{const s=document.createElement("style");return s.innerHTML=t,e&&e.appendChild(s),s},G=(t,e)=>{var s,r,c,l;if(!window.customElements.get(t.selector)){if(t=A(A({},ae),t),t.styles=t.styles.toString(),t.root&&!v.isRootNodeSet)v.isRootNodeSet=!0,t.styles&&(v.globalStyles.replace(t.styles),v.globalStyleTag=B(t.styles,document.head));else if(t.root&&v.isRootNodeSet)throw Error("Cannot register duplicate root component in "+t.selector+" component");window.customElements.define(t.selector,(l=class extends HTMLElement{constructor(){super();y(this,s,void 0);y(this,r,void 0);y(this,c,void 0);R(this,r,this.attachShadow({mode:"open"})),$||(i(this,r).adoptedStyleSheets=v.getComputedCss(t.styles)),this.update=this.update.bind(this),this.emitEvent=this.emitEvent.bind(this),this.setProps=this.setProps.bind(this),this.getInstance=this.getInstance.bind(this)}emulateComponent(){if($&&t.styles){const n=new Date().getTime()+Math.floor(Math.random()*1e3+1),g=ie(t.styles,`[${z}="${n.toString()}"]`);R(this,c,B(g)),this.setAttribute(z,n.toString())}}connectedCallback(){this.emulateComponent();const n=new j;n.shadowRoot=i(this,r),n.update=this.update,n.emitEvent=this.emitEvent,R(this,s,J(e,t.deps,n)),i(this,s).beforeMount&&i(this,s).beforeMount(),this.update(),i(this,s).mount&&i(this,s).mount()}update(){h(i(this,r),i(this,s).render.bind(i(this,s))()),$&&(t.styles&&i(this,r).insertBefore(i(this,c),i(this,r).childNodes[0]),v.globalStyleTag&&i(this,r).insertBefore(document.importNode(v.globalStyleTag,!0),i(this,r).childNodes[0]))}emitEvent(n,g){const C=new CustomEvent(n,{detail:g});this.dispatchEvent(C)}setProps(n){for(const[g,C]of Object.entries(n))i(this,s)[g]=C;i(this,s).onPropsChanged&&i(this,s).onPropsChanged(),this.update()}getInstance(){return i(this,s)}disconnectedCallback(){i(this,s).unmount&&i(this,s).unmount()}},s=new WeakMap,r=new WeakMap,c=new WeakMap,l))}},K={deps:[]},W=(...t)=>{let e=A({},K),s;if(t[0].hasOwnProperty("deps")?(e=A(A({},K),t[0]),s=t[1]):s=t[0],s){const r=J(s,e.deps);F.register(s,r)}else throw new Error("error: Requires constructor to define service")},L=class{static checkParams(e,s){let r=0,c={},l=s.ParamCount;for(let g=0;g<e.length;g++){var n=s.Params[g];n.indexOf(":")>=0&&(c[n.split(":")[1]]=e[g],r+=1)}return r===l?c:{}}static getParamCount(e){let s=0;return e.forEach(r=>{r.indexOf(":")>=0&&(s+=1)}),s}static formatRoute(e){let s={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(s.Params=e.path.split("/").filter(r=>r.length>0),s.Url=e.path,s.Template="",s.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");s.Template=e.template,s.TemplatePath=e.templatePath}e.canActivate&&(s.canActivate=e.canActivate),s.ParamCount=L.getParamCount(s.Params),L.routeList.push(s)}static preloadRoutes(){for(const e of L.routeList)e.TemplatePath&&e.TemplatePath()}};let N=L;T(N,"routeList",[]);const oe=t=>!!t&&typeof t.subscribe=="function",ce=t=>!!t&&typeof t.then=="function",le=t=>({subscribe:e=>{e(t)}}),ue=t=>({subscribe:e=>{Promise.resolve(t).then(s=>{e(s)})}});class he{asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){return this.internalFn=e,this.unsubscribe}unsubscribe(){this._internalFn=null}next(e){this.internalFn(e)}}const Q=t=>oe(t)?t:ce(t)?ue(Promise.resolve(t)):le(t);class U{constructor(){y(this,H);y(this,O);y(this,k);y(this,E,{path:"",routeParams:new Map,queryParams:new Map,state:{}});y(this,_,new he);y(this,x,void 0)}startHashChange(){R(this,x,ne(window,"hashchange",()=>{M(this,H,Te).call(this)}))}stopHashChange(){i(this,x).call(this)}getTemplate(){return i(this,_).asObservable()}getCurrentRoute(){return i(this,E)}navigateTo(e="",s){e?(window.location.hash.replace(/^#/,"")===e&&M(this,k,q).call(this,e,s),window.location.hash="#"+e):M(this,k,q).call(this,e,s)}}E=new WeakMap,_=new WeakMap,x=new WeakMap,H=new WeakSet,Te=function(){const e=window.location.hash.replace(/^#/,"");M(this,k,q).call(this,e,null)},O=new WeakSet,Ce=function(e,s){if(e){let r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return s.match(r)}else return e===s},k=new WeakSet,q=function(e,s){let r=e.split("/").filter(n=>n.length>0),c=N.routeList.filter(n=>{if(n.Params.length===r.length&&M(this,O,Ce).call(this,n.Url,e))return n;if(n.Url===e)return n}),l=c.length>0?c[0]:null;l&&(i(this,E).path=e,i(this,E).state=A({},s||{}),Q(l.canActivate()).subscribe(n=>{if(!n)return;let g=N.checkParams(r,l);if(Object.keys(g).length>0||e){i(this,E).routeParams=new Map(Object.entries(g));const C=window.location.hash.split("?")[1]?new URLSearchParams(window.location.hash.split("?")[1]).entries():[];i(this,E).queryParams=new Map(C),l.IsRegistered?i(this,_).next(l.Template):l.TemplatePath&&Q(l.TemplatePath()).subscribe(Z=>{l.IsRegistered=!0,i(this,_).next(l.Template)})}else this.navigateTo(l.redirectTo)}))},W(U);class de{constructor(e){}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,s){this.internalRouter.navigateTo(e,s)}registerRoutes(e,s=!1){if(Array.isArray(e)){for(let r of e)N.formatRoute(r);s&&N.preloadRoutes()}else throw Error("router.addRoutes: the parameter must be an array")}}W({deps:[U]},de);const me=()=>{var e,s;class t{constructor(c,l){y(this,e,"");y(this,s,void 0);T(this,"update")}beforeMount(){R(this,s,this.internalRouterSrvc.getTemplate().subscribe(c=>{R(this,e,c),this.renderer.update()})),this.internalRouterSrvc.startHashChange()}mount(){let c=window.location.hash.replace(/^#/,"");this.internalRouterSrvc.navigateTo(c)}unmount(){i(this,s).call(this),this.internalRouterSrvc.stopHashChange()}render(){if(i(this,e)){const c=[`${i(this,e)}`];return c.raw=[`${i(this,e)}`],o(c)}else return o``}}e=new WeakMap,s=new WeakMap,G({selector:"router-outlet",deps:[U,j]},t)},X=t=>{let e=t;return[e,r=>{let c;se(r)?c=r(e):c=r,Object.assign(e,c)}]},fe=t=>{let e;switch(t.nodeName&&t.nodeName.toLowerCase()){case"input":case"textarea":{["radio","checkbox"].includes(t.type)?e=t.checked?t.value!==null&&t.value!=="on"?t.value:!0:!1:e=t.value;break}case"select":{const s=t.type==="select-one",c=[...Array.from(t.options)].filter(l=>l.selected).map(l=>{var n;return(n=l.value)!=null?n:(l.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")});e=s?c[0]:c;break}default:{e=t.value;break}}return e},be=t=>{let[e,s]=X(t);return[e,l=>n=>{let g=n.target;const C=fe(g);s(()=>(e[l]=C,e))},()=>{for(const l of Object.keys(e))e[l]=""}]};return a.Component=G,a.Renderer=j,a.Service=W,a.html=o,a.registerRouterComponent=me,a.render=h,a.useFormFields=be,a.useState=X,Object.defineProperty(a,"__esModule",{value:!0}),a[Symbol.toStringTag]="Module",a}({});
